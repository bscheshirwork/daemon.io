<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="HandheldFriendly" content="true" />
    <title>Документация &laquo; phpDaemon</title>
    <!-- <base href="http://daemon.io/" /> -->
    
    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="icon" href="/favicon.png" type="image/png" />

    <link rel="stylesheet" href="../css/normalize.min.css" />
    <link rel="stylesheet" href="../css/highlight.github.css" />
    <link rel="stylesheet" href="../css/font-awesome.min.css" />
    <link rel="stylesheet" href="../css/styles.doc.css" />
</head>
<body>
    <header>
        <div class="center">
            <a href="/" id="logo" title="phpDaemon">phpDaemon</a>
            <a href="?" id="langchoose" title="phpDaemon">{language}</a>
            <menu>
                <li><span><a href="http://daemon.io/examples.html" title="Examples">Примеры</a></span></li>
                <li><span><a href="/faq.html" title="FAQ">ЧАВО</a></span></li>
                <li class="active"><span><a href="http://daemon.io/docs/ru/" title="Documentation">Документация</a></span></li>
                <li><span><a href="https://github.com/kakserpom/phpdaemon/issues" title="Tracker" target="_blank">Задачи/ошибки</a></span></li>
                <li><span><a href="http://daemon.io/team.html" title="Team">Команда</a></span></li>
                <li><span><a href="http://daemon.io/contribute.html" title="Contribute">Участие</a></span></li>
                <li><span><a href="http://daemon.io/publications.html" title="Publications">Публикации</a></span></li>
            </menu>
        </div>
    </header>
    <div class="lang-chooser">
        <!-- <div class="center"> -->
            <ul>
                <li><a href="/docs/en/">English</a></li><li class="active"><a href="/docs/ru/">Русский</a></li>
            </ul>
        <!-- </div> -->
    </div>
    <div class="mainhead"></div>
    <a class="toggle_sidebar_button">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </a>
    <div class="sidebar">
        <ul>
<li><a href="#intro"><span>Введение</span></a>
<ul>
<li><a href="#intro/usage"><span>Пользование документацией</span></a>
<ul>
<li><a href="#intro/usage/hotkeys"><span>Горячие клавиши</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#install"><span>Установка</span></a>
<ul>
<li><a href="#install/requirements"><span>Требования</span></a></li>
<li><a href="#install/sources"><span>Исходный код</span></a></li>
<li><a href="#install/composer"><span>Composer</span></a></li>
<li><a href="#install/redhat"><span>CentOS/RedHat</span></a></li>
<li><a href="#install/ubuntu"><span>Ubuntu</span></a></li>
<li><a href="#install/gentoo"><span>Gentoo</span></a></li>
</ul></li>
<li><a href="#basics"><span>Основы</span></a>
<ul>
<li><a href="#basics/pseudotypes"><span>Псевдотипы</span></a>
<ul>
<li><a href="#basics/pseudotypes/url"><span>url</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#control"><span>Управление</span></a></li>
<li><a href="#examples"><span>Примеры</span></a></li>
<li><a href="#app_resolver"><span>Маршрутизация</span></a></li>
<li><a href="#config"><span>Конфигурация</span></a>
<ul>
<li><a href="#config/types"><span>Типы данных</span></a>
<ul>
<li><a href="#config/types/size"><span>Size</span></a></li>
<li><a href="#config/types/time"><span>Time</span></a></li>
<li><a href="#config/types/number"><span>Number</span></a></li>
</ul></li>
<li><a href="#config/variables"><span>Глобальные опции</span></a>
<ul>
<li><a href="#config/variables/file"><span>Конфигурационный файл</span></a></li>
<li><a href="#config/variables/graceful_restart"><span>Плавный перезапуск рабочих процессов</span></a></li>
<li><a href="#config/variables/pathes"><span>Основные пути</span></a></li>
<li><a href="#config/variables/master"><span>Связанные с мастер-процессом</span></a></li>
<li><a href="#config/variables/requests"><span>Запросы</span></a></li>
<li><a href="#config/variables/workers"><span>Рабочие процессы</span></a></li>
<li><a href="#config/variables/logging"><span>Журналирование и отладка</span></a></li>
<li><a href="#config/variables/eio"><span>Подсистема ввода-вывода POSIX</span></a></li>
</ul></li>
<li><a href="#config/application"><span>Приложения</span></a></li>
</ul></li>
<li><a href="#development"><span>Разработка</span></a>
<ul>
<li><a href="#development/pseudotypes"><span>Псевдотипы</span></a>
<ul>
<li><a href="#development/pseudotypes/url"><span>url</span></a></li>
</ul></li>
<li><a href="#development/app_instance"><span>Приложение</span></a></li>
<li><a href="#development/request"><span>Обработка запросов</span></a></li>
<li><a href="#development/servers_clients"><span>Серверы и клиенты</span></a></li>
<li><a href="#development/debugging"><span>Отладка</span></a></li>
</ul></li>
<li><a href="#servers"><span>Серверы</span></a>
<ul>
<li><a href="#servers/options"><span>Опции серверов</span></a></li>
<li><a href="#servers/http"><span>HTTP</span></a>
<ul>
<li><a href="#servers/http/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/fastcgi"><span>FastCGI</span></a>
<ul>
<li><a href="#servers/fastcgi/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/debugconsole"><span>DebugConsole</span></a>
<ul>
<li><a href="#servers/debugconsole/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/flashpolicy"><span>FlashPolicy</span></a>
<ul>
<li><a href="#servers/flashpolicy/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/ident"><span>Servers\Ident</span></a></li>
<li><a href="#servers/ircbouncer"><span>Servers\IRCBouncer</span></a></li>
<li><a href="#servers/lock"><span>Lock</span></a></li>
<li><a href="#servers/socks"><span>Servers\Socks</span></a></li>
<li><a href="#servers/websocket"><span>WebSocket</span></a>
<ul>
<li><a href="#servers/websocket/options"><span>Опции</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients"><span>Клиенты</span></a>
<ul>
<li><a href="#clients/basics"><span>Основы</span></a>
<ul>
<li><a href="#clients/basics/options"><span>Опции клиентов</span></a></li>
</ul></li>
<li><a href="#clients/asterisk"><span>Asterisk</span></a>
<ul>
<li><a href="#clients/asterisk/use"><span>Использование</span></a>
<ul>
<li><a href="#clients/asterisk/use/connect"><span>Соединение</span></a></li>
<li><a href="#clients/asterisk/use/io"><span>Немного о формате ввода-вывода</span></a></li>
<li><a href="#clients/asterisk/use/cmds"><span>Отправка команд и получение ответа</span></a></li>
<li><a href="#clients/asterisk/use/events"><span>Получение событий сервера</span></a></li>
</ul></li>
<li><a href="#clients/asterisk/example"><span>Пример реконнекта</span></a></li>
<li><a href="#clients/asterisk/pool"><span>Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/asterisk/pool/options"><span>Опции по-умолчанию</span></a></li>
<li><a href="#clients/asterisk/pool/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/pool/methods/getConnection"><span>getConnection</span></a></li>
</ul></li>
<li><a href="#clients/asterisk/pool/methods2"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/pool/methods/getSipPeers"><span>getSipPeers</span></a></li>
<li><a href="#clients/asterisk/pool/methods/getConfig"><span>getConfig</span></a></li>
<li><a href="#clients/asterisk/pool/methods/setVar"><span>setVar</span></a></li>
<li><a href="#clients/asterisk/pool/methods/status"><span>status</span></a></li>
<li><a href="#clients/asterisk/pool/methods/originate"><span>originate</span></a></li>
<li><a href="#clients/asterisk/pool/methods/ping"><span>ping</span></a></li>
<li><a href="#clients/asterisk/pool/methods/logoff"><span>logoff</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/asterisk/examples"><span>Примеры</span></a></li>
<li><a href="#clients/asterisk/pool2"><span>Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/asterisk/pool/options2"><span>Опции по-умолчанию</span></a></li>
<li><a href="#clients/asterisk/pool/methods3"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/pool/methods/get"><span>get</span></a></li>
<li><a href="#clients/asterisk/pool/methods/buildUrl"><span>buildUrl</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/asterisk/connection"><span>Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/asterisk/connection/properties"><span>Свойства</span></a></li>
<li><a href="#clients/asterisk/connection/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/connection/methods/getBody"><span>getBody</span></a></li>
<li><a href="#clients/asterisk/connection/methods/getHeader"><span>getHeader</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/asterisk/use2"><span>Использование</span></a>
<ul>
<li><a href="#clients/asterisk/use/prepare"><span>Подготовка объекта соединения</span></a></li>
</ul></li>
<li><a href="#clients/asterisk/examples2"><span>Примеры</span></a></li>
<li><a href="#clients/asterisk/pool3"><span>Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/asterisk/pool/options3"><span>Опции по-умолчанию</span></a></li>
<li><a href="#clients/asterisk/pool/methods4"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/pool/methods/getConnection2"><span>getConnection</span></a></li>
<li><a href="#clients/asterisk/pool/methods/likeEscape"><span>likeEscape</span></a></li>
<li><a href="#clients/asterisk/pool/methods/values"><span>values</span></a></li>
</ul></li>
<li><a href="#clients/asterisk/pool/properties"><span>Свойства</span></a></li>
<li><a href="#clients/asterisk/pool/methods5"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/pool/methods/onConnected"><span>onConnected</span></a></li>
<li><a href="#clients/asterisk/pool/methods/ping2"><span>ping</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/postgresql"><span>Clients\PostgreSQL</span></a></li>
<li><a href="#clients/redis"><span>Clients\Redis</span></a></li>
<li><a href="#clients/valve"><span>Clients\Valve</span></a></li>
<li><a href="#clients/websocket"><span>Clients\WebSocket</span></a></li>
<li><a href="#clients/xmpp"><span>Clients\XMPP</span></a></li>
</ul></li>
<li><a href="#lib"><span>Библиотеки</span></a>
<ul>
<li><a href="#lib/cache"><span>Cache</span></a>
<ul>
<li><a href="#lib/cache/capped-storage"><span>Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/cache/capped-storage/properties"><span>Свойства</span></a></li>
<li><a href="#lib/cache/capped-storage/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/cache/capped-storage/methods/hash"><span>hash</span></a></li>
<li><a href="#lib/cache/capped-storage/methods/invalidate"><span>invalidate</span></a></li>
<li><a href="#lib/cache/capped-storage/methods/getValue"><span>getValue</span></a></li>
</ul></li>
<li><a href="#lib/cache/capped-storage/properties2"><span>Свойства</span></a></li>
<li><a href="#lib/cache/capped-storage/methods2"><span>Методы</span></a>
<ul>
<li><a href="#lib/cache/capped-storage/methods/getHits"><span>getHits</span></a></li>
<li><a href="#lib/cache/capped-storage/methods/addListener"><span>addListener</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/cache/capped-storage-hits"><span>Класс CappedStorageHits <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorageHits.php"><i class="fa fa-github"></i></a></span></a></li>
</ul></li>
<li><a href="#lib/complexjob"><span>ComplexJob</span></a>
<ul>
<li><a href="#lib/complexjob/examples"><span>Примеры</span></a></li>
<li><a href="#lib/complexjob/consts"><span>Константы</span></a></li>
<li><a href="#lib/complexjob/properties"><span>Свойства</span></a></li>
<li><a href="#lib/complexjob/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/complexjob/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/complexjob/methods/offsetExists"><span>offsetExists</span></a></li>
<li><a href="#lib/complexjob/methods/offsetSet"><span>offsetSet</span></a></li>
<li><a href="#lib/complexjob/methods/getResults"><span>getResults</span></a></li>
<li><a href="#lib/complexjob/methods/hasCompleted"><span>hasCompleted</span></a></li>
<li><a href="#lib/complexjob/methods/setResult"><span>setResult</span></a></li>
<li><a href="#lib/complexjob/methods/checkQueue"><span>checkQueue</span></a></li>
<li><a href="#lib/complexjob/methods/isQueueFull"><span>isQueueFull</span></a></li>
<li><a href="#lib/complexjob/methods/cleanup"><span>cleanup</span></a></li>
<li><a href="#lib/complexjob/methods/__invoke"><span>__invoke</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/shellcommand"><span>ShellCommand</span></a>
<ul>
<li><a href="#lib/shellcommand/examples"><span>Примеры</span></a></li>
<li><a href="#lib/shellcommand/properties"><span>Свойства</span></a></li>
<li><a href="#lib/shellcommand/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/shellcommand/methods/exec"><span>exec</span></a></li>
<li><a href="#lib/shellcommand/methods/setUser"><span>setUser</span></a></li>
<li><a href="#lib/shellcommand/methods/setCwd"><span>setCwd</span></a></li>
<li><a href="#lib/shellcommand/methods/setArgs"><span>setArgs</span></a></li>
<li><a href="#lib/shellcommand/methods/nice"><span>nice</span></a></li>
<li><a href="#lib/shellcommand/methods/execute"><span>execute</span></a></li>
<li><a href="#lib/shellcommand/methods/close"><span>close</span></a></li>
<li><a href="#lib/shellcommand/methods/eof"><span>eof</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/timer"><span>Timer</span></a>
<ul>
<li><a href="#lib/timer/examples"><span>Примеры</span></a></li>
<li><a href="#lib/timer/global-functions"><span>Глобальные функции </span></a>
<ul>
<li><a href="#lib/timer/global-functions/setTimeout"><span>setTimeout</span></a></li>
</ul></li>
<li><a href="#lib/timer/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/timer/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/timer/methods/add"><span>add</span></a></li>
<li><a href="#lib/timer/methods/remove"><span>remove</span></a></li>
<li><a href="#lib/timer/methods/timeout"><span>timeout</span></a></li>
<li><a href="#lib/timer/methods/finish"><span>finish</span></a></li>
<li><a href="#lib/timer/methods/free"><span>free</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs"><span>FS</span></a>
<ul>
<li><a href="#lib/fs/filesystem"><span>Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/filesystem/properties"><span>Свойства</span></a></li>
<li><a href="#lib/fs/filesystem/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/filesystem/methods/init"><span>init</span></a></li>
<li><a href="#lib/fs/filesystem/methods/checkFileReadable"><span>checkFileReadable</span></a></li>
<li><a href="#lib/fs/filesystem/methods/updateConfig"><span>updateConfig</span></a></li>
<li><a href="#lib/fs/filesystem/methods/statPrepare"><span>statPrepare</span></a></li>
<li><a href="#lib/fs/filesystem/methods/unlink"><span>unlink</span></a></li>
<li><a href="#lib/fs/filesystem/methods/statvfs"><span>statvfs</span></a></li>
<li><a href="#lib/fs/filesystem/methods/realpath"><span>realpath</span></a></li>
<li><a href="#lib/fs/filesystem/methods/syncfs"><span>syncfs</span></a></li>
<li><a href="#lib/fs/filesystem/methods/rmdir"><span>rmdir</span></a></li>
<li><a href="#lib/fs/filesystem/methods/readdir"><span>readdir</span></a></li>
<li><a href="#lib/fs/filesystem/methods/sendfile"><span>sendfile</span></a></li>
<li><a href="#lib/fs/filesystem/methods/readfile"><span>readfile</span></a></li>
<li><a href="#lib/fs/filesystem/methods/genRndTempnam"><span>genRndTempnam</span></a></li>
<li><a href="#lib/fs/filesystem/methods/tempnam"><span>tempnam</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs/file"><span>Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/file/properties"><span>Свойства</span></a></li>
<li><a href="#lib/fs/file/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/file/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/fs/file/methods/convertFlags"><span>convertFlags</span></a></li>
<li><a href="#lib/fs/file/methods/stat"><span>stat</span></a></li>
<li><a href="#lib/fs/file/methods/statvfs"><span>statvfs</span></a></li>
<li><a href="#lib/fs/file/methods/datasync"><span>datasync</span></a></li>
<li><a href="#lib/fs/file/methods/chown"><span>chown</span></a></li>
<li><a href="#lib/fs/file/methods/clearStatCache"><span>clearStatCache</span></a></li>
<li><a href="#lib/fs/file/methods/sendfile"><span>sendfile</span></a></li>
<li><a href="#lib/fs/file/methods/readAll"><span>readAll</span></a></li>
<li><a href="#lib/fs/file/methods/__toString"><span>__toString</span></a></li>
<li><a href="#lib/fs/file/methods/seek"><span>seek</span></a></li>
<li><a href="#lib/fs/file/methods/close"><span>close</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs/filewatcher"><span>Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/filewatcher/properties"><span>Свойства</span></a></li>
<li><a href="#lib/fs/filewatcher/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/filewatcher/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/fs/filewatcher/methods/rmWatch"><span>rmWatch</span></a></li>
<li><a href="#lib/fs/filewatcher/methods/watch"><span>watch</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs/pubsub"><span>Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/pubsub/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/pubsub/methods/eventExists"><span>eventExists</span></a></li>
<li><a href="#lib/fs/pubsub/methods/addEvent"><span>addEvent</span></a></li>
<li><a href="#lib/fs/pubsub/methods/unsub"><span>unsub</span></a></li>
<li><a href="#lib/fs/pubsub/methods/unsubFromAll"><span>unsubFromAll</span></a></li>
</ul></li>
<li><a href="#lib/fs/pubsub/properties"><span>Свойства</span></a></li>
<li><a href="#lib/fs/pubsub/methods2"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/pubsub/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/fs/pubsub/methods/onDeactivation"><span>onDeactivation</span></a></li>
<li><a href="#lib/fs/pubsub/methods/sub"><span>sub</span></a></li>
<li><a href="#lib/fs/pubsub/methods/pub"><span>pub</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs/application"><span>Класс Application <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS/Application.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/application/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/application/methods/getLocalSubscribersCount"><span>getLocalSubscribersCount</span></a></li>
<li><a href="#lib/fs/application/methods/setnx"><span>setnx</span></a></li>
<li><a href="#lib/fs/application/methods/getkey"><span>getkey</span></a></li>
<li><a href="#lib/fs/application/methods/unsubscribe"><span>unsubscribe</span></a></li>
<li><a href="#lib/fs/application/methods/publish"><span>publish</span></a></li>
<li><a href="#lib/fs/application/methods/onFinish"><span>onFinish</span></a></li>
<li><a href="#lib/fs/application/methods/wsHandler"><span>wsHandler</span></a></li>
<li><a href="#lib/fs/application/methods/beginSession"><span>beginSession</span></a></li>
<li><a href="#lib/fs/application/methods/endSession"><span>endSession</span></a></li>
<li><a href="#lib/fs/application/methods/callMethod"><span>callMethod</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs/requirements"><span>Требования</span></a></li>
<li><a href="#lib/fs/use"><span>Использование</span></a></li>
</ul></li>
<li><a href="#lib/telnethoneypot"><span>TelnetHoneypot</span></a>
<ul>
<li><a href="#lib/telnethoneypot/use"><span>Использование</span></a></li>
</ul></li>
<li><a href="#lib/serverstatus"><span>ServerStatus</span></a>
<ul>
<li><a href="#lib/serverstatus/use"><span>Использование</span></a></li>
<li><a href="#lib/serverstatus/note"><span>Примечание</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils"><span>Утилиты</span></a>
<ul>
<li><a href="#utils/binary"><span>Binary</span></a>
<ul>
<li><a href="#utils/binary/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/binary/methods/labels"><span>labels</span></a></li>
<li><a href="#utils/binary/methods/LV"><span>LV</span></a></li>
<li><a href="#utils/binary/methods/byte"><span>byte</span></a></li>
<li><a href="#utils/binary/methods/wordl"><span>wordl</span></a></li>
<li><a href="#utils/binary/methods/dwordl"><span>dwordl</span></a></li>
<li><a href="#utils/binary/methods/qwordl"><span>qwordl</span></a></li>
<li><a href="#utils/binary/methods/getChar"><span>getChar</span></a></li>
<li><a href="#utils/binary/methods/getStrWord"><span>getStrWord</span></a></li>
<li><a href="#utils/binary/methods/getQword"><span>getQword</span></a></li>
<li><a href="#utils/binary/methods/getString"><span>getString</span></a></li>
<li><a href="#utils/binary/methods/flags2bitarray"><span>flags2bitarray</span></a></li>
<li><a href="#utils/binary/methods/i2b"><span>i2b</span></a></li>
<li><a href="#utils/binary/methods/b2i"><span>b2i</span></a></li>
<li><a href="#utils/binary/methods/getbitmap"><span>getbitmap</span></a></li>
</ul></li>
<li><a href="#utils/binary/methods2"><span>Методы</span></a>
<ul>
<li><a href="#utils/binary/methods/hash"><span>hash</span></a></li>
<li><a href="#utils/binary/methods/compareStrings"><span>compareStrings</span></a></li>
</ul></li>
<li><a href="#utils/binary/methods3"><span>Методы</span></a>
<ul>
<li><a href="#utils/binary/methods/diffAsText"><span>diffAsText</span></a></li>
</ul></li>
<li><a href="#utils/binary/methods4"><span>Методы</span></a>
<ul>
<li><a href="#utils/binary/methods/toUTF8"><span>toUTF8</span></a></li>
<li><a href="#utils/binary/methods/toISO8859"><span>toISO8859</span></a></li>
<li><a href="#utils/binary/methods/fixUTF8"><span>fixUTF8</span></a></li>
<li><a href="#utils/binary/methods/removeBOM"><span>removeBOM</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/irc"><span>IRC</span></a>
<ul>
<li><a href="#utils/irc/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/irc/methods/getCommandByCode"><span>getCommandByCode</span></a></li>
<li><a href="#utils/irc/methods/parseUsermask"><span>parseUsermask</span></a></li>
</ul></li>
<li><a href="#utils/irc/methods2"><span>Методы</span></a>
<ul>
<li><a href="#utils/irc/methods/get"><span>get</span></a></li>
</ul></li>
<li><a href="#utils/irc/methods3"><span>Методы</span></a>
<ul>
<li><a href="#utils/irc/methods/__construct"><span>__construct</span></a></li>
<li><a href="#utils/irc/methods/getSegments"><span>getSegments</span></a></li>
<li><a href="#utils/irc/methods/write"><span>write</span></a></li>
<li><a href="#utils/irc/methods/delete"><span>delete</span></a></li>
</ul></li>
<li><a href="#utils/irc/methods4"><span>Методы</span></a>
<ul>
<li><a href="#utils/irc/methods/readln"><span>readln</span></a></li>
<li><a href="#utils/irc/methods/clearScreen"><span>clearScreen</span></a></li>
<li><a href="#utils/irc/methods/resetStyle"><span>resetStyle</span></a></li>
<li><a href="#utils/irc/methods/drawTable"><span>drawTable</span></a></li>
</ul></li>
<li><a href="#utils/irc/methods5"><span>Методы</span></a>
<ul>
<li><a href="#utils/irc/methods/each"><span>each</span></a></li>
<li><a href="#utils/irc/methods/detachFirst"><span>detachFirst</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/priority-queue-callbacks"><span>PriorityQueueCallbacks</span></a>
<ul>
<li><a href="#utils/priority-queue-callbacks/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/priority-queue-callbacks/methods/enqueue"><span>enqueue</span></a></li>
<li><a href="#utils/priority-queue-callbacks/methods/dequeue"><span>dequeue</span></a></li>
<li><a href="#utils/priority-queue-callbacks/methods/executeAll"><span>executeAll</span></a></li>
</ul></li>
<li><a href="#utils/priority-queue-callbacks/methods2"><span>Методы</span></a>
<ul>
<li><a href="#utils/priority-queue-callbacks/methods/push"><span>push</span></a></li>
<li><a href="#utils/priority-queue-callbacks/methods/executeOne"><span>executeOne</span></a></li>
<li><a href="#utils/priority-queue-callbacks/methods/executeAll2"><span>executeAll</span></a></li>
<li><a href="#utils/priority-queue-callbacks/methods/reset"><span>reset</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/static-object-watchdog"><span>StaticObjectWatchdog</span></a></li>
<li><a href="#utils/strict-static-object-watchdog"><span>StrictStaticObjectWatchdog</span></a></li>
<li><a href="#utils/deferred-event-handlers"><span>DeferredEventHandlers</span></a></li>
<li><a href="#utils/event-handlers"><span>EventHandlers</span></a></li>
<li><a href="#utils/sessions"><span>Sessions</span></a></li>
<li><a href="#utils/dnode"><span>DNode</span></a>
<ul>
<li><a href="#utils/dnode/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/dnode/methods/onHandshake"><span>onHandshake</span></a></li>
<li><a href="#utils/dnode/methods/extractCallbacks"><span>extractCallbacks</span></a></li>
<li><a href="#utils/dnode/methods/callRemoteArray"><span>callRemoteArray</span></a></li>
<li><a href="#utils/dnode/methods/toJsonDebugResursive"><span>toJsonDebugResursive</span></a></li>
<li><a href="#utils/dnode/methods/onFinish"><span>onFinish</span></a></li>
<li><a href="#utils/dnode/methods/__call"><span>__call</span></a></li>
<li><a href="#utils/dnode/methods/onFrame"><span>onFrame</span></a></li>
</ul></li>
<li><a href="#utils/dnode/properties"><span>Свойства</span></a></li>
<li><a href="#utils/dnode/methods2"><span>Методы</span></a>
<ul>
<li><a href="#utils/dnode/methods/__construct"><span>__construct</span></a></li>
<li><a href="#utils/dnode/methods/onConfigUpdated"><span>onConfigUpdated</span></a></li>
<li><a href="#utils/dnode/methods/setConnectionClass"><span>setConnectionClass</span></a></li>
<li><a href="#utils/dnode/methods/disable"><span>disable</span></a></li>
<li><a href="#utils/dnode/methods/finish"><span>finish</span></a></li>
<li><a href="#utils/dnode/methods/detach"><span>detach</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/client"><span>Client</span></a>
<ul>
<li><a href="#utils/client/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/client/methods/addServer"><span>addServer</span></a></li>
<li><a href="#utils/client/methods/detach"><span>detach</span></a></li>
<li><a href="#utils/client/methods/markConnBusy"><span>markConnBusy</span></a></li>
<li><a href="#utils/client/methods/touchPending"><span>touchPending</span></a></li>
<li><a href="#utils/client/methods/getConnectionRR"><span>getConnectionRR</span></a></li>
<li><a href="#utils/client/methods/requestByKey"><span>requestByKey</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/clientconnection"><span>ClientConnection</span></a>
<ul>
<li><a href="#utils/clientconnection/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/clientconnection/methods/__construct"><span>__construct</span></a></li>
<li><a href="#utils/clientconnection/methods/onResponse"><span>onResponse</span></a></li>
<li><a href="#utils/clientconnection/methods/setFree"><span>setFree</span></a></li>
<li><a href="#utils/clientconnection/methods/checkFree"><span>checkFree</span></a></li>
<li><a href="#utils/clientconnection/methods/isQueueEmpty"><span>isQueueEmpty</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/connection"><span>Connection</span></a>
<ul>
<li><a href="#utils/connection/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/connection/methods/isConnected"><span>isConnected</span></a></li>
<li><a href="#utils/connection/methods/setPeername"><span>setPeername</span></a></li>
<li><a href="#utils/connection/methods/getSocketName"><span>getSocketName</span></a></li>
<li><a href="#utils/connection/methods/onUdpPacket"><span>onUdpPacket</span></a></li>
<li><a href="#utils/connection/methods/onInheritanceFromRequest"><span>onInheritanceFromRequest</span></a></li>
<li><a href="#utils/connection/methods/onFailureEv"><span>onFailureEv</span></a></li>
<li><a href="#utils/connection/methods/write"><span>write</span></a></li>
<li><a href="#utils/connection/methods/getUrl"><span>getUrl</span></a></li>
<li><a href="#utils/connection/methods/getPort"><span>getPort</span></a></li>
<li><a href="#utils/connection/methods/connectUnix"><span>connectUnix</span></a></li>
<li><a href="#utils/connection/methods/connectUdp"><span>connectUdp</span></a></li>
<li><a href="#utils/connection/methods/setKeepalive"><span>setKeepalive</span></a></li>
<li><a href="#utils/connection/methods/setTimeouts"><span>setTimeouts</span></a></li>
<li><a href="#utils/connection/methods/onFinish"><span>onFinish</span></a></li>
</ul></li>
<li><a href="#utils/connection/properties"><span>Свойства</span></a></li>
<li><a href="#utils/connection/methods2"><span>Методы</span></a>
<ul>
<li><a href="#utils/connection/methods/__construct"><span>__construct</span></a></li>
<li><a href="#utils/connection/methods/isFreed"><span>isFreed</span></a></li>
<li><a href="#utils/connection/methods/getBev"><span>getBev</span></a></li>
<li><a href="#utils/connection/methods/setContext"><span>setContext</span></a></li>
<li><a href="#utils/connection/methods/setTimeout"><span>setTimeout</span></a></li>
<li><a href="#utils/connection/methods/setPriority"><span>setPriority</span></a></li>
<li><a href="#utils/connection/methods/readLine"><span>readLine</span></a></li>
<li><a href="#utils/connection/methods/drainIfMatch"><span>drainIfMatch</span></a></li>
<li><a href="#utils/connection/methods/prependInput"><span>prependInput</span></a></li>
<li><a href="#utils/connection/methods/look"><span>look</span></a></li>
<li><a href="#utils/connection/methods/search"><span>search</span></a></li>
<li><a href="#utils/connection/methods/getInputLength"><span>getInputLength</span></a></li>
<li><a href="#utils/connection/methods/freezeInput"><span>freezeInput</span></a></li>
<li><a href="#utils/connection/methods/freezeOutput"><span>freezeOutput</span></a></li>
<li><a href="#utils/connection/methods/onWrite"><span>onWrite</span></a></li>
<li><a href="#utils/connection/methods/writeln"><span>writeln</span></a></li>
<li><a href="#utils/connection/methods/close"><span>close</span></a></li>
<li><a href="#utils/connection/methods/onReadEv"><span>onReadEv</span></a></li>
<li><a href="#utils/connection/methods/onWriteEv"><span>onWriteEv</span></a></li>
<li><a href="#utils/connection/methods/moveToBuffer"><span>moveToBuffer</span></a></li>
<li><a href="#utils/connection/methods/read"><span>read</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/server"><span>Server</span></a>
<ul>
<li><a href="#utils/server/properties"><span>Свойства</span></a></li>
<li><a href="#utils/server/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/server/methods/__construct"><span>__construct</span></a></li>
<li><a href="#utils/server/methods/bindSockets"><span>bindSockets</span></a></li>
<li><a href="#utils/server/methods/attachBound"><span>attachBound</span></a></li>
<li><a href="#utils/server/methods/closeBound"><span>closeBound</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#httprequest"><span>HTTPRequest</span></a>
<ul>
<li><a href="#httprequest/generic"><span>Generic</span></a>
<ul>
<li><a href="#httprequest/generic/properties"><span>Свойства</span></a></li>
<li><a href="#httprequest/generic/methods"><span>Методы</span></a>
<ul>
<li><a href="#httprequest/generic/methods/firstDeferredEventUsed"><span>firstDeferredEventUsed</span></a></li>
<li><a href="#httprequest/generic/methods/checkIfReady"><span>checkIfReady</span></a></li>
<li><a href="#httprequest/generic/methods/postPrepare"><span>postPrepare</span></a></li>
<li><a href="#httprequest/generic/methods/out"><span>out</span></a></li>
<li><a href="#httprequest/generic/methods/combinedOut"><span>combinedOut</span></a></li>
<li><a href="#httprequest/generic/methods/onWakeup"><span>onWakeup</span></a></li>
<li><a href="#httprequest/generic/methods/status"><span>status</span></a></li>
<li><a href="#httprequest/generic/methods/headers_list"><span>headers_list</span></a></li>
<li><a href="#httprequest/generic/methods/header"><span>header</span></a></li>
<li><a href="#httprequest/generic/methods/parseSize"><span>parseSize</span></a></li>
<li><a href="#httprequest/generic/methods/onUploadFileChunk"><span>onUploadFileChunk</span></a></li>
<li><a href="#httprequest/generic/methods/isUploadedFile"><span>isUploadedFile</span></a></li>
<li><a href="#httprequest/generic/methods/readBodyFile"><span>readBodyFile</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#httprequest/input"><span>Input</span></a>
<ul>
<li><a href="#httprequest/input/properties"><span>Свойства</span></a></li>
<li><a href="#httprequest/input/methods"><span>Методы</span></a>
<ul>
<li><a href="#httprequest/input/methods/setBoundary"><span>setBoundary</span></a></li>
<li><a href="#httprequest/input/methods/unfreeze"><span>unfreeze</span></a></li>
<li><a href="#httprequest/input/methods/isEof"><span>isEof</span></a></li>
<li><a href="#httprequest/input/methods/sendEOF"><span>sendEOF</span></a></li>
<li><a href="#httprequest/input/methods/readFromString"><span>readFromString</span></a></li>
<li><a href="#httprequest/input/methods/parseMultipart"><span>parseMultipart</span></a></li>
<li><a href="#httprequest/input/methods/writeChunkToFd"><span>writeChunkToFd</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#faq"><span>ЧаВО</span></a></li>
<li><a href="#publications"><span>Публикации</span></a></li>
<li><a href="#contribute"><span>Внести свою лепту</span></a>
<ul>
<li><a href="#contribute/this-doc"><span>Эта документация</span></a>
<ul>
<li><a href="#contribute/this-doc/commiting"><span>Внесение изменений</span></a></li>
<li><a href="#contribute/this-doc/markdown"><span>Формат документации</span></a>
<ul>
<li><a href="#contribute/this-doc/markdown/nesting"><span>Вложенность</span></a></li>
<li><a href="#contribute/this-doc/markdown/const"><span>Константы</span></a></li>
<li><a href="#contribute/this-doc/markdown/headers"><span>Заголовки</span></a></li>
<li><a href="#contribute/this-doc/markdown/lists"><span>Списки</span></a></li>
<li><a href="#contribute/this-doc/markdown/italic_bold"><span>Курсив и жирный</span></a></li>
<li><a href="#contribute/this-doc/markdown/simple_code"><span>Однострочный код</span></a></li>
<li><a href="#contribute/this-doc/markdown/multi_code"><span>Многострочный код</span></a></li>
<li><a href="#contribute/this-doc/markdown/tables"><span>Таблицы</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#contribute/php-doc"><span>PHPDoc</span></a></li>
<li><a href="#contribute/code"><span>Программный код</span></a></li>
</ul></li>
<li><a href="#doc-authors"><span>Авторы документации</span></a>
<ul>
<li><a href="#doc-authors/writing"><span>Написание</span></a></li>
<li><a href="#doc-authors/translation"><span>Перевод на русский</span></a></li>
<li><a href="#doc-authors/proofreading"><span>Корректура русской версии</span></a></li>
<li><a href="#doc-authors/scripting"><span>Программирование</span></a></li>
</ul></li>
</ul>

    </div>
    <div class="sidebar-downbtn">
        <i class="fa fa-arrow-down"></i>
    </div>
    <div class="main_wrap">
        <div class="main_container">
            
            <h2 id="intro"><div class="in anchor">Введение</div>

</h2>
<p class="doc-notice"><strong>Achtung!</strong><br />Only Russian version is available at the moment, but we are about to publish the English one and a variety of other translations. Currently you may consider reading old Wiki or auto-translating this page.<br />We are terribly sorry for the inconviniece.</p>
<p class="doc-notice">Документация активно дорабатывается!</p>
<p>PHPDaemon — это асинхронный демонизируемый фреймворк.
С&#160;его помощью легко писать очень быстрые сетевые приложения, веб-сервисы и многое другое.
Из&#160;коробки идут сервера FastCGI, HTTP, CGI, FlashPolicy, Telnet, WebSocket; клиенты MySQL, Redis, MongoDB, PostgreSQL, Memcached, IRC, XMPP и&#160;другие.
Работать с&#160;сетью действительно просто. Программист средней руки может написать, к&#160;примеру, полноценного IRC-бота за&#160;час.</p>
<ul>
<li>Официальный сайт <a href="http://daemon.io/">daemon.io</a>.  </li>
<li>GitHub репозиторий <a href="https://github.com/kakserpom/phpdaemon/">github.com/kakserpom/phpdaemon</a>.  </li>
<li>Обсудить проект можно&#160;в <a href="http://groups.google.com/group/phpdaemon">Google Groups</a>.  </li>
<li><a href="https://github.com/kakserpom/phpdaemon/issues">Отслеживание задач/ошибок</a></li>
</ul>
<h3 id="intro/usage"><div class="in anchor">Пользование документацией<span class="header-path"> <i>&larr;</i> <a href="#intro">Введение</a></span></div>

</h3>
<p>Как видите, вся документация представлена на одной странице, поэтому вы можете пользоваться обычным поиском по странице (горячая клавиша <code>Ctrl</code>&#160;+&#160;<code>F</code> или <code>Cmd</code>&#160;+&#160;<code>F</code>)</p>
<h4 id="intro/usage/hotkeys"><div class="in anchor">Горячие клавиши<span class="header-path"> <i>&larr;</i> <a href="#intro/usage">Пользование документацией</a> <i>&larr;</i> <a href="#intro">Введение</a></span></div>

</h4>
<ul>
<li><code>Ctrl</code> + <code>↑</code> — к предыдущему разделу на текущем уровне</li>
<li><code>Ctrl</code> + <code>↓</code> — к следующему разделу на текущем уровне</li>
<li><code>Ctrl</code> + <code>→</code> — на уровень вглубь</li>
<li><code>Ctrl</code> + <code>←</code> — на уровень ближе к поверхности</li>
</ul>
<h2 id="install"><div class="in anchor">Установка</div>

</h2>
<h3 id="install/requirements"><div class="in anchor">Требования<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<ul>
<li><code>PHP</code> версии не ниже 5.4;</li>
<li>Модули <code>posix</code>, <code>pcntl</code>, <code>socket</code>, <code>shmop</code>;</li>
<li><code>libevent 2</code>;</li>
<li><code>pecl-event</code> версии не ниже 1.6.1;</li>
</ul>
<p>Рекомендуется также установить:</p>
<ul>
<li><code>pecl-eio</code> для увеличения проиводительности файловой системы;</li>
<li><code>pecl-proctitle</code> для именования процессов в&#160;понятные названия: &#171;phpd: worker process&#187; (для PHP версии ниже 5.5);</li>
<li><code>pecl-inotify</code> для мониторинга файловой системы.</li>
</ul>
<h3 id="install/sources"><div class="in anchor">Исходный код<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Вы можете клонировать PHPDaemon репозиторий<br />
$&nbsp;<code>git clone https://github.com/kakserpom/phpdaemon.git</code></p>
<p>Или скачать текущую версию в виде архива<br />
$&nbsp;<code>wget https://github.com/kakserpom/phpdaemon/archive/master.zip</code></p>
<p>Установите необходимые модули<br />
$&nbsp;<code>pecl install event eio proctitle inotify</code></p>
<h3 id="install/composer"><div class="in anchor">Composer<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Добавьте раздел в ваш composer.json</p>
<pre><code class="">"require" : {
    "kakserpom/phpdaemon" : "dev-master"
}</code></pre>
<p>Подробная информации о пакете на <a href="https://packagist.org/packages/kakserpom/phpdaemon">packagist.org</a>.</p>
<h3 id="install/redhat"><div class="in anchor">CentOS/RedHat<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Для начала необходимо установить все сопутстсующие утилиты.<br />
$&nbsp;<code>sudo yum install -y git gcc openssl-devel libevent</code></p>
<p>Чтобы установить PHP 5.5 необходимо добавить Remi и Epel репозитории, потому что стандартный содержит старую версию.</p>
<p>Для RHEL/CentOS 6.4-6.0 32 Bit.<br />
$&nbsp;<code>sudo rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</code><br />
$&nbsp;<code>sudo rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm</code></p>
<p>Для RHEL/CentOS 6.4-6.0 64 Bit.<br />
$&nbsp;<code>sudo rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</code><br />
$&nbsp;<code>sudo rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm</code></p>
<p>Устанавливаем PHP.<br />
$&nbsp;<code>sudo yum --enablerepo=remi,remi-test install -y php-cli php-devel php-pear php-process</code></p>
<p>Далее устанавливаем pecl модули.<br />
$&nbsp;<code>sudo -i</code><br />
$&nbsp;<code>pecl install event eio</code></p>
<p>В PHP отсутсвует контроль подгрузки модулей. Для корректной работы модуля event и eio необходим модуль sockets.
В системах RedHat/CentOS модули подгружаются в порядке названия, поэтому назовем конфиги этих модулей как z-event.ini и z-eio.ini соответсвенно.<br />
$&nbsp;<code>echo "extension=event.so" > /etc/php.d/z-event.ini</code>
$&nbsp;<code>echo "extension=eio.so" > /etc/php.d/z-eio.ini</code></p>
<p><code>Ctrl + D</code> - выходим из sudo</p>
<p>Установите <code>date.timezone</code> в /etc/php.ini в соответствие с временной зоной сервера.
Раскомментируйте и отредактируйте строку <code>;date.timezone = </code> (например, <code>date.timezone = Europe/Moscow</code>)<br />
$&nbsp;<code>sudo vi /etc/php.ini</code></p>
<p>Подготовим директорию для установки PHPDaemon.<br />
$&nbsp;<code>sudo mkdir /opt/phpdaemon</code><br />
$&nbsp;<code>sudo chown [your user]:[your group] /opt/phpdaemon</code><br />
$&nbsp;<code>cd /opt/phpdaemon</code></p>
<p>Устанавливаем PHPDaemon.<br />
$&nbsp;<code>cd /opt/phpdaemon</code><br />
$&nbsp;<code>git clone https://github.com/kakserpom/phpdaemon.git ./</code></p>
<p>Создаем конфигурационный файл из примера.<br />
$&nbsp;<code>cp /opt/phpdaemon/conf/phpd.conf.example /opt/phpdaemon/conf/phpd.conf</code></p>
<p>Сделаем ссылку на phpd для удобного управления демоном<br />
$&nbsp;<code>ln -s /opt/phpdaemon/bin/phpd /usr/bin/phpd</code></p>
<p>Пробуем запустить демон.<br />
$&nbsp;<code>sudo phpd start --verbose-tty=1</code></p>
<p>Опция <code>--verbose-tty=1</code> указывет демону выводить журнал в терминал.</p>
<p>Если вы видите что-то похожее на это:</p>
<pre><code>[PHPD] Loaded config file: '/opt/phpdaemon/conf/phpd.conf'
[PHPD] Loaded config file: 'conf/conf.d/ExampleJabberBot.conf'
[PHPD] Loaded config file: 'conf/conf.d/FastCGI.conf'
[PHPD] Loaded config file: 'conf/conf.d/FlashpolicyServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/HTTPServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/IdentServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/SSL-sample.conf'
[PHPD] Loaded config file: 'conf/conf.d/WebSocketServer.conf'</code></pre>
<p>Поздравляем! PHPDaemon запущен!</p>
<h3 id="install/ubuntu"><div class="in anchor">Ubuntu<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Для начала необходимо установить все сопутстсующие утилиты.<br />
$&nbsp;<code>sudo apt-get install gcc make libcurl4-openssl-dev libevent-dev git libevent</code></p>
<p>Устанавливаем PHP 5.5.<br />
$&nbsp;<code>sudo apt-get install php5-cli php5-dev php-pear</code></p>
<p>Далее устанавливаем pecl модули.<br />
$&nbsp;<code>sudo -i</code><br />
$&nbsp;<code>pecl install event eio</code><br />
$&nbsp;<code>echo "extension=event.so" > /etc/php5/mods-available/event.ini</code><br />
$&nbsp;<code>echo "extension=eio.so" > /etc/php5/mods-available/eio.ini</code></p>
<p>Создаем ссылки
$&nbsp;<code>ln -s /etc/php5/mods-available/event.ini /etc/php5/cli/conf.d/event.ini</code><br />
$&nbsp;<code>ln -s /etc/php5/mods-available/eio.ini /etc/php5/cli/conf.d/eio.ini</code></p>
<p><code>Ctrl + D</code> - выходим из sudo</p>
<p>Подготовим директорию для установки PHPDaemon.<br />
$&nbsp;<code>sudo mkdir /opt/phpdaemon</code>
$&nbsp;<code>sudo chown [your user]:[your group] /opt/phpdaemon</code><br />
$&nbsp;<code>cd /opt/phpdaemon</code></p>
<p>Устанавливаем PHPDaemon.<br />
$&nbsp;<code>cd /opt/phpdaemon</code><br />
$&nbsp;<code>git clone https://github.com/kakserpom/phpdaemon.git ./</code></p>
<p>Создаем конфигурационный файл из примера.<br />
$&nbsp;<code>cp /opt/phpdaemon/conf/phpd.conf.example /opt/phpdaemon/conf/phpd.conf</code></p>
<p>Сделаем ссылку на phpd для удобного управления демоном<br />
$&nbsp;<code>alias phpd='/opt/phpdaemon/bin/phpd'</code></p>
<p>Локальный алиас для sudo<br />
$&nbsp;<code>alias sudo='sudo '</code></p>
<p>Пробуем запустить демон.<br />
$&nbsp;<code>sudo phpd start --verbose-tty=1</code></p>
<p>Опция <code>--verbose-tty=1</code> указывет демону выводить журнал в терминал.</p>
<p>Если вы видите что-то похожее на это:</p>
<pre><code>[PHPD] Loaded config file: '/opt/phpdaemon/conf/phpd.conf'
[PHPD] Loaded config file: 'conf/conf.d/ExampleJabberBot.conf'
[PHPD] Loaded config file: 'conf/conf.d/FastCGI.conf'
[PHPD] Loaded config file: 'conf/conf.d/FlashpolicyServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/HTTPServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/IdentServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/SSL-sample.conf'
[PHPD] Loaded config file: 'conf/conf.d/WebSocketServer.conf'</code></pre>
<p>Поздравляем! PHPDaemon запущен!</p>
<p>Добавим алиасы чтобы они были доступны после перезагрузки
$&nbsp;<code>echo "alias phpd='/opt/phpdaemon/bin/phpd'" >> ~/.bashrc'</code>
$&nbsp;<code>echo "alias sudo='sudo /opt/phpdaemon/bin/phpd'" >> ~/.bashrc'</code></p>
<h3 id="install/gentoo"><div class="in anchor">Gentoo<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Вы можете установить PHPDaemon с помощью <a href="https://github.com/lexa-uw/layman-phpdaemon">layman overlay</a>.</p>
<p>Добавьте ссылку в секцию overlays в файле layman.cfg:<br />
<code>https://github.com/lexa-uw/layman-phpdaemon/blob/master/layman.xml</code></p>
<p>В итоге будет выглядеть примерно так:</p>
<pre><code>overlays  : http://www.gentoo.org/proj/en/overlays/repositories.xml
            https://github.com/lexa-uw/layman-phpdaemon/blob/master/layman.xml</code></pre>
<p>Выполняем команды<br />
$&nbsp;<code>sudo layman -L</code><br />
$&nbsp;<code>sudo layman -a phpdaemon</code><br />
$&nbsp;<code>sudo emerge www-servers/phpdaemon</code></p>
<p>К примеру, нижеследующие команды устанавливают phpdaemon версии 0.4.1, 1.0_beta2 и еженедельный релиз.</p>
<pre><code>$ sudo emerge "=www-servers/phpdaemon-0.4.1" "=www-servers/phpdaemon-1.0_beta2" "www-servers/phpdaemon"
Это пакеты, которые будут объединены по порядку:

Расчёт зависимостей... готово!
[ebuild   R   ~] www-servers/phpdaemon-0.4.1:0.4::phpdaemon  USE="libevent -examples -runkit" 0 kB
[ebuild   R   ~] www-servers/phpdaemon-1.0_beta2:1.0::phpdaemon  USE="eio event -runkit" 0 kB
[ebuild   R   ~] www-servers/phpdaemon-20130907:weekly::phpdaemon  USE="eio event -runkit" 0 kB
...</code></pre>
<p>После установки вы можете использовать "eselect phpdaemon set"  для создания символической ссылки на /usr/bin/phpd</p>
<pre><code>$ sudo eselect phpdaemon list
Available phpdaemon targets:
  [1]   phpd0.4
  [2]   phpd1.0
  [3]   phpdweekly
$ sudo eselect phpdaemon set 3
$ sudo eselect phpdaemon show
Current phpdaemon:
  weekly</code></pre>
<p>Добавить phpdaemon в автозагрузку:</p>
<pre><code>$ rc-update add phpd default
 * service phpd added to runlevel default</code></pre>
<p>Добавить отдельные init.d скрипты для разных версий:</p>
<pre><code>$ ln -s /etc/init.d/phpd /etc/init.d/phpd-0.4
$ ln -s /etc/init.d/phpd /etc/init.d/phpd-1.0
$ ln -s /etc/init.d/phpd /etc/init.d/phpd-weekly</code></pre>
<p>Добавить phpd-1.0 в автозагрузку:</p>
<pre><code>$ rc-update add phpd-1.0 default
 * service phpd added to runlevel default</code></pre>
<h2 id="basics"><div class="in anchor">Основы</div>

</h2>
<p>PHPDaemon представляет из&#160;себя один мастер-процесс с&#160;несколькими рабочими процессами.</p>
<p>Приложение, в&#160;зависимости от&#160;нагрузки, инициализируется в&#160;одном или нескольких рабочих процессах.
Во&#160;втором случае запрос будет передан одному свободному рабочему процессу.</p>
<p>Механизма взаимодействия между ребочими процессами не&#160;предусмотрено, поэтому для синхронизации приложений в&#160;разных процессах вы&#160;можете использовать стороннее&#160;ПО, например Redis.
Также есть возможность задать опцию приложения <code>limit-instances N;</code>, чтобы ограничить кол-во копий приложения во&#160;всех рабочих процессах.</p>
<p>Исполняющий файл находится в дирктории <code>./bin/phpd</code>.
Вы можете создать свой исполняющий файл, как показано в примере <code>./bin/sampleapp</code>.
Перед запуском демон проверяет переменную <code>$configFile</code>, используя её для загрузки конфигурации.</p>
<h3 id="basics/pseudotypes"><div class="in anchor">Псевдотипы<span class="header-path"> <i>&larr;</i> <a href="#basics">Основы</a></span></div>

</h3>
<h4 id="basics/pseudotypes/url"><div class="in anchor">url<span class="header-path"> <i>&larr;</i> <a href="#basics/pseudotypes">Псевдотипы</a> <i>&larr;</i> <a href="#basics">Основы</a></span></div>

</h4>
<p>Псевдотип url @TODO</p>
<h2 id="control"><div class="in anchor">Управление</div>

</h2>
<table class="invis">
  <tr>
    <td class="nowrap">$ <code>phpd start</code></td>
    <td>Запуск демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd stop</code></td>
    <td>Остановка демона<br><code>SYSCTL: SIGTERM, SIGQUIT</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd hardstop</code></td>
    <td>Принудительная остановка демона<br><code>SYSCTL: SIGINT, SIGKILL</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd update</code></td>
    <td>Обновление конфигурации<br><code>SYSCTL: SIGHUP</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd reload</code></td>
    <td>Плавный перезапуск всех рабочих процессов<br><code>SYSCTL: SIGUSR2</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd reopenlog</code></td>
    <td>Переоткрытие журналов<br><code>SYSCTL: SIGUSR1</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd restart</code></td>
    <td>Плавный перезапуск демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd hardrestart</code></td>
    <td>Принудительный перезапуск демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd status</code></td>
    <td>Вывод статуса демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd fullstatus</code></td>
    <td>Вывод подробной информации работы демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd configtest</code></td>
    <td>Вывод глобальных опций. В скобках будет указано значение по-умочанию.</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd log [-n K]</code></td>
    <td>Вывод журнала в реальном времени с помощью команды <code>tail -f</code>. C параметром <code>-n K</code> выводится K последних строк. Или используйте <code>-n +K</code> для вывода строк, начиная с K.</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd runworker</code></td>
    <td>Запуск рабочего процесса без мастер-процесса. Используется для отладки.</td>
  </tr>
</table>
<h2 id="examples"><div class="in anchor">Примеры</div>

</h2>
<p>Примеры</p>
<h2 id="app_resolver"><div class="in anchor">Маршрутизация</div>

</h2>
<p>Получая запросы демон первым делом должен определить какому приложению он&#160;должен передать обработку.
Для этого служит метод <code>getRequestRoute</code> в&#160;классе <code>AppResolver</code> [<a href="https://github.com/kakserpom/phpdaemon/blob/master/PHPDaemon/Core/AppResolver.php#L159">GitHub</a>].</p>
<p>Вы&#160;можете определить свой обработчик, пример которого лежит в <code>./conf/AppResolver.php</code> [<a href="https://github.com/kakserpom/phpdaemon/blob/master/conf/AppResolver.php">GitHub</a>].</p>
<p>Метод <code>getRequestRoute</code> принимает два параметра:</p>
<ul>
<li><code>$req</code> &#8212; объект <code>stdClass</code>, с&#160;параметрами запроса;</li>
<li><code>$upstream</code> &#8212; объект сервера, принимающий входящие запросы, например <code>PHPDaemon\Servers\HTTP\Connection</code>.</li>
</ul>
<p>Результатом работы может быть:</p>
<ul>
<li>Имя приложения;</li>
<li><code>null</code> для попытки передать запрос приложению по-умолчанию;</li>
<li><code>false</code> для завершения обработки запроса.</li>
</ul>
<p>Не&#160;забудьте указать&#160;в <a href="#osnovnyie-puti">конфиге</a> путь до&#160;вашего AppResolver, например <code>path './conf/AppResolver.php';</code>.</p>
<p>В&#160;настройках <a href="#serveryi">сервера</a>, принимающего запросы, с&#160;помощью опции <code>responder</code> можно указать имя приложения по-умолчанию, которому будет передан запрос, если <code>getRequestRoute</code> вернул <code>null</code>.</p>
<h2 id="config"><div class="in anchor">Конфигурация</div>

</h2>
<h3 id="config/types"><div class="in anchor">Типы данных<span class="header-path"> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h3>
<p>Большинство опций phpdaemon описывается своими типами данных, позволяющие указывать значения расширенным форматом.</p>
<h4 id="config/types/size"><div class="in anchor">Size<span class="header-path"> <i>&larr;</i> <a href="#config/types">Типы данных</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Предназначен для записи объема информации. Можно записать в виде целого числа или целого числа с постфиксом.</p>
<p>Формат записи: <code>integer [bBkKmMgG]?</code></p>
<p>|| <strong>Постфикс</strong> || <strong>Множитель</strong> || <strong>Пример</strong> || <strong>Значение</strong> ||
|| b, B || 1 || 1b || 1 ||
|| k || 1000 || 1k || 1000 ||
|| K || 1024 || 1K || 1024 ||
|| m || 1000 <em> 1000 || 1m || 1000000 ||
|| M || 1024 </em> 1024 || 1M || 1048576 ||
|| g || 1000 <em> 1000 </em> 1000 || 1g || 1000000000 ||
|| G || 1024 <em> 1024 </em> 1024 || 1G || 1073741824 ||</p>
<!--
Примеры:
|| **Пример** || **Значение** ||
|| 1 || 1 ||
|| 1b || 1 ||
|| 1m || 1000000 ||
|| 1M || 1048576 ||
-->
<h4 id="config/types/time"><div class="in anchor">Time<span class="header-path"> <i>&larr;</i> <a href="#config/types">Типы данных</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Предназначен для записи количества секунд. Число может быть с плавающей точкой с использованием только символа <code>"."</code>.</p>
<p>Формат записи: <code>float [smhd]?</code> или <code>(float [smhd])+</code></p>
<p>|| <strong>Постфикс</strong> || <strong>Множитель</strong> || <strong>Пример</strong> || <strong>Значение</strong> ||
|| s || 1 || 1s || 1 ||
|| m || 60 || 1m || 60 ||
|| h || 60 <em> 60 || 2h 12s || 7212 ||
|| d || 60 </em> 60 * 24 || 1d 15m 32s || 87332 ||</p>
<!--
Примеры:
|| **Пример** || **Значение** ||
|| 1 || 1 ||
|| 1s || 1 ||
|| 1d || 86400 ||
|| 1d 15m 32s || 87332 ||
-->
<h4 id="config/types/number"><div class="in anchor">Number<span class="header-path"> <i>&larr;</i> <a href="#config/types">Типы данных</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Предназначен для записи чисел.</p>
<p>Формат записи: <code>integer [kKmMgG]?</code></p>
<p>|| <strong>Постфикс</strong> || <strong>Множитель</strong> || <strong>Пример</strong> || <strong>Значение</strong> ||
|| k, K || 1000 || 1k || 1000 ||
|| m, M || 1000 <em> 1000 || 1M || 1000000 ||
|| g, G || 1000 </em> 1000 * 1000 || 1g || 1000000000 ||</p>
<!--
Примеры:
|| **Пример** || **Значение** ||
|| 1 || 1 ||
|| 1K || 1000 ||
-->
<h3 id="config/variables"><div class="in anchor">Глобальные опции<span class="header-path"> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h3>
<p>Два способа установки опций:</p>
<ol>
<li>Конфигурационный файл <code>./conf/phpd.conf</code>;</li>
<li>Параметры командной строки, например <code>--max-workers=1</code>.</li>
</ol>
<blockquote>
<p>Параметры командной строки имеют больший приоритет.</p>
</blockquote>
<h4 id="config/variables/file"><div class="in anchor">Конфигурационный файл<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Формат записи опций следующий:<br />
<code>название-опции;</code> или <code>название-опции значение;</code></p>
<p><code>название-опции</code> не чувствительно к регистру и использованию знака дефиса&nbsp;<code>"-"</code>.
Следующие варианты написания равнозначны:</p>
<ul>
<li><code>add-include-path</code>;</li>
<li><code>addincludepath</code>;</li>
<li><code>addIncludePath</code>;</li>
<li><code>ADDInclude-path</code>.</li>
</ul>
<p>Значение может отсутствовать, что приравнивется к <code>bool(true)</code>, либо может быть записано следующими способами:</p>
<ul>
<li><code>null</code>;</li>
<li>булевым выражением <code>false</code> или <code>true</code>;</li>
<li>целым числом;</li>
<li>числом с плавающей точкой;</li>
<li>строкой; если в строке присутствует символ пробела&nbsp;<code>" "</code> или запятая&nbsp;<code>","</code>, то строку необходимо обернуть одинарными или двойными кавычками;</li>
<li>массивом.</li>
</ul>
<p>Для записи массива используется разделитель пробел&nbsp;<code>" "</code> или запятая&nbsp;<code>","</code>. В одном значении можно использовать оба разделителя одновременно.</p>
<p>|| <strong>Пример опции</strong> || <strong>Вывод var_dump</strong> ||
|| var-name; || bool(true) ||
|| var-name null; || NULL ||
|| var-name true; || bool(true) ||
|| var-name false; || bool(false) ||
|| var-name 0; || int(0) ||
|| var-name 1; || int(1) ||
|| var-name 3.14; || float(3.14) ||
|| var-name "3.14"; || string(4) "3.14" ||
|| var-name "пример. длинной строки,второй пример"; || string(67) "пример. длинной строки,второй пример" ||
|| var-name пример. длинной строки,второй пример; || array(5) {<br>&nbsp;&nbsp;&nbsp;&nbsp;[0]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(13) "пример."<br>&nbsp;&nbsp;&nbsp;&nbsp;[1]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(14) "длинной"<br>&nbsp;&nbsp;&nbsp;&nbsp;[2]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(12) "строки"<br>&nbsp;&nbsp;&nbsp;&nbsp;[3]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(12) "второй"<br>&nbsp;&nbsp;&nbsp;&nbsp;[4]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(12) "пример"<br>} ||
|| var-name 1, 'a' null 3.14 'пару слов'; || array(5) {<br>&nbsp;&nbsp;&nbsp;&nbsp;[0]=><br>&nbsp;&nbsp;&nbsp;&nbsp;int(1)<br>&nbsp;&nbsp;&nbsp;&nbsp;[1]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(1) "a"<br>&nbsp;&nbsp;&nbsp;&nbsp;[2]=><br>&nbsp;&nbsp;&nbsp;&nbsp;NULL<br>&nbsp;&nbsp;&nbsp;&nbsp;[3]=><br>&nbsp;&nbsp;&nbsp;&nbsp;float(3.14)<br>&nbsp;&nbsp;&nbsp;&nbsp;[4]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(17) "пару слов"<br>} ||</p>
<p>Ниже будут перечислены глобальные опции демона в формате:<br />
<code>название-опции (тип-данных = значение-по-умолчанию);</code></p>
<h4 id="config/variables/graceful_restart"><div class="in anchor">Плавный перезапуск рабочих процессов<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>max-requests (<a href="#config/types/number">Number</a> = '10k')</code><br />
Максимальное количество запросов перед перезапуском рабочего процесса.
<code>0</code> – неограничено.</p>
</li>
<li>
<p><code>max-memory-usage (<a href="#config/types/size">Size</a> = '0b')</code><br />
Максимальный допустимый порог потребления памяти рабочим процессом.
<code>0</code> – неограничено.</p>
</li>
<li>
<p><code>max-idle (<a href="#config/types/time">Time</a> = '0s')</code><br />
Максимальное время простоя рабочего процесса перед перезапуском.
<code>0</code> – неограничено.</p>
</li>
<li>
<p><code>auto-reload (<a href="#config/types/time">Time</a> = '0s')</code><br />
Задает интервал проверки всех подключенных файлов. При изменении файлов плавно перезагружает рабочие процессы.</p>
</li>
<li><code>auto-reimport (boolean = false)</code><br />
На лету импортирует методы и функции из измененных файлов с помощью runkit, без перезагрузки рабочего процесса.</li>
</ul>
<h4 id="config/variables/pathes"><div class="in anchor">Основные пути<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>pid-file (string = '/var/run/phpd.pid')</code><br />
Путь к pid-файлу. Убедитесь что имеется доступ на запись.</p>
</li>
<li>
<p><code>config-file (string = '/etc/phpdaemon/phpd.conf;/etc/phpd/phpd.conf;./conf/phpd.conf')</code><br />
Путь к файлу конфигурации. Можно указать несколько через разделитель <code>";"</code>.<br />
Будет загружен только первый найденный конфигурационный файл.</p>
</li>
<li>
<p><code>path (string = '/etc/phpdaemon/AppResolver.php;./conf/AppResolver.php')</code><br />
Путь к Application Resolver. Можно указать несколько через разделитель <code>";"</code>.<br />
Будет загружен только первый найденный файл.</p>
</li>
<li><code>add-include-path (string = null)</code><br />
Дополнительные пути для директивы <a href="http://www.php.net/manual/ru/ini.core.php#ini.include-path">include_path</a>.<br />
Можно указать несколько через разделитель <code>":"</code>.</li>
</ul>
<h4 id="config/variables/master"><div class="in anchor">Связанные с мастер-процессом<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>mpm-delay (<a href="#config/types/time">Time</a> = '0.1s')</code><br />
Интервал между срабатываниями Мульти-Процессного Менеджера.<br />
МПМ отвечает за запуск/выключение рабочих процессов, согласно настройкам.</p>
</li>
<li>
<p><code>start-workers (<a href="#config/types/number">Number</a> = 4)</code><br />
Кол-во рабочих процессов при запуске демона.</p>
</li>
<li>
<p><code>min-workers (<a href="#config/types/number">Number</a> = 4)</code><br />
Минимальное допустимое кол-во рабочих процессов.</p>
</li>
<li>
<p><code>max-workers (<a href="#config/types/number">Number</a> = 8)</code><br />
Максимальное допустимое кол-во рабочих процессов.</p>
</li>
<li>
<p><code>min-spare-workers (<a href="#config/types/number">Number</a> = 2)</code><br />
Минимальное количество простаивающих рабочих процессов: phpDaemon запустит дополнительный рабочие процессы когда нагрузка увеличится, чтобы простаивающих рабочих процессов было достаточно. Сверху ограничивается параметром max-workers.</p>
</li>
<li>
<p><code>max-spare-workers (<a href="#config/types/number">Number</a> = 0)</code><br />
Максимальное кол-во простаивающих рабочих процессов. phpDaemon выключит дополнительные рабочие процессы когда нагрузка спадёт.</p>
</li>
<li>
<p><code>master-priorty (<a href="#config/types/number">Number</a> = 100)</code><br />
Приоритет мастер-процесса. Чем меньше значение, тем выше приоритет.</p>
</li>
<li>
<p><code>ipc-thread-priority (<a href="#config/types/number">Number</a> = 100)</code><br />
Приоритет IPC процесса. Чем меньше значение, тем выше приоритет.</p>
</li>
<li>
<p><code>worker-priority (<a href="#config/types/number">Number</a> = 4)</code><br />
Приоритет рабочего процесса. Чем меньше значение, тем выше приоритет.</p>
</li>
<li><code>throw-exception-on-shutdown (boolean = false)</code><br />
Выбрасывать исключение <code>Exception('event shutdown')</code> по завершению процесса.</li>
</ul>
<h4 id="config/variables/requests"><div class="in anchor">Запросы<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>locale (string = '')</code><br />
Устанавливает настройки локали. Можно указать несколько через разделитель <code>","</code>.</p>
</li>
<li><code>ob-filter-auto (boolean = true)</code><br />
Включить стандартный <code>ob_</code> фильтр.</li>
</ul>
<h4 id="config/variables/workers"><div class="in anchor">Рабочие процессы<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>chroot (string = '/')</code><br />
Смена системного корня для рабочих процессов.</p>
</li>
<li>
<p><code>cwd (string = '.')</code><br />
Задание рабочей директории для рабочих процессов.</p>
</li>
<li>
<p><code>user (string = null)</code><br />
Пользователь для рабочих процессов. Используйте безопасного пользователя, не используйте root, если не знаете что делаете.</p>
</li>
<li>
<p><code>group (string = null)</code><br />
Группа для рабочих процессов. Используйте безопасную группу, не используйте root, если не знаете что делаете.</p>
</li>
<li><code>auto-gc (<a href="#config/types/number">Number</a> = '1k')</code><br />
Включает сборщик мусора вызываемый каждые n запросов. <code>0</code> – выключает совсем.</li>
</ul>
<h4 id="config/variables/logging"><div class="in anchor">Журналирование и отладка<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>logging (boolean = true)</code><br />
Включает журналирование.</p>
</li>
<li>
<p><code>log-storage (string = '/var/log/phpdaemon.log')</code><br />
Путь к файлу журнала.</p>
</li>
<li>
<p><code>log-errors (boolean = true)</code><br />
Включает журналирование локальных ошибок таких как Undefined route in WebSocketServer, и т.д.</p>
</li>
<li>
<p><code>log-worker-set-state (boolean = false)</code><br />
Включает журналирование смены состояния рабочего процесса.</p>
</li>
<li>
<p><code>log-events (boolean = false)</code><br />
Включает журналирование сетевых событий.</p>
</li>
<li>
<p><code>log-signals (boolean = false)</code><br />
Включает журналирование системных сигналов.</p>
</li>
<li>
<p><code>verbose-tty (boolean = false)</code><br />
Если параметр включен, журнал будет выводиться в терминал (STDOUT).</p>
<blockquote>
<p>Учтите, что в обычном варианте запуска (не runworker) ввод из терминала игнорируется, хотя после запуска с этим параметром может показаться, что программа привязана к терминалу.</p>
</blockquote>
</li>
<li><code>restrict-error-control (boolean = false)</code><br />
Выключает оператор управления ошибками <code>"@"</code>.</li>
</ul>
<h4 id="config/variables/eio"><div class="in anchor">Подсистема ввода-вывода POSIX<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>eio-enabled (boolean = true)</code><br />
Включает поддержку EIO.</p>
</li>
<li>
<p><code>eio-set-max-idle (<a href="#config/types/time">Time</a> = null)</code><br />
Устанавливает максимальное количество ожидающих потоков.</p>
</li>
<li>
<p><code>eio-set-min-parallel (<a href="#config/types/number">Number</a> = null)</code><br />
Устанавливает минимальное количество параллельных потоков.</p>
</li>
<li>
<p><code>eio-set-max-parallel (<a href="#config/types/number">Number</a> = null)</code><br />
Устанавливает максимальное количество параллельных потоков.</p>
</li>
<li>
<p><code>eio-set-max-poll-reqs (<a href="#config/types/number">Number</a> = null)</code><br />
Устанавливает максимальное количество обрабатываемых запросов.</p>
</li>
<li><code>eio-set-max-poll-time (<a href="#config/types/time">Time</a> = null)</code><br />
Устанавливает максимальное время выполнения.</li>
</ul>
<h3 id="config/application"><div class="in anchor">Приложения<span class="header-path"> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h3>
<ul>
<li>
<p><code>enable (boolean = true)</code>
Разрешает демону инициализацию приложения. По-умочанию, описанное в конфигурационном файле приложение, всегда включено.</p>
</li>
<li><code>limit-instances (integer = null)</code>
Ограничивает кол-во инициализированных приложений во всех рабочих процессах. По-умолчанию ограничения нет.</li>
</ul>
<h2 id="development"><div class="in anchor">Разработка</div>

</h2>
<h3 id="development/pseudotypes"><div class="in anchor">Псевдотипы<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h4 id="development/pseudotypes/url"><div class="in anchor">url<span class="header-path"> <i>&larr;</i> <a href="#development/pseudotypes">Псевдотипы</a> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h4>
<p>Псевдотип url @TODO</p>
<h3 id="development/app_instance"><div class="in anchor">Приложение<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<p>Приложением в phpDaemon является наследник класса AppInstance, для того чтобы создать новое приложение, необходимо создать файл applications/[имя].php и объявить в нем class Example extends AppInstance. Затем, ядро будет вызывать методы в ответ на которые приложение должно выполнять необходимые операции:</p>
<ul>
<li>init() - инициализации приложения. Приложению необходимо сохранить необходимые зависимости и подготовиться к запуску.</li>
<li>onReady() - означает что рабочий процесс, в котором запущено приложение, готов к обработке.</li>
<li>onShutdown() - завершение приложения.</li>
<li>beginRequest(Request $req, AppInstance $upstream) - запрашивается объект нового запроса к приложению. Метод может вернуть false, это значит что приложение отказывается (или не умеет) обрабатывать запросы. После вызова этого метода, объект запроса попадает в очередь и вызывается итеративно.</li>
</ul>
<p>Класс декларируется как class ExampleRequest extends Request.
Методы:</p>
<ul>
<li>init() - вызывается единожды при создании объекта запроса.</li>
<li>run() - вызывается диспетчером очереди до тер пор, пока не будет возращен код 1 или не будет вызван метод terminate().</li>
<li>terminate() - его не следует перезагружать. Метод прерывает и завершает выполнение запроса.</li>
<li>sleep($seconds) - время в секундах, через которое необходимо вернуться к запросу.</li>
<li>wakeup() - прервать sleep.</li>
<li>onAbort() - событие сброса запроса, вызывается в случае если клиент отвалился.</li>
<li>header($header) - установить заголовок HTTP-ответа.</li>
<li>out($str) - записать строку в поток вывода.</li>
<li>combinedOut($str) - записать строку в поток вывода, содержащую и заголовки и тело.</li>
<li>stdin($str) - обработчик потока ввода запроса.</li>
<li>finish($status) - 0 - normal, -1 - abort, -2 - termination</li>
<li>chunked() - устанавливает Transfer-Encoding: chunked.</li>
</ul>
<h3 id="development/request"><div class="in anchor">Обработка запросов<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h3 id="development/servers_clients"><div class="in anchor">Серверы и клиенты<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h3 id="development/debugging"><div class="in anchor">Отладка<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h2 id="servers"><div class="in anchor">Серверы</div>

</h2>
<p>Серверы предназначены для приема запросов и передачи их приложениям.</p>
<p>Каждый сервер представляет собой класс наследуемый от <a target="_self" class="tpl-inlink" href="#network/server">Сеть\Сервер<i class="fa fa-caret-square-o-up"></i></a>, который в свой очередь наследуется от <a target="_self" class="tpl-inlink" href="#network/pool">Сеть\Пул<i class="fa fa-caret-square-o-up"></i></a>. 
Сервер можно инициировать прямо в пользовательском приложении,  например:</p>
<pre><code class="php">/* ... */
$this->pool = \PHPDaemon\Servers\FlashPolicy::getInstance([
    'listen' => 'tcp://0.0.0.0:843'
]);
$this->pool->onReady();
/* ... */</code></pre>
<p>Но не забывайте, что в таком случае следует отправлять ему onReady(), onShutdown() и onConfigUpdated() события.</p>
<p>В большинстве случаев сервер запускается одноименнным приложением Pool.</p>
<pre><code class="ruby"># контекст для ssl соединения (опционально)
TransportContext:myContext {
    ssl;
    certFile "/path/to/cert.pem";
    pkFile "/path/to/privkey.pem";
    passphrase "";
    verifyPeer true;
    allowSelfSigned true;
}

# слушаем 80 и 443 порт
Pool:HTTPServer {
    listen "tcp://0.0.0.0:80", "tcp://0.0.0.0:443##myContext";
    port 80;
    privileged;
    maxconcurrency 1;
}</code></pre>
<h3 id="servers/options"><div class="in anchor">Опции серверов<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>В данном разделе перечислены опции, используемые всеми серверами.</p>
<ul>
<li>
<p><code>listen (string|array)</code><br />
Прослушиваемые сервером адреса. Можно указать несколько через разделитель&nbsp;<code>","</code>.</p>
</li>
<li>
<p><code>privileged</code><br />
@TODO</p>
</li>
<li>
<p><code>max-concurrency</code><br />
Максимальное количество открытых соединений.</p>
</li>
<li>
<p><code>max-allowed-packet</code><br />
Максимальный допустимый размер пакета.</p>
</li>
<li>
<p><code>connection-class</code><br />
Класс соединения по-умолчанию.</p>
</li>
<li>
<p><code>name</code><br />
@TODO</p>
</li>
<li>
<p><code>allowed-clients</code><br />
Разрешенные IP-адреса или маски через запятую.</p>
</li>
<li>
<p><code>ssl</code><br />
Включает ssl.</p>
</li>
<li>
<p><code>ssl-port</code><br />
@TODO</p>
</li>
<li>
<p><code>cert-file</code><br />
@TODO</p>
</li>
<li>
<p><code>pk-file</code><br />
@TODO</p>
</li>
<li>
<p><code>passphrase</code><br />
@TODO</p>
</li>
<li>
<p><code>verify-peer</code><br />
@TODO</p>
</li>
<li>
<p><code>allow-self-signed</code><br />
@TODO</p>
</li>
<li>
<p><code>verify-depth</code><br />
@TODO</p>
</li>
<li><code>ca-file</code><br />
@TODO</li>
</ul>
<h3 id="servers/http"><div class="in anchor">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/HTTP"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Сервер использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Это транспортное приложение предоставляет HTTP сервер для phpDaemon. Входящие Websocket соединения будут переданы приложению WebsocketServer.</p>
<p>HTTP пробует определить приложение через AppResolver, не забудьте сконфигурировать его.</p>
<h4 id="servers/http/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = 'tcp://0.0.0.0')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 80)</code><br />
Прослушиваемый порт</p>
</li>
<li>
<p><code>allowed-clients (string = '127.0.0.1')</code><br />
IP адреса (через запятую) которым позволено делать запросы. CIDR-маски поддерживаются</p>
</li>
<li>
<p><code>send-file (boolean = false)</code><br />
Оптимизирует обработку запросов, предварительно записывая их в файл.
Опция будет игнорироваться если передан параметр <code>server['DONT_USE_SENDFILE']</code></p>
</li>
<li>
<p><code>send-file-dir (string = '/dev/shm')</code><br />
Директория для sendfile</p>
</li>
<li>
<p><code>send-file-prefix (string = 'http-')</code><br />
Префикс для sendfile файлов</p>
</li>
<li>
<p><code>send-file-onlybycommand (boolean = false)</code><br />
Включать sendfile если передан <code>server['USE_SENDFILE']</code></p>
</li>
<li>
<p><code>expose (boolean = true)</code><br />
Включать версию PHPDaemon в заголовке <code>X-Powered-By</code></p>
</li>
<li>
<p><code>keepalive (<a href="#config/types/time">Time</a> = '0s')</code><br />
Таймаут бездействия перед закрытием keep-alive соединения</p>
</li>
<li>
<p><code>chunksize (<a href="#config/types/size">Size</a> = '8k')</code><br />
Размер куска</p>
</li>
<li>
<p><code>defaultcharset (string = 'utf-8')</code><br />
Кодировка по-умолчанию</p>
</li>
<li>
<p><code>wss-name (string = '')</code><br />
Имя пула WebSocket-сервера, куда направлять WebSocket-соединения</p>
</li>
<li>
<p><code>fps-name (string = '')</code><br />
Имя пула FlashPolicy-сервера, куда адресовать FlashPolicy-соединения</p>
</li>
<li>
<p><code>upload-max-size (<a href="#config/types/size">Size</a> = ini_get('upload_max_filesize'))</code><br />
Максимальный размер загружаемого файла</p>
</li>
<li><code>responder (string = null)</code><br />
Имя приложения по-умолчанию для обработки запросов с данного сервера</li>
</ul>
<h3 id="servers/fastcgi"><div class="in anchor">FastCGI <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FastCGI"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Сервер использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Это транспортное приложение представляет FastCGI сервер для phpDaemon.</p>
<p>После конфигурирования phpDaemon вам также следует задействовать веб-сервер, который поддерживает FastCGI. Если вы еще не сделали выбор в пользу одного из них, мы советуем <a target="_blank" class="tpl-outlink" href="http://nginx.org">NGINX<i class="fa fa-external-link"></i></a>.</p>
<p>Веб-сервер может передавать FastCGI-серверу параметр APPNAME, который содержит название приложения которое должно обработать данный запрос. Если параметр не передан, FastCGI-сервер попробует определить это через AppResolver.</p>
<p>Пример конфигурации NGINX:</p>
<pre><code class="nginx">location /Example/ {
    fastcgi_pass unix:/tmp/phpdaemon.fcgi.sock;
    fastcgi_param APPNAME Example;
    include fastcgi_params;
}</code></pre>
<h4 id="servers/fastcgi/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/fastcgi">FastCGI <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FastCGI"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = 'tcp://127.0.0.1,unix:///tmp/phpdaemon.fcgi.sock')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 80)</code><br />
Прослушиваемый порт</p>
</li>
<li>
<p><code>auto-read-body-file (boolean = true)</code><br />
Автоматически реагирует на FastCGI параметр REQUEST_BODY_FILE и читает тело запроса из файла, созданного веб-сервером</p>
</li>
<li>
<p><code>allowed-clients (string = '127.0.0.1')</code><br />
IP адреса (через запятую) которым позволено делать запросы. CIDR-маски поддерживаются</p>
</li>
<li>
<p><code>send-file (boolean = false)</code><br />
Оптимизирует обработку запросов, предварительно записывая их в файл.
Опция будет игнорироваться если передан параметр <code>server['DONT_USE_SENDFILE']</code></p>
</li>
<li>
<p><code>send-file-dir (string = '/dev/shm')</code><br />
Директория для sendfile</p>
</li>
<li>
<p><code>send-file-prefix (string = 'fcgi-')</code><br />
Префикс для sendfile файлов</p>
</li>
<li>
<p><code>send-file-onlybycommand (boolean = false)</code><br />
Включать sendfile если передан <code>server['USE_SENDFILE']</code></p>
</li>
<li>
<p><code>expose (boolean = true)</code><br />
Включать версию PHPDaemon в заголовке <code>X-Powered-By</code></p>
</li>
<li>
<p><code>keepalive (<a href="#config/types/time">Time</a> = '0s')</code><br />
Таймаут бездействия перед закрытием keep-alive соединения</p>
<blockquote>
<p>Если вы используете значение отличное от 0, учтите что nginx и некоторые другие веб-сервера НЕ ПОДДЕРЖИВАЮТ keep-alive соединения с FastCGI-бекэндами.</p>
</blockquote>
</li>
<li>
<p><code>chunksize (<a href="#config/types/size">Size</a> = '8k')</code><br />
Размер куска</p>
</li>
<li>
<p><code>defaultcharset (string = 'utf-8')</code><br />
Кодировка по-умолчанию</p>
</li>
<li>
<p><code>wss-name (string = '')</code><br />
Имя пула WebSocket-сервера, куда направлять WebSocket-соединения</p>
</li>
<li>
<p><code>fps-name (string = '')</code><br />
Имя пула FlashPolicy-сервера, куда адресовать FlashPolicy-соединения</p>
</li>
<li>
<p><code>upload-max-size (<a href="#config/types/size">Size</a> = ini_get('upload_max_filesize'))</code><br />
Максимальный размер загружаемого файла</p>
</li>
<li><code>responder (string = null)</code><br />
Имя приложения по-умолчанию для обработки запросов с данного сервера</li>
</ul>
<h3 id="servers/debugconsole"><div class="in anchor">DebugConsole <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/DebugConsole"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Это транспортное приложение предоставляет интерактивную отладочную консоль для phpDaemon.</p>
<pre><code class=""># telnet 127.0.0.1 8818
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
Welcome! DebugConsole for phpDaemon.

login secret
OK.
eval echo 123;
123</code></pre>
<h4 id="servers/debugconsole/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/debugconsole">DebugConsole <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/DebugConsole"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = 'tcp://127.0.0.1')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 8818)</code><br />
Прослушиваемый порт</p>
</li>
<li><code>passphrase (string = 'secret')</code><br />
Пароль для аутентификации</li>
</ul>
<h3 id="servers/flashpolicy"><div class="in anchor">FlashPolicy <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FlashPolicy"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Это простое приложение предоставляет Flashpolicy сервер для phpDaemon.</p>
<p>Это приложение необходимо включить в случае если вы хотите присоединяться к серверу посредством Flash.</p>
<h4 id="servers/flashpolicy/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/flashpolicy">FlashPolicy <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FlashPolicy"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = '0.0.0.0')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 843)</code><br />
Прослушиваемый порт</p>
</li>
<li><code>file (string = getcwd() . '/conf/crossdomain.xml')</code><br />
Файл Flash-политики</li>
</ul>
<h3 id="servers/ident"><div class="in anchor">Servers\Ident<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<h3 id="servers/ircbouncer"><div class="in anchor">Servers\IRCBouncer<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<h3 id="servers/lock"><div class="in anchor">Lock <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/Lock"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Требует рефакторинга</p>
<h3 id="servers/socks"><div class="in anchor">Servers\Socks<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<h3 id="servers/websocket"><div class="in anchor">WebSocket <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/WebSocket"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Сервер использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Это транспортное приложение представляет WebSocket сервер для phpDaemon.</p>
<p>Ваше приложение должно получать ссылку на экземпляр WebSocketServer и вызывать addRoute() для добавления своих путей. Callback-функция пути должна возвращать новый экземпляр вашего класса, который наследуется от WebSocketRoute и определяет метод onFrame. Внутри метода onFrame мы можете обращаться к $this->client->sendFrame() для отправки пакетов клиенту.</p>
<h4 id="servers/websocket/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/websocket">WebSocket <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/WebSocket"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = '0.0.0.0')</code>
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 8047)</code>
Прослушиваемый порт</p>
</li>
<li>
<p><code>max-allowed-packet (<a href="#config/types/size">Size</a> = new \PHPDaemon\Config\Entry\Size('1M'))</code>
Максимальный размер пакета</p>
</li>
<li>
<p><code>expose (boolean = true)</code>
Включать версию PHPDaemon в заголовке <code>X-Powered-By</code></p>
</li>
<li><code>fps-name (string = '')</code>
Имя пула FlashPolicy-сервера, куда адресовать FlashPolicy-соединения</li>
</ul>
<h2 id="clients"><div class="in anchor">Клиенты</div>

</h2>
<p>В основе всех клиентов лежит пространство имен <a target="_self" class="tpl-inlink" href="#network">Network<i class="fa fa-caret-square-o-up"></i></a>, изучение которого даст большее представление о возможностях клиентов и сетевой работы демона в целом.</p>
<h3 id="clients/basics"><div class="in anchor">Основы<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h4 id="clients/basics/options"><div class="in anchor">Опции клиентов<span class="header-path"> <i>&larr;</i> <a href="#clients/basics">Основы</a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<ul>
<li>
<p><code>server (string)</code>
Адрес сервера. Записывается специальным форматом, описанном в разделе <a target="_self" class="tpl-inlink" href="#clients/basics/option-server">Опция server<i class="fa fa-caret-square-o-up"></i></a></p>
</li>
<li>
<p><code>servers (array)</code>
Адреса серверов, записанные в формате опции <code>server</code>, разделенные символом запятая <code>,</code>.
При подключении клиента будет использоваться рандомно выбранный сервер.
Учтите, данная опция будет игнорироваться если установлена опция <code>server</code>.</p>
</li>
<li><code>maxconnperserv</code></li>
<li><code>protologging</code></li>
</ul>
<h3 id="clients/asterisk"><div class="in anchor">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Clients\Asterisk;</code></pre>
<p class="doc-notice">Раздел устарел!</p>
<p><a target="_blank" class="tpl-outlink" href="http://www.asterisk.org/">Asterisk<i class="fa fa-external-link"></i></a> - это АТС с открытым исходным кодом.
AMI - программный интерфейс (API) Asterisk для управления системой, который позволяет разработчикам отправлять команды на сервер, считывать результаты их выполнения, а так же получать уведомления о происходящих событиях в реальном времени.
Клиент Asterisk обеспечивает высокоуровневый интерфейс к AMI, позволяющий разработчикам контролировать сервер Asterisk из приложений.</p>
<p>В основе документирования клиента лежит материал книги <a target="_blank" class="tpl-outlink" href="http://asterisk.ru/store/files/Asterisk_RU_OReilly_DRAFT.pdf">Asterisk: будущее телефонии<i class="fa fa-external-link"></i></a>.</p>
<h4 id="clients/asterisk/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<p>@TODO это из вики, проверить</p>
<p>Перед тем как посылать команды и получать события с сервера, нужно получить сессию(сессии) соединения(соединений) в вашем приложении. В вашем приложении вы получаете объект AsteriskDriver посредством:</p>
<pre><code class="php">$this->pbxDriver = Daemon::$appResolver->getInstanceByAppName('AsteriskDriver');</code></pre>
<h5 id="clients/asterisk/use/connect"><div class="in anchor">Соединение<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Далее получаете объект AsteriskDriverSession посредством:</p>
<pre><code class="php">$session = $this->pbxDriver->getConnection();
// или
foreach($this->pbxConnections as $addr => $conn) {
    $session = $this->pbxDriver->getConnection($addr);
    // что-нибудь делаем...
}</code></pre>
<p>Добавляете (композиция) в него текущий контекст соединения посредством:</p>
<pre><code class="php">$session->context = $this;</code></pre>
<p>При соединении:</p>
<pre><code class="php">$session->onConnected(function(SocketSession $session, $status) {
    // ваш код, в зависимости от соединения
});</code></pre>
<p>При разрыве:</p>
<pre><code class="php">$session->onFinish(function(SocketSession $session) {
    // возможно запустить интервал реконнекта...
});</code></pre>
<p>Предположим у вас несколько серверов Asterisk с которых вы хотите получать события(events) и на которые вы хотите отправлять команды(actions). Так же вы хотите отслеживать падение соединения(connection failed), и осуществлять реконнект. Смотрите пример реконнекта ниже.</p>
<h5 id="clients/asterisk/use/io"><div class="in anchor">Немного о формате ввода-вывода<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Хотя протокол AMI является строковым, драйвер при вводе-выводе работает с ассоциативными массивами. При получении ответа на действие или события все заголовки и их значения приводятся к нижнему регистру, если значение не содержит информацию, для которой важен регистр - например имя пира.</p>
<h5 id="clients/asterisk/use/cmds"><div class="in anchor">Отправка команд и получение ответа<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Для отправки команды и получения ответа вы можете воспользоваться либо методом-помощником, который снабжен подробным комментарием из документации Asterisk, либо универсальным методом Connection::action.</p>
<p>В любом случае для каждой команды вы определяете функцию обратного вызова, в которую будет передан объект сессии соединения и ассоциативный массив пар заголовок-значение ответа.</p>
<p>Клиент корректно обрабатывает, что порядок следования пакетов ответа не определен, корректно собирает составные пакеты ответа.</p>
<pre><code class="php">$session->getSipPeers(function(SocketSession $session, array $packet) {
    // $session->addr содержит адрес соединения
    // $session->context содержит контекст вызова (если был установлен)
    // $packet - это массив пар заголовок-значение ответа
    // что-нибудь делаем
})
// или
$session->getConfig('chan_dahdi.conf', array($this, 'doSomething'));
public function doSomething(SocketSession $session, array $packet) {

}
// или
$session->action('Ping', function(SocketSession $session, array $packet) {
    if($packet['response'] == 'success' && $packet['ping'] == 'pong') {
        // успешно сыграли в пинг-понг
    }    
});
// или
// $channel содержит канал из события
$session->redirect(array(
    'Channel' => $channel,
    'Context' => 'internal',
    'Exten' => '116',
    'Priority' => 1
), function(SocketSession $session, array $packet) {
  // узнаем успешно или нет из ответа сервера содержащегося в ассоциативном массиве $packet
});</code></pre>
<h5 id="clients/asterisk/use/events"><div class="in anchor">Получение событий сервера<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Функция обратного вызова при наступлении события в данном соединении определяется один раз и передается методу onEvent().</p>
<pre><code class="php">$session->onEvent(array($this, 'onPbxEvent'));</code></pre>
<p>Когда запущено несколько воркеров, чтобы не получилось, что события канала(характеризуются наличием уникального идентификатора(uniqueid) канала) кратны количеству воркеров(workers) можно воспользоваться таблицей блокировки. Вот пример, когда в качестве таблицы блокировки используется MongoDB коллекция(collection), которая позволяет ставить уникальный индекс на документ:</p>
<pre><code class="php">$session->onEvent(array($this, 'onPbxEvent'));
// db.events.ensureIndex({"event": 1, "addr": 1}, {unique: true});
public function onPbxEvent(SocketSession $session, array $event) {
    if(method_exists('Foo_PbxEventDispatcher', "{$event['event']}Handler")) {
        $handler = "{$event['event']}Handler";
        if(isset($event['uniqueid']) || isset($event['uniqueid1'])) {
            $appInstance = $this;
            $this->db->events->insert(
                array(
                        'ts' => microtime(true),
                        'event' => $event,
                        'addr' => $session->addr
                ),
                function($result) use ($appInstance, $session, $event) {
                    if($result['err'] === null) {
                        $handler = "{$event['event']}Handler";
                        Foo_PbxEventDispatcher::$handler($appInstance, $session, $event);
                    }
                }
            );
        }
        else {
            Foo_PbxEventDispatcher::$handler($this, $session, $event);
        }
    }
}</code></pre>
<h4 id="clients/asterisk/example"><div class="in anchor">Пример реконнекта<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">class Foo extends AppInstance {
    // ...
    public function onInit() {
        // pbxConnections - array of connections
        foreach($this->pbxConnections as $addr => $conn) {
            $pbx_driver_session = $this->pbxDriver->getConnection($addr);
            if($pbx_driver_session instanceof SocketSession) {
                $pbx_driver_session->context = $this;
                //$pbx_driver_session->onError(array($this, 'onPbxError'));
                $pbx_driver_session->onConnected(array($this, 'onPbxConnected'));
                $pbx_driver_session->onEvent(array($this, 'onPbxEvent'));
                $pbx_driver_session->onFinish(array($this, 'onPbxFinish'));
            }
            else {
                $this->runPbxReconnectInterval($pbx_driver_session);
            }
        }
    }
    // ...
    public function onPbxConnected(SocketSession $session, $status) {
        if($status) {
            if($session->context instanceof PbxReconnector) {
                $session->context->finish();
            }
            // do something...
        }
        else {
            $this->runPbxReconnectInterval($session);
        }
    }
    // ...
    public function onPbxFinish(SocketSession $session) {
        $this->runPbxReconnectInterval($session);
    }
    // ...
    public function runPbxReconnectInterval(SocketSession $session) {
                if(Daemon::$process->terminated) {
            return;
        }
        foreach ($this->queue as &$r) {
            if($r instanceof PbxReconnector) {
                if ($r->attrs->addr == $session->addr) {
                    return;
                }
            }
        }
        $interval = $this->pushRequest(new PbxReconnector($this, $this));
        $interval->attrs->addr = $session->addr;
    }
    // ...
}
// ...
class PbxReconnector extends Request {
        public $interval = 0.3;

    public function run() {
        $pbx_driver_session = $this->appInstance->pbxDriver->getConnection($this->attrs->addr);
        if($pbx_driver_session) {
            if($this->appInstance->config->{'pbxreconnectorlogging'}->value) {
                Daemon::log('Reconnecting to ' . $this->attrs->addr);
            }
            $pbx_driver_session->context = $this;
            $pbx_driver_session->onConnected(array($this->appInstance, 'onPbxConnected'));
            $pbx_driver_session->onFinish(array($this->appInstance, 'onPbxFinish'));
        }
        $this->sleep($this->interval);
    }
}</code></pre>
<h4 id="clients/asterisk/pool"><div class="in anchor">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\Asterisk;
class Pool extends \PHPDaemon\Network\Client;</code></pre>
<h5 id="clients/asterisk/pool/options"><div class="in anchor">Опции по-умолчанию<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li><code>authtype (string = 'md5')</code></li>
<li><code>port (integer = 5280)</code></li>
</ul>
<h5 id="clients/asterisk/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>#&amp;getConnection  -#%s.method ```php:p.inline
boolean public static <a href="#./getConnection">getConnection</a> ( callable $cb )
boolean public static getConnection ( string $url = null, callable $cb = null, integer $pri = 0 )</p>
<pre><code class="">   -.n Выполняет callback-функцию когда будет установлена связь с сервером. Возвращает `false` если соединение невозможно установить
   -.n.ti `:hc`$cb` — `:phc`callback ( [Connection](#../../connection) $conn, array $packet )` — вызывается когда будет установлена связь с сервером
   -.n `:hc`$url` — адрес сервера
   -.n `:hc`$pri` — приоритет данного вызова среди других. Чем больше значение, тем выше приоритет

 -.method.fake &nbsp;

#### connection # Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Connection.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Clients\Asterisk;
class Connection extends \PHPDaemon\Network\ClientConnection;</code></pre>
<h5 id="clients/asterisk/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>#&amp;getSipPeers  -#%s.method ```php:p.inline
void public <a href="#./getSipPeers">getSipPeers</a> ( callable $cb )</p>
<pre><code class="">   -.n Выводит список сконфигурированных в данный момент равноправных участников SIP с указанием их статуса  
Привилегии: system, all
   -.n.ti `:hc`$cb` — `:phc`callback ( [Connection](#../) $conn, array $packet )` — вызывается когда будет получен результат

#&getIaxPeers  -#%s.method ```php:p.inline
 void public <a href="#./getIaxPeers">getIaxPeers</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Выводит список всех равноправных участников IAX2 с указанием их текущего статуса<br />
Привилегии: none</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
<p>#&amp;getConfig  -#%s.method ```php:p.inline
void public <a href="#./getConfig">getConfig</a> ( string $filename, callable $cb )</p>
<pre><code class="">   -.n Извлекает данные из конфигурационного файла Asterisk  
Привилегии: config, all
   -.n.ti `:hc`$filename` — имя конфигурационного файла, из которого должны извлекаться данные
   -.n `:hc`$cb` — `:phc`callback ( [Connection](#../) $conn, array $packet )` — вызывается когда будет получен результат

#&getConfigJSON  -#%s.method ```php:p.inline
 void public <a href="#./getConfigJSON">getConfigJSON</a> ( string $filename, callable $cb )</code></pre>
<ul>
<li class="n">Возвращает данные из конфигурационного файла Asterisk в JSON формате<br />
Привилегии: config, all</li>
<li class="n ti"><code class="code_highlight php clear">$filename</code> — имя конфигурационного файла, из которого должны извлекаться данные</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
<p>#&amp;setVar  -#%s.method ```php:p.inline
void public <a href="#./setVar">setVar</a> ( string $channel, string $variable, string $value, callable $cb )</p>
<pre><code class="">   -.n Задает значение глобальной переменной или переменной канала  
Привилегии: call, all
   -.n.ti `:hc`$channel` — канал, для переменной которого задается значение. Если не указан, переменная будет задана как глобальная
   -.n `:hc`$variable` — имя переменной
   -.n `:hc`$value` — значение
   -.n `:hc`$cb` — `:phc`callback ( [Connection](#../) $conn, array $packet )` — вызывается когда будет получен результат

#&coreShowChannels  -#%s.method ```php:p.inline
 void public <a href="#./coreShowChannels">coreShowChannels</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Отображает все активные каналы</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
<p>#&amp;status  -#%s.method ```php:p.inline
void public <a href="#./status">status</a> ( callable $cb, string $channel = null )</p>
<pre><code class="">   -.n Представляет статус одного или более каналов с подробной информацией об их текущем состоянии  
Привилегии: call, all
   -.n.ti `:hc`$channel` — ограничивает вывод статусом заданного канала
   -.n `:hc`$cb` — `:phc`callback ( [Connection](#../) $conn, array $packet )` — вызывается когда будет получен результат

#&redirect  -#%s.method ```php:p.inline
 void public <a href="#./redirect">redirect</a> ( array $params, callable $cb )</code></pre>
<ul>
<li class="n">Перенаправляет канал в новый контекст, добавочный номер и приоритет диалплана<br />
Привилегии: call, all</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров команды</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
<p>#&amp;originate  -#%s.method ```php:p.inline
void public <a href="#./originate">originate</a> ( array $params, callable $cb )</p>
<pre><code class="">   -.n Формирует исходящий вызов из Asterisk и соединяет канал с контекстом/добавочным номером/приоритетом или приложением диалплана  
Привилегии: call, all
   -.n.ti `:hc`$params` — ассоциативный массив параметров команды
   -.n `:hc`$cb` — `:phc`callback ( [Connection](#../) $conn, array $packet )` — вызывается когда будет получен результат

#&extensionState  -#%s.method ```php:p.inline
 void public <a href="#./extensionState">extensionState</a> ( array $params, callable $cb )</code></pre>
<ul>
<li class="n">Сообщает о состоянии заданного добавочного номера. Если добавочный номер имеет подсказку, эта команда обеспечит передачу состояния устройства, соединенного с данным добавочным номером<br />
Привилегии: call, all</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров команды</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
<p>#&amp;ping  -#%s.method ```php:p.inline
void public <a href="#./ping">ping</a> ( callable $cb )</p>
<pre><code class="">   -.n Посылает запрос на сервер Asterisk, чтобы убедиться, что он до сих пор отвечает. Asterisk ответит сообщением Pong. Эта команда также может использоваться, чтобы не допустить разрыва соединения в результате истечения времени ожидания
   -.n.ti `:hc`$cb` — `:phc`callback ( [Connection](#../) $conn, array $packet )` — вызывается когда будет получен результат

#&action  -#%s.method ```php:p.inline
 void public <a href="#./action">action</a> ( string $action, callable $cb, array $params = null, array $assertion = null )</code></pre>
<ul>
<li class="n">Отправляет на сервер произвольную команду</li>
<li class="n ti"><code class="code_highlight php clear">$action</code> — команда</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
<li class="n"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров команды</li>
<li class="n"><code class="code_highlight php clear">$assertion</code> — @TODO If more events may follow as response this is a main part or full an action complete event indicating that all data has been sent</li>
</ul>
<p>#&amp;logoff  -#%s.method ```php:p.inline
void public <a href="#./logoff">logoff</a> ( callable $cb = null )</p>
<pre><code class="">   -.n Завершает сеанс
   -.n.ti `:hc`$cb` — `:phc`callback ( [Connection](#../) $conn, array $packet )` — вызывается когда будет получен результат

### dns # Clients\DNS

### gibson # Clients\Gibson

### http # HTTP #> HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Clients\HTTP;</code></pre>
<p>Предназначен для выполнения GET и POST запросов на удаленные хосты.</p>
<p>Клиент использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<h4 id="clients/asterisk/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<p>Получение файла <a target="_blank" class="tpl-outlink" href="http://www.google.com/robots.txt">google.com/robots.txt<i class="fa fa-external-link"></i></a> GET запросом:</p>
<pre><code class="php">$httpclient = \PHPDaemon\Clients\HTTP\Pool::getInstance();

$httpclient->get('http://www.google.com/robots.txt',
    function ($conn, $success) {
        // обработка данных ответа
    }
);</code></pre>
<p>Рабочий пример клиента представлен в <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Examples/Simple.php">Clients/HTTP/Examples/Simple.php<i class="fa fa-github"></i></a></p>
<h4 id="clients/asterisk/pool"><div class="in anchor">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\HTTP;
class Pool extends \PHPDaemon\Network\Client;</code></pre>
<h5 id="clients/asterisk/pool/options"><div class="in anchor">Опции по-умолчанию<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li><code>port (integer = 80)</code></li>
<li><code>ssl-port (integer = 443)</code></li>
<li><code>expose (boolean = true)</code></li>
</ul>
<h5 id="clients/asterisk/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>#&amp;get  -#%s.method ```php:p.inline
void public <a href="#./get">get</a> ( url $url, array $params )
void public get ( url $url, callable $resultcb )</p>
<pre><code class="">   -.n Осуществляет GET запрос
   -.n.ti `:hc`$url` — запрашиваемый URL
   -.n `:hc`$params` — ассоциативный массив параметров запроса
   -.n `:hc`$resultcb` — `:phc`callback ( [Connection](#../../connection) $conn, boolean $success )` — Вызывается когда на запрос пришел ответ, либо произошла ошибка

#&post  -#%s.method ```php:p.inline
 void public <a href="#./post">post</a> ( url $url, array $data, array $params )
 void public post ( url $url, array $data, callable $resultcb )</code></pre>
<ul>
<li class="n">Осуществляет POST запрос</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — запрашиваемый URL</li>
<li class="n"><code class="code_highlight php clear">$data</code> — ассоциативный массив POST-параметров</li>
<li class="n"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров запроса</li>
<li class="n"><code class="code_highlight php clear">$resultcb</code> — <code class="code_highlight php clear">callback ( <a href="#../../connection">Connection</a> $conn, boolean $success )</code> — Вызывается когда на запрос пришел ответ, либо произошла ошибка</li>
</ul>
<p>#&amp;buildUrl  -#%s.method ```php:p.inline
string public static <a href="#./buildUrl">buildUrl</a> ( string $str )
string public static buildUrl ( array $mixed )</p>
<pre><code class="">   -.n Генерирует URL-кодированную строку запроса из предоставленного ассоциативного (или индексного) массива `:hc`$mixed` или возвращает строку `:hc`$str`. В случае ошибки возвращает `:hc`false`
   -.n.ti `:hc`$mixed` — массив параметров URL

#&parseUrl  -#%s.method ```php:p.inline
 string public static <a href="#./parseUrl">parseUrl</a> ( string $str )
 string public static parseUrl ( array $mixed )</code></pre>
<ul>
<li class="n">Разбирает массив <code class="code_highlight php clear">$mixed</code> или строку <code class="code_highlight php clear">$str</code> и возвращает ассоциативный массив, содержащий необходимые компоненты URL: <code class="code_highlight php clear">[$scheme, $host, $uri, $port]</code>. В случае ошибки возвращает <code class="code_highlight php clear">false</code>.<br />
См. <a target="_blank" class="tpl-outlink" href="http://php.net/parse_url">php.net/parse_url<i class="fa fa-external-link"></i></a></li>
<li class="n ti"><code class="code_highlight php clear">$mixed</code> — массив параметров URL</li>
</ul>
<h4 id="clients/asterisk/connection"><div class="in anchor">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\HTTP;
class Connection extends \PHPDaemon\Network\ClientConnection;</code></pre>
<h5 id="clients/asterisk/connection/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/connection">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $headers;</code></pre>
<p>Заголовки ответа</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $body;</code></pre>
<p>Тело ответа</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $contentLength;</code></pre>
<p>Длина тела ответа</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $cookie;</code></pre>
<p>Ассоциативный массив Cookies пришедших в ответе</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $chunked;</code></pre>
<p>Если true, то в заголовках был получен <code>Transfer-Encoding: chunked</code></p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $protocolError;</code></pre>
<p>Если не <code class="code_highlight php clear">null</code>, то произошла серьезная ошибка при обработке ответа на запрос. Содержит номер строки в файле <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php">Connection.php<i class="fa fa-github"></i></a>, по которому можно определить характер ошибки</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $responseCode;</code></pre>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $lastURL;</code></pre>
<p>Последний запрошенный url</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $rawHeaders;</code></pre>
<p>Заголовки ответа в сыром виде</p>
</li>
</ul>
<h5 id="clients/asterisk/connection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/connection">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>#&amp;getBody  -#%s.method ```php:p.inline
string public <a href="#./getBody">getBody</a> ( )</p>
<pre><code class="">   -.n Возвращает тело ответа

#&getHeaders  -#%s.method ```php:p.inline
 string public <a href="#./getHeaders">getHeaders</a> ( )</code></pre>
<ul>
<li class="n">Возвращает ассоциативный массив заголовков ответа</li>
</ul>
<p>#&amp;getHeader  -#%s.method ```php:p.inline
string public <a href="#./getHeader">getHeader</a> ( string $name )</p>
<pre><code class="">   -.n Возвращает заголовок ответа по имени или `:hc`null`
   -.n.ti `:hc`$name` — имя заголовка

### icmp # Clients\ICMP

### irc # Clients\IRC

### lock # Lock #> Lock <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Lock"><i class="fa fa-github"></i></a>

Требует рефакторинга

### memcache # Clients\Memcache

### mongo # Clients\Mongo

### mysql # MySQL #> MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Clients\MySQL;</code></pre>
<p>Клиент для СУБД <a target="_blank" class="tpl-outlink" href="http://mysql.com/">MySQL<i class="fa fa-external-link"></i></a></p>
<h4 id="clients/asterisk/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<p>@TODO</p>
<p>В вашем приложении вам следует получать объект MySQLClient посредством <code>Daemon::$appResolver->getInstanceByAppName('MySQLClient')</code> и использовать как описано ниже.</p>
<h5 id="clients/asterisk/use/prepare"><div class="in anchor">Подготовка объекта соединения<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<pre><code class="">/*
  @method getConnection
  @description Establishes connection.
  @param string Optional. Address.
  @return integer Connection's ID.
*/</code></pre>
<p>Вам следует получить объект MySQLClientSession посредством метода $MySQLClient->getConnection(), затем вы можете положить ваш текущий запрос/сессию/что-нибудь еще в текущий контекст соединения (в свойство context).</p>
<p>Затем используйте:</p>
<pre><code class="php">$this->sql->onConnected(
    function($sql, $success) {
        if (!$success) {
            return;
        }
        // your connection-dependent code
    }
);</code></pre>
<h4 id="clients/asterisk/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">$sql->query('SHOW VARIABLES', 
   function($sql, $success) {
      $sql->context->queryResult = $sql->resultRows; // save the result
      $sql->context->wakeup(); // wake up the request immediately
   }
);</code></pre>
<p>Когда callback-функция вызвана, $sql->context содержит ваш объект, который вы туда положили перед этим. $sql->resultRows хранит результат в виде массива ассоциативных массивов. $sql->resultFields содержит поля ответа в виде массива ассоциативных массивов.</p>
<h4 id="clients/asterisk/pool"><div class="in anchor">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\MySQL;
class Pool extends \PHPDaemon\Network\Client;</code></pre>
<h5 id="clients/asterisk/pool/options"><div class="in anchor">Опции по-умолчанию<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li><code>server (string = 'tcp://root@127.0.0.1/')</code></li>
<li><code>port (integer = 3306)</code></li>
<li><code>max-conn-per-serv (integer = 32)</code></li>
</ul>
<h5 id="clients/asterisk/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>#&amp;getConnection  -#%s.method ```php:p.inline
boolean public static <a href="#./getConnection">getConnection</a> ( callable $cb )
boolean public static getConnection ( string $url = null, callable $cb = null, integer $pri = 0 )</p>
<pre><code class="">   -.n Выполняет callback-функцию когда будет установлена связь с сервером. Возвращает `false` если соединение невозможно установить
   -.n.ti `:hc`$cb` — `:phc`callback ( [Connection](#../../connection) $conn )` — вызывается когда будет установлена связь с сервером
   -.n `:hc`$url` — адрес сервера
   -.n `:hc`$pri` — приоритет данного вызова среди других. Чем больше значение, тем выше приоритет

#&escape  -#%s.method ```php:p.inline
 string public static <a href="#./escape">escape</a> ( string $string )</code></pre>
<ul>
<li class="n">Экранирует специальные символы: <code>\0</code>, <code>\n</code>, <code>\r</code>, <code>\</code>, <code>'</code>, <code>"</code></li>
<li class="n ti"><code class="code_highlight php clear">$string</code> — исходная строка</li>
</ul>
<p>#&amp;likeEscape  -#%s.method ```php:p.inline
string public static <a href="#./likeEscape">likeEscape</a> ( string $string )</p>
<pre><code class="">   -.n Работает как метод `:hc`Pool::escape` с дополнительными символами: `%` и `_`
   -.n.ti `:hc`$string` — исходная строка

#&value  -#%s.method ```php:p.inline
 string public static <a href="#./value">value</a> ( mixed $mixed )</code></pre>
<ul>
<li class="n">Преобразует строку или число <code class="code_highlight php clear">$mixed</code> для использоания в SQL-выражении и возвращает значение в одинарных кавычках <code>'</code>. Для всех остальных типов возвращает <code>'null'</code></li>
<li class="n ti"><code class="code_highlight php clear">$mixed</code> — конвертируемые данные</li>
</ul>
<p>#&amp;values  -#%s.method ```php:p.inline
string public static <a href="#./values">values</a> ( mixed $arr )</p>
<pre><code class="">   -.n Преобразует массив `:hc`$arr` для использоания в SQL-выражении и возвращает список значений, разделенные запятой `,`. Для всех остальных типов возвращает пустую строку
   -.n.ti `:hc`$mixed` — конвертируемые данные

#### connection # Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Connection.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Clients\MySQL;
class Connection extends \PHPDaemon\Network\ClientConnection;</code></pre>
<h5 id="clients/asterisk/pool/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">string public $serverver;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $serverCaps;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $serverLang;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $serverStatus;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $warnCount;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $message;</code></pre>
<p>@TODO Flags of this MySQL client</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $dbname;</code></pre>
<p>Текущая база данных</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $resultRows;</code></pre>
<p>Массив результата SQL-запроса в виде ассоциативных массивов</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $resultFields;</code></pre>
<p>Массив колонок таблицы в виде ассоциативных массивов</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $context;</code></pre>
<p>Контекст для выполняемых SQL-запросов</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $insertId;</code></pre>
<p>Идентификатор, сгенерированный при последнем INSERT-запросе</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $affectedRows;</code></pre>
<p>Число затронутых SQL-запросом строк</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $protover;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $timeout;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $errno;</code></pre>
<p>Численный код ошибки выполнения SQL-запроса</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $errmsg;</code></pre>
<p>Текст ошибки выполнения SQL-запроса</p>
</li>
</ul>
<h5 id="clients/asterisk/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>#&amp;onConnected  -#%s.method ```php:p.inline
void public <a href="#./onConnected">onConnected</a> ( callable $callback )</p>
<pre><code class="">   -.n Выполняет callback-функцию когда будет установлена связь с сервером
   -.n.ti `:hc`$callback` — `:phc`callback ( [Connection](#../) $conn, boolean $success )` — вызывается когда установлена связь с сервером, либо произошла ошибка

#&query  -#%s.method ```php:p.inline
 boolean public <a href="#./query">query</a> ( string $query, callable $callback = NULL )</code></pre>
<ul>
<li class="n">Осуществляет SQL-запрос к серверу</li>
<li class="n ti"><code class="code_highlight php clear">$query</code> — SQL-запрос</li>
<li class="n"><code class="code_highlight php clear">$callback</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, boolean $success )</code> — вызывается когда получен результат SQL-запроса, либо произошла ошибка</li>
</ul>
<p>#&amp;ping  -#%s.method ```php:p.inline
boolean public <a href="#./ping">ping</a> ( callable $callback = NULL )</p>
<pre><code class="">   -.n Проверяет работает ли соединение с сервером. Если оно утеряно, автоматически предпринимается попытка пересоединения
   -.n.ti `:hc`$callback` — `:phc`callback ( [Connection](#../) $conn, boolean $success )` — вызывается когда получен результат, либо произошла ошибка

#&selectDB  -#%s.method ```php:p.inline
 boolean public <a href="#./selectDB">selectDB</a> ( string $name )</code></pre>
<ul>
<li class="n">Выбирает базу данных MySQL</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — имя выбираемой базы данных</li>
</ul>
<h3 id="clients/postgresql"><div class="in anchor">Clients\PostgreSQL<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/redis"><div class="in anchor">Clients\Redis<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/valve"><div class="in anchor">Clients\Valve<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/websocket"><div class="in anchor">Clients\WebSocket<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/xmpp"><div class="in anchor">Clients\XMPP<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h2 id="lib"><div class="in anchor">Библиотеки</div>

</h2>
<h3 id="lib/cache"><div class="in anchor">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Cache;</code></pre>
<p>Механизм локального LRU-кеша ключ-значение.</p>
<blockquote>
<p>Используется для кеширования замыканий созданных через create_function. Также используется в <a target="_self" class="tpl-inlink" href="##clients/dns">Clients\DNS<i class="fa fa-caret-square-o-up"></i></a></p>
</blockquote>
<h4 id="lib/cache/capped-storage"><div class="in anchor">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Cache;
abstact class CappedStorage;</code></pre>
<p>Базовый абстрактный класс.</p>
<h5 id="lib/cache/capped-storage/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/capped-storage">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">callable public $sorter;</code></pre>
<p>Метод сортировки</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxCacheSize;</code></pre>
<p>Максимальное количество элементов в кеше</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $capWindow;</code></pre>
<p>Количество элементов, которые пропускаются в кеш сверх максимального количества, для уменьшения количества сортировок</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $cache;</code></pre>
<p>Ассоциативный массив хранимых элементов</p>
</li>
</ul>
<h5 id="lib/cache/capped-storage/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/capped-storage">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;hash  -#%s.method ```php:p.inline
string public <a href="#./hash">hash</a> ( string $key )</p>
<pre><code class="">   -.n Возвращает хеш ключа, который идентифицирует элемент хранилища, по-умолчанию используется crc32()
   -.n.ti `:hc`$key` — ключ элемента

#&put  -#%s.method ```php:p.inline
 [Item](#../../item) public <a href="#./put">put</a> ( string $key, mixed $value, float $ttl = null )</code></pre>
<ul>
<li class="n">Добавляет элемент в кеш <a target="_self" class="tpl-inlink" href="##../../item">Item<i class="fa fa-caret-square-o-up"></i></a> с значением <code class="code_highlight php clear">$value</code></li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — ключ элемента</li>
<li class="n"><code class="code_highlight php clear">$value</code> — значение</li>
<li class="n"><code class="code_highlight php clear">$ttl</code> — время жизни в секундах</li>
</ul>
<p>#&amp;invalidate  -#%s.method ```php:p.inline
void public <a href="#./invalidate">invalidate</a> ( string $key )</p>
<pre><code class="">   -.n Удаляет элемент кеша
   -.n.ti `:hc`$key` — ключ

#&get  -#%s.method ```php:p.inline
 [Item](#../../item) public <a href="#./get">get</a> ( string $key )</code></pre>
<ul>
<li class="n">Возвращает элемент хранилища <a target="_self" class="tpl-inlink" href="##../../item">Item<i class="fa fa-caret-square-o-up"></i></a></li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — ключ</li>
</ul>
<p>#&amp;getValue  -#%s.method ```php:p.inline
mixed public <a href="#./getValue">getValue</a> ( string $key )</p>
<pre><code class="">   -.n Возвращает значение элемента хранилища
   -.n.ti `:hc`$key` — ключ элемента

#### item # Класс Item <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/Item.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Cache;
class Item;</code></pre>
<h5 id="lib/cache/capped-storage/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/capped-storage">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">integer public $hits;</code></pre>
<p>Количество обращений к значению элемента</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $expire;</code></pre>
<p>Временная метка до которой элемент действителен</p>
</li>
</ul>
<h5 id="lib/cache/capped-storage/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/capped-storage">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;getHits  -#%s.method ```php:p.inline
integer public <a href="#./getHits">getHits</a> ( )</p>
<pre><code class="">   -.n Возвращает количество обращений к значению элемента

#&getValue  -#%s.method ```php:p.inline
 mixed public <a href="#./getValue">getValue</a> ( )</code></pre>
<ul>
<li class="n">Возвращает значение элемента</li>
</ul>
<p>#&amp;addListener  -#%s.method ```php:p.inline
void public <a href="#./addListener">addListener</a> ( callable $cb )</p>
<pre><code class="">   -.n Переданная функция обратного вызова будет вызвана когда будет установлено значение элемента
   -.n.ti `:hc`$cb` — функция обратного вызова

#&setValue  -#%s.method ```php:p.inline
 void public <a href="#./setValue">setValue</a> ( mixed $value )</code></pre>
<ul>
<li class="n">Устанавливает значение элемента</li>
<li class="n ti"><code class="code_highlight php clear">$value</code> — значение</li>
</ul>
<h4 id="lib/cache/capped-storage-hits"><div class="in anchor">Класс CappedStorageHits <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorageHits.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Cache;
class CappedStorageHits extends CappedStorage;</code></pre>
<p>Реализация <a target="_self" class="tpl-inlink" href="##../capped-storage">CappedStorage<i class="fa fa-caret-square-o-up"></i></a> с сортировкой по количеству обращений</p>
<h3 id="lib/complexjob"><div class="in anchor">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Core;
class ComplexJob extends \<a href="http://php.net/manual/class.arrayaccess.php">ArrayAccess</a>;</code></pre>
<p>Объект класса ComplexJob позволяет повесить функцию обратного вызова на завершение всех объявленных в нем процедур. Это удобно, когда нужно выполнить ряд независимых цепочек действий.</p>
<h4 id="lib/complexjob/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">$j = new ComplexJob(function($j) { // Когда всё выполнилось
   D($j['foo']); // this
   D($j['foobar']); // is
   D($j['bar']); // sparta
});

/* Добавляем задачу */
$j('foo', function($name, $j) { 
   $j[$name] = 'this'; // Вызываем setResult()

   /* Еще задачу */
   $j('foobar', function($name, $j) { 
      $j[$name] = 'is';
   });
});

/* И еще одну */
$j('bar', function($name, $j) {
   $j[$name] = 'sparta';
});

$j(); // Запускаем</code></pre>
<h4 id="lib/complexjob/consts"><div class="in anchor">Константы<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">const STATE_WAITING = 1;</code></pre>
<p>Состояние: ожидание</p>
</li>
<li class="method">
<pre class="inline"><code class="php">const STATE_RUNNING = 2;</code></pre>
<p>Состояние: в процессе</p>
</li>
<li class="method">
<pre class="inline"><code class="php">const STATE_DONE = 3;</code></pre>
<p>Состояние: завершено</p>
</li>
</ul>
<h4 id="lib/complexjob/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">callable public $listeners;</code></pre>
<p>Стек функций обратного вызова, которые вызываются при успешном выполнении всех объявленных процедур</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $results;</code></pre>
<p>Ассоциативный массив результатов установленных через <code class="code_highlight php">setResult($value, $value)</code> или <code class="code_highlight php">$job[$name] = $value;</code></p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $state;</code></pre>
<p>Состояние (константа STATE_*)</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $jobs;</code></pre>
<p>Ассоциативный массив, хранящий функции обратного вызова подзадач</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $resultsNum;</code></pre>
<p>Количество выполненных подзадач</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $jobsNum;</code></pre>
<p>Количество подзадач</p>
</li>
</ul>
<h4 id="lib/complexjob/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( callable $cb = null )</p>
<pre><code class="">   -.n Конструктор
   -.n.ti `:hc`$cb` — функция обратного вызова для метода addListener

#&addListener  -#%s.method ```php:p.inline
 void public <a href="#./addListener">addListener</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Переданная функция будет вызвана когда все подзадачи выполнены</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
<p>#&amp;offsetExists  -#%s.method ```php:p.inline
mixed public <a href="#./offsetExists">offsetExists</a> ( string $j )</p>
<pre><code class="">   -.n Позволяет сделать `:hc`isset($j[$name])`
   -.n.ti `:hc`$j` — имя подзадачи

#&offsetGet  -#%s.method ```php:p.inline
 mixed public <a href="#./offsetGet">offsetGet</a> ( string $j )</code></pre>
<ul>
<li class="n">Позволяет сделать <code class="code_highlight php clear">isset($job[$name])</code></li>
<li class="n ti"><code class="code_highlight php clear">$j</code> — имя подзадачи</li>
</ul>
<p>#&amp;offsetSet  -#%s.method ```php:p.inline
mixed public <a href="#./offsetSet">offsetSet</a> ( string $j, mixed $v )</p>
<pre><code class="">   -.n Позволяет сделать `:hc`$job[$name] = $value`
   -.n.ti `:hc`$j` — имя подзадачи
   -.n `:hc`$v` — значение

#&offsetUnset  -#%s.method ```php:p.inline
 mixed public <a href="#./offsetUnset">offsetUnset</a> ( string $j )</code></pre>
<ul>
<li class="n">Позволяет сделать <code class="code_highlight php clear">unset($job[$name])</code></li>
<li class="n ti"><code class="code_highlight php clear">$j</code> — имя подзадачи</li>
</ul>
<p>#&amp;getResults  -#%s.method ```php:p.inline
array public <a href="#./getResults">getResults</a> ( )</p>
<pre><code class="">   -.n Возвращает ассоциативный массив результатов

#&keep  -#%s.method ```php:p.inline
 void public <a href="#./keep">keep</a> ( boolean $keep = true )</code></pre>
<ul>
<li class="n">Включает опцию keep, при которой, после выполнения всех подзадач не вызывается метод <code class="code_highlight php clear">cleanup()</code></li>
<li class="n ti"><code class="code_highlight php clear">$keep</code> — true/false</li>
</ul>
<p>#&amp;hasCompleted  -#%s.method ```php:p.inline
boolean public <a href="#./hasCompleted">hasCompleted</a> ( )</p>
<pre><code class="">   -.n Выполнены ли все подзадачи?

#&maxConcurrency  -#%s.method ```php:p.inline
 [ComplexJob](#../) public <a href="#./maxConcurrency">maxConcurrency</a> ( integer $n = -1 )</code></pre>
<ul>
<li class="n">Устанавливает максимальное количество одновременно выполняемых задач</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Натуральное число. При <code>-1</code> ограничение не действует.</li>
</ul>
<p>#&amp;setResult  -#%s.method ```php:p.inline
boolean public <a href="#./setResult">setResult</a> ( string $jobname, mixed $result = null )</p>
<pre><code class="">   -.n Устанавливает результат выполнения подзадачи
   -.n.ti `:hc`$jobname` — Название подзадачи
   -.n `:hc`$result` — Результат

#&getResult  -#%s.method ```php:p.inline
 mixed public <a href="#./getResult">getResult</a> ( string $jobname )</code></pre>
<ul>
<li class="n">Получить результат выполнения подзадачи по имени</li>
<li class="n ti"><code class="code_highlight php clear">$jobname</code> — имя подзадачи</li>
</ul>
<p>#&amp;checkQueue  -#%s.method ```php:p.inline
void public <a href="#./checkQueue">checkQueue</a> ( )</p>
<pre><code class="">   -.n Вызывается автоматически. Проверяет полна ли очередь и если нет, то пробует запустить еще подзадач из `backlog` и `more`.

#&more  -#%s.method ```php:p.inline
 [ComplexJob](#../) public <a href="#./more">more</a> ( callable $cb = null )</code></pre>
<ul>
<li class="n">Задает функцию обратного вызова, которая автоматически вызывается каждый раз, когда можно добавить еще подзадач.</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
<p>#&amp;isQueueFull  -#%s.method ```php:p.inline
boolean public <a href="#./isQueueFull">isQueueFull</a> ( )</p>
<pre><code class="">   -.n Проверяет полна ли на данный момент очередь задач (превышен ли параметр `maxConcurrency`)

#&addJob  -#%s.method ```php:p.inline
 boolean public <a href="#./addJob">addJob</a> ( string $name, callable $cb )</code></pre>
<ul>
<li class="n">Добавляет подзадачу</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — имя подзадачи</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
<p>#&amp;cleanup  -#%s.method ```php:p.inline
void public <a href="#./cleanup">cleanup</a> ( )</p>
<pre><code class="">   -.n Удаляет сохраненные результаты и функции обратного вызова. Вызывается автоматически, не задан параметр `keep`. В этом случае, во избежание утечек памяти вызывайте этот метод сами, когда закончили работать с данными.

#&execute  -#%s.method ```php:p.inline
 void public <a href="#./execute">execute</a> ( )</code></pre>
<ul>
<li class="n">Выполняет</li>
</ul>
<p>#&amp;<strong>invoke  -#%s.method ```php:p.inline
boolean public &lt;a href="#./</strong>invoke">__invoke</a> ( string $name = null, callable $cb = null )</p>
<pre><code class="">   -.n Синоним `addJob ( $name, $cb )`. Пример: `:hc`$job('job', )`

#&__invoke  -#%s.method ```php:p.inline
 boolean public <a href="#./__invoke">__invoke</a> ( )</code></pre>
<ul>
<li class="n">Синоним <code>execute()</code>. Пример: <code class="code_highlight php clear">$job()</code></li>
</ul>
<h3 id="lib/shellcommand"><div class="in anchor">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Core;
class ShellCommand extends \PHPDaemon\Network\IOStream;</code></pre>
<p>Класс является наследником IOStream, так что в нём доступны такие методы как read[ln], write[ln], и так далее.</p>
<h4 id="lib/shellcommand/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#lib/shellcommand">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<h5 id="lib/shellcommand/examples/simple"><div class="in anchor">Простое выполнение, аналог функции shell_exec</div>

</h5>
<pre><code class="php">ShellCommand::exec('echo "foo"', function($commandInstance, $output) {
   D($output); // foo
});</code></pre>
<h5 id="lib/shellcommand/examples/with_params"><div class="in anchor">С дополнительными параметрами и переменными окружения</div>

</h5>
<pre><code class="php">$command = 'git log';
$cb = function($commandInstance, $output) {
     D($output); // foo
};
$arguments = ['-1', '--pretty' => 'oneline'];
$env = [];
ShellCommand::exec($command, $cb, $arguments, $env);</code></pre>
<blockquote>
<p>Аргументы будут экранированы с помощью <code>escapeshellarg</code></p>
</blockquote>
<h5 id="lib/shellcommand/examples/packet-processing"><div class="in anchor">Пакетная обработка вывода</div>

</h5>
<p>@TODO</p>
<h4 id="lib/shellcommand/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/shellcommand">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">string public $binPath;</code></pre>
<p>Исполняемый путь</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $setUser;</code></pre>
<p>Имя Unix-пользователя от имени которого выполняется команда</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $setGroup;</code></pre>
<p>Имя Unix-группы от имени которого выполняется команда</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $chroot = '/';</code></pre>
<p>Подмена корневого каталога для выполняемой команды</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $cwd;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h4 id="lib/shellcommand/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/shellcommand">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>#&amp;exec  -#%s.method ```php:p.inline
void public static <a href="#./exec">exec</a> ( string $binPath = null, callable $cb = null, array $args = null, array $env = null )</p>
<pre><code class="">   -.n Выполняет команду (статический метод)
   -.n.ti `:hc`$binPath` — исполняемый путь
   -.n `:hc`$cb` — функция обратного вызова
   -.n `:hc`$args` — массив аргументов
   -.n `:hc`$env` — ассоциативный массив переменных окружения (можно передать $_ENV`)

#&getCmd  -#%s.method ```php:p.inline
 string public <a href="#./getCmd">getCmd</a> ( )</code></pre>
<ul>
<li class="n">Возвращает строку исполняемой команды</li>
</ul>
<p>#&amp;setUser  -#%s.method ```php:p.inline
<a href="#../">ShellCommand</a> public <a href="#./setUser">setUser</a> ( string $val )</p>
<pre><code class="">   -.n Задает имя Unix-пользователя от имени которого выполняется команда
   -.n.ti `:hc`$val` — имя пользователя

#&setGroup  -#%s.method ```php:p.inline
 [ShellCommand](#../) public <a href="#./setGroup">setGroup</a> ( string $val )</code></pre>
<ul>
<li class="n">Задает название Unix-группы от которой выполняется команда</li>
<li class="n ti"><code class="code_highlight php clear">$val</code> — название группы</li>
</ul>
<p>#&amp;setCwd  -#%s.method ```php:p.inline
<a href="#../">ShellCommand</a> public <a href="#./setCwd">setCwd</a> ( string $dir )</p>
<pre><code class="">   -.n Установить рабочий каталог для выполняемой команды
   -.n.ti `:hc`$dir` — путь

#&setChroot  -#%s.method ```php:p.inline
 [ShellCommand](#../) public <a href="#./setChroot">setChroot</a> ( string $dir )</code></pre>
<ul>
<li class="n">Подменяет корневой каталог для выполняемой команды</li>
<li class="n ti"><code class="code_highlight php clear">$dir</code> — путь</li>
</ul>
<p>#&amp;setArgs  -#%s.method ```php:p.inline
<a href="#../">ShellCommand</a> public <a href="#./setArgs">setArgs</a> ( array $args = NULL )</p>
<pre><code class="">   -.n Установить список аргументов
   -.n.ti `:hc`$args` — массив аргументов

#&setEnv  -#%s.method ```php:p.inline
 [ShellCommand](#../) public <a href="#./setEnv">setEnv</a> ( array $env = NULL )</code></pre>
<ul>
<li class="n">Задает ассоциативный массив переменных окружения (можно передать $_ENV`)</li>
<li class="n ti"><code class="code_highlight php clear">$env</code> — массив</li>
</ul>
<p>#&amp;nice  -#%s.method ```php:p.inline
<a href="#../">ShellCommand</a> public <a href="#./nice">nice</a> ( integer $nice = NULL )</p>
<pre><code class="">   -.n Задает приоритет выделения процессорного времени (меньше — выше)
   -.n.ti `:hc`$nice` — целое число

#&buildArgs  -#%s.method ```php:p.inline
 string public static <a href="#./buildArgs">buildArgs</a> ( array $args )</code></pre>
<ul>
<li class="n">Строит строку аргументов по массиву</li>
<li class="n ti"><code class="code_highlight php clear">$args</code> — массив аргумент</li>
</ul>
<p>#&amp;execute  -#%s.method ```php:p.inline
<a href="#../">ShellCommand</a> public <a href="#./execute">execute</a> ( string $binPath = NULL, array $args = NULL, array $env = NULL )</p>
<pre><code class="">   -.n Непосредственно выполняет команду
   -.n.ti `:hc`$binPath` — исполняемый путь
   -.n `:hc`$args` — массив аргументов
   -.n `:hc`$env` — ассоциативный массив переменных окружения (можно передать $_ENV`)

#&finishWrite  -#%s.method ```php:p.inline
 boolean public <a href="#./finishWrite">finishWrite</a> ( )</code></pre>
<ul>
<li class="n">Закрывает поток ввода исполняемого процесса, когда буфер будет прочитан</li>
</ul>
<p>#&amp;close  -#%s.method ```php:p.inline
void public <a href="#./close">close</a> ( )</p>
<pre><code class="">   -.n Завершает процесс

#&closeWrite  -#%s.method ```php:p.inline
 [ShellCommand](#../) public <a href="#./closeWrite">closeWrite</a> ( )</code></pre>
<ul>
<li class="n">Безусловно закрывает поток ввода исполняемого процесса (STDIN)</li>
</ul>
<p>#&amp;eof  -#%s.method ```php:p.inline
boolean public <a href="#./eof">eof</a> ( )</p>
<pre><code class="">   -.n Достигнут ли EOF (Конец Файла)?

#&onEOF  -#%s.method ```php:p.inline
 [ShellCommand](#../) public <a href="#./onEOF">onEOF</a> ( callable $cb = NULL )</code></pre>
<ul>
<li class="n">Переданная функция обратного вызова будет вызвана когда достигнут EOF (Конец Файла)</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
<h3 id="lib/timer"><div class="in anchor">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Core;
class Timer;</code></pre>
<p>С помощью этого класса можно создавать отложенные во времени события (таймеры)</p>
<h4 id="lib/timer/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#lib/timer">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">$i = 0;
setTimeout(function($timer) use (&$i) {
 D("Пять секунд прошло!");

 if (++$i < 3) {
    // запуск таймера ещё на 5 секунд
    $timer->timeout();
 } else {
    D('Конец');
    $timer->free();
 }
}, 5e6);</code></pre>
<h4 id="lib/timer/global-functions"><div class="in anchor">Глобальные функции <span class="header-path"> <i>&larr;</i> <a href="#lib/timer">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>#&amp;setTimeout  -#%s.method ```php:p.inline
integer <a href="#./setTimeout">setTimeout</a> ( callable $cb, integer $timeout = null, integer $id = null, integer $priority = null )</p>
<pre><code class="">   -.n Функция-псевдоним `Timer::add`
   -.n.ti `:hc`$cb` — функция обратного вызова
   -.n `:hc`$timeout` — количество микросекунд через которое должна быть выполнена функция обратного вызова
   -.n `:hc`$id` — идентификатор таймера
   -.n `:hc`$priority` — приоритет события таймера

 -.method.fake &nbsp;

#### properties # Свойства

-.method ```php:p.inline
 integer public $id;</code></pre>
<p>Идентификатор таймера</p>
<ul>
<li class="method">
<pre class="inline"><code class="php">integer public $lastTimeout;</code></pre>
<p>Количество микросекунд на которое был взведен таймер последний раз</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $finished = false;</code></pre>
<p>Завершен ли данный таймер?</p>
</li>
<li class="method">
<pre class="inline"><code class="php">callable public $cb;</code></pre>
<p>Функция обратного вызова</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $list = [];</code></pre>
<p>Ассоциативный массив всех таймеров</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $priority;</code></pre>
<p>Приоритет события данного таймера</p>
</li>
</ul>
<h4 id="lib/timer/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/timer">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( callable $cb, integer $timeout = null, integer $id = null, integer $priority = null )</p>
<pre><code class="">   -.n Конструктор
   -.n.ti `:hc`$cb` — функция обратного вызова
   -.n `:hc`$timeout` — количество микросекунд через которое должна быть выполнена функция обратного вызова
   -.n `:hc`$id` — идентификатор таймера
   -.n `:hc`$priority` — приоритет события таймера

#&setPriority  -#%s.method ```php:p.inline
 void public <a href="#./setPriority">setPriority</a> ( integer $priority )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$priority</code> — @TODO</li>
</ul>
<p>#&amp;add  -#%s.method ```php:p.inline
integer public static <a href="#./add">add</a> ( callable $cb, integer $timeout = null, integer $id = null, integer $priority = null )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$cb` — @TODO
   -.n `:hc`$timeout` — @TODO
   -.n `:hc`$id` — @TODO
   -.n `:hc`$priority` — @TODO

#&setTimeout  -#%s.method ```php:p.inline
 boolean public static <a href="#./setTimeout">setTimeout</a> ( integer $id, integer $timeout = NULL )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$timeout</code> — @TODO</li>
</ul>
<p>#&amp;remove  -#%s.method ```php:p.inline
void public static <a href="#./remove">remove</a> ( integer $id )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$id` — @TODO

#&cancelTimeout  -#%s.method ```php:p.inline
 void public static <a href="#./cancelTimeout">cancelTimeout</a> ( integer $id )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
</ul>
<p>#&amp;timeout  -#%s.method ```php:p.inline
void public <a href="#./timeout">timeout</a> ( integer $timeout = null )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$timeout` — @TODO

#&cancel  -#%s.method ```php:p.inline
 void public <a href="#./cancel">cancel</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;finish  -#%s.method ```php:p.inline
void public <a href="#./finish">finish</a> ( )</p>
<pre><code class="">   -.n @TODO

#&__destruct  -#%s.method ```php:p.inline
 void public <a href="#./__destruct">__destruct</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;free  -#%s.method ```php:p.inline
void public <a href="#./free">free</a> ( )</p>
<pre><code class="">   -.n @TODO

### transport-context # TransportContext #> TransportContext <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/TransportContext.php"><i class="fa fa-github"></i></a>

```php:p
namespace PHPDaemon\Core;
class TransportContext extends AppInstance;</code></pre>
<p>@TODO</p>
<h3 id="lib/fs"><div class="in anchor">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\FS;</code></pre>
<h4 id="lib/fs/filesystem"><div class="in anchor">Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\FS;
class FileSystem;</code></pre>
<h5 id="lib/fs/filesystem/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filesystem">Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">boolean public static $supported;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">Event public static $ev;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">resource public static $fd;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $modeTypes;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public static $badFDttl = 5;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php"><a href="#libraries/cache/capped-storage">CappedStorage</a> public static $fdCache;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public static $fdCacheSize = 128;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public static $eioVer = '1.2.1';</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/fs/filesystem/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filesystem">Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;init  -#%s.method ```php:p.inline
void public static <a href="#./init">init</a> ( )</p>
<pre><code class="">   -.n @TODO

#&initEvent  -#%s.method ```php:p.inline
 void public static <a href="#./initEvent">initEvent</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;checkFileReadable  -#%s.method ```php:p.inline
boolean public static <a href="#./checkFileReadable">checkFileReadable</a> ( string $path )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO

#&waitAllEvents  -#%s.method ```php:p.inline
 void public static <a href="#./waitAllEvents">waitAllEvents</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;updateConfig  -#%s.method ```php:p.inline
void public static <a href="#./updateConfig">updateConfig</a> ( )</p>
<pre><code class="">   -.n @TODO

#&sanitizePath  -#%s.method ```php:p.inline
 string public static <a href="#./sanitizePath">sanitizePath</a> ( string $path )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
</ul>
<p>#&amp;statPrepare  -#%s.method ```php:p.inline
array public static <a href="#./statPrepare">statPrepare</a> ( array $stat )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$stat` — @TODO

#&stat  -#%s.method ```php:p.inline
 resource public static <a href="#./stat">stat</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;unlink  -#%s.method ```php:p.inline
resource public static <a href="#./unlink">unlink</a> ( string $path, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&rename  -#%s.method ```php:p.inline
 resource public static <a href="#./rename">rename</a> ( string $path, string $newpath, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$newpath</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;statvfs  -#%s.method ```php:p.inline
resource public static <a href="#./statvfs">statvfs</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&lstat  -#%s.method ```php:p.inline
 resource public static <a href="#./lstat">lstat</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;realpath  -#%s.method ```php:p.inline
resource public static <a href="#./realpath">realpath</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&sync  -#%s.method ```php:p.inline
 resource public static <a href="#./sync">sync</a> ( callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;syncfs  -#%s.method ```php:p.inline
resource public static <a href="#./syncfs">syncfs</a> ( callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&touch  -#%s.method ```php:p.inline
 resource public static <a href="#./touch">touch</a> ( string $path, integer $mtime, integer $atime = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$mtime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$atime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;rmdir  -#%s.method ```php:p.inline
resource public static <a href="#./rmdir">rmdir</a> ( string $path, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&mkdir  -#%s.method ```php:p.inline
 resource public static <a href="#./mkdir">mkdir</a> ( string $path, integer $mode, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$mode</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;readdir  -#%s.method ```php:p.inline
resource public static <a href="#./readdir">readdir</a> ( string $path, callable $cb = null, integer $flags, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$flags` — @TODO
   -.n `:hc`$pri` — @TODO

#&truncate  -#%s.method ```php:p.inline
 resource public static <a href="#./truncate">truncate</a> ( string $path, integer $offset = 0, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;sendfile  -#%s.method ```php:p.inline
boolean public static <a href="#./sendfile">sendfile</a> ( mixed $outfd, string $path, callable $cb, callable $startCb = null, integer $offset = 0, integer $length = null, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$outfd` — @TODO
   -.n `:hc`$path` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$startCb` — @TODO
   -.n `:hc`$offset` — @TODO
   -.n `:hc`$length` — @TODO
   -.n `:hc`$pri` — @TODO

#&chown  -#%s.method ```php:p.inline
 resource public static <a href="#./chown">chown</a> ( string $path, integer $uid, integer $gid = -1, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$uid</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$gid</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;readfile  -#%s.method ```php:p.inline
resource public static <a href="#./readfile">readfile</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&readfileChunked  -#%s.method ```php:p.inline
 void public static <a href="#./readfileChunked">readfileChunked</a> ( string $path, callable $cb, callable $chunkcb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$chunkcb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;genRndTempnam  -#%s.method ```php:p.inline
string public static <a href="#./genRndTempnam">genRndTempnam</a> ( string $dir = null, string $prefix = 'php' )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$dir` — @TODO
   -.n `:hc`$prefix` — @TODO

#&genRndTempnamPrefix  -#%s.method ```php:p.inline
 string public static <a href="#./genRndTempnamPrefix">genRndTempnamPrefix</a> ( string $dir, string $prefix )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$dir</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$prefix</code> — @TODO</li>
</ul>
<p>#&amp;tempnam  -#%s.method ```php:p.inline
void public static <a href="#./tempnam">tempnam</a> ( string $dir, string $prefix, callable $cb )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$dir` — @TODO
   -.n `:hc`$prefix` — @TODO
   -.n `:hc`$cb` — @TODO

#&open  -#%s.method ```php:p.inline
 resource public static <a href="#./open">open</a> ( string $path, string $flags, callable $cb, integer $mode = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$flags</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$mode</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<h4 id="lib/fs/file"><div class="in anchor">Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\FS;
class File;</code></pre>
<h5 id="lib/fs/file/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/file">Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">integer public priority = 10;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $chunkSize = 4096;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $offset = 0;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $fdCacheKey;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $append;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $path;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $writing = false;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $closed = false;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/fs/file/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/file">Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( resource $fd, string $path )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$fd` — @TODO
   -.n `:hc`$path` — @TODO

#&getFd  -#%s.method ```php:p.inline
 resource public <a href="#./getFd">getFd</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;convertFlags  -#%s.method ```php:p.inline
mixed public static <a href="#./convertFlags">convertFlags</a> ( string $mode, boolean $text = false )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$mode` — @TODO
   -.n `:hc`$text` — @TODO

#&truncate  -#%s.method ```php:p.inline
 resource public <a href="#./truncate">truncate</a> ( integer $offset = 0, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;stat  -#%s.method ```php:p.inline
resource public <a href="#./stat">stat</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&statRefresh  -#%s.method ```php:p.inline
 resource public <a href="#./statRefresh">statRefresh</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;statvfs  -#%s.method ```php:p.inline
resource public <a href="#./statvfs">statvfs</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&sync  -#%s.method ```php:p.inline
 resource public <a href="#./sync">sync</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;datasync  -#%s.method ```php:p.inline
resource public <a href="#./datasync">datasync</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&write  -#%s.method ```php:p.inline
 resource public <a href="#./write">write</a> ( string $data, callable $cb = null, integer $offset = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;chown  -#%s.method ```php:p.inline
resource public <a href="#./chown">chown</a> ( integer $uid, integer $gid = -1, callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$uid` — @TODO
   -.n `:hc`$gid` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&touch  -#%s.method ```php:p.inline
 resource public <a href="#./touch">touch</a> ( integer $mtime, integer $atime = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$mtime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$atime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;clearStatCache  -#%s.method ```php:p.inline
void public <a href="#./clearStatCache">clearStatCache</a> ( )</p>
<pre><code class="">   -.n @TODO

#&read  -#%s.method ```php:p.inline
 boolean public <a href="#./read">read</a> ( integer $length, integer $offset = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$length</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;sendfile  -#%s.method ```php:p.inline
boolean public <a href="#./sendfile">sendfile</a> ( mixed $outfd, callable $cb, callable $startCb = null, integer $offset = 0, integer $length = null, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$outfd` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$startCb` — @TODO
   -.n `:hc`$offset` — @TODO
   -.n `:hc`$length` — @TODO
   -.n `:hc`$pri` — @TODO

#&readahead  -#%s.method ```php:p.inline
 resource public <a href="#./readahead">readahead</a> ( integer $length, integer $offset = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$length</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;readAll  -#%s.method ```php:p.inline
boolean public <a href="#./readAll">readAll</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&readAllChunked  -#%s.method ```php:p.inline
 resource public <a href="#./readAllChunked">readAllChunked</a> ( callable $cb = null, callable $chunkcb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$chunkcb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
<p>#&amp;<strong>toString  -#%s.method ```php:p.inline
string public &lt;a href="#./</strong>toString">__toString</a> ( )</p>
<pre><code class="">   -.n @TODO

#&setChunkSize  -#%s.method ```php:p.inline
 void public <a href="#./setChunkSize">setChunkSize</a> ( integer $n )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — @TODO</li>
</ul>
<p>#&amp;seek  -#%s.method ```php:p.inline
resource public <a href="#./seek">seek</a> ( integer $offset, callable $cb, integer $pri = EIO_PRI_DEFAULT )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$offset` — @TODO
   -.n `:hc`$cb` — @TODO
   -.n `:hc`$pri` — @TODO

#&tell  -#%s.method ```php:p.inline
 integer public <a href="#./tell">tell</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;close  -#%s.method ```php:p.inline
resource public <a href="#./close">close</a> ( )</p>
<pre><code class="">   -.n @TODO

#&__destruct  -#%s.method ```php:p.inline
 void public <a href="#./__destruct">__destruct</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<h4 id="lib/fs/filewatcher"><div class="in anchor">Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\FS;
class FileWatcher;</code></pre>
<h5 id="lib/fs/filewatcher/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filewatcher">Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public files = [];</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">resource public $inotify;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $descriptors = [];</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/fs/filewatcher/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filewatcher">Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( )</p>
<pre><code class="">   -.n @TODO

#&addWatch  -#%s.method ```php:p.inline
 boolean public <a href="#./addWatch">addWatch</a> ( string $path, mixed $subscriber, integer $flags = NULL )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$subscriber</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$flags</code> — @TODO</li>
</ul>
<p>#&amp;rmWatch  -#%s.method ```php:p.inline
boolean public <a href="#./rmWatch">rmWatch</a> ( string $path, mixed $subscriber )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$path` — @TODO
   -.n `:hc`$subscriber` — @TODO

#&onFileChanged  -#%s.method ```php:p.inline
 void public <a href="#./onFileChanged">onFileChanged</a> ( string $path )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
</ul>
<p>#&amp;watch  -#%s.method ```php:p.inline
void public <a href="#./watch">watch</a> ( )</p>
<pre><code class="">   -.n @TODO

### pubsub # PubSub #> PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\PubSub;</code></pre>
<h4 id="lib/fs/pubsub"><div class="in anchor">Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\PubSub;
class PubSub;</code></pre>
<h5 id="lib/fs/pubsub/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/pubsub">Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;eventExists  -#%s.method ```php:p.inline
boolean public <a href="#./eventExists">eventExists</a> ( string $id )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$id` — @TODO

#&sub  -#%s.method ```php:p.inline
 [PubSubEvent](#../../pubsubevent) public <a href="#./sub">sub</a> ( string $id, object $obj, callable $cb )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$obj</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
</ul>
<p>#&amp;addEvent  -#%s.method ```php:p.inline
void public <a href="#./addEvent">addEvent</a> ( string $id, PubSubEvent $obj )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$id` — @TODO
   -.n `:hc`$obj` — @TODO

#&removeEvent  -#%s.method ```php:p.inline
 void public <a href="#./removeEvent">removeEvent</a> ( string $id )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
</ul>
<p>#&amp;unsub  -#%s.method ```php:p.inline
<a href="#../../pubsubevent">PubSubEvent</a> public <a href="#./unsub">unsub</a> ( string $id, object $obj )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$id` — @TODO
   -.n `:hc`$obj` — @TODO

#&pub  -#%s.method ```php:p.inline
 [PubSubEvent](#../../pubsubevent) public <a href="#./pub">pub</a> ( string $id, mixed $data )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$data</code> — @TODO</li>
</ul>
<p>#&amp;unsubFromAll  -#%s.method ```php:p.inline
boolean public <a href="#./unsubFromAll">unsubFromAll</a> ( object $obj )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$obj` — @TODO

#### pubsubevent # Класс PubSubEvent <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSubEvent.php"><i class="fa fa-github"></i></a>

```php:p
namespace PHPDaemon\PubSub;
class PubSubEvent extends \[SplObjectStorage](http://php.net/manual/class.splobjectstorage.php);</code></pre>
<h5 id="lib/fs/pubsub/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/pubsub">Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $sub = [ ];</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">callable public $actCb;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">callable public $deactCb;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/fs/pubsub/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/pubsub">Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( callable $act = null, callable $deact = null )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$act` — @TODO
   -.n `:hc`$deact` — @TODO

#&onActivation  -#%s.method ```php:p.inline
 [PubSubEvent](#../) public <a href="#./onActivation">onActivation</a> ( callable $cb )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
</ul>
<p>#&amp;onDeactivation  -#%s.method ```php:p.inline
<a href="#../">PubSubEvent</a> public <a href="#./onDeactivation">onDeactivation</a> ( callable $cb )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$cb` — @TODO

#&init  -#%s.method ```php:p.inline
 [PubSubEvent](#../) public static <a href="#./init">init</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;sub  -#%s.method ```php:p.inline
<a href="#../">PubSubEvent</a> public <a href="#./sub">sub</a> ( object $obj, callable $cb )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$obj` — @TODO
   -.n `:hc`$cb` — @TODO

#&unsub  -#%s.method ```php:p.inline
 [PubSubEvent](#../) public <a href="#./unsub">unsub</a> ( object $obj )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$obj</code> — @TODO</li>
</ul>
<p>#&amp;pub  -#%s.method ```php:p.inline
<a href="#../">PubSubEvent</a> public <a href="#./pub">pub</a> ( mixed $data )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$data` — @TODO

### sockjs # SockJS #> SockJS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\SockJS;</code></pre>
<h4 id="lib/fs/application"><div class="in anchor">Класс Application <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS/Application.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\SockJS;
class Application extends \PHPDaemon\Core\AppInstance;</code></pre>
<h5 id="lib/fs/application/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/application">Класс Application <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS/Application.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<p>#&amp;getLocalSubscribersCount  -#%s.method ```php:p.inline
public function <a href="#./getLocalSubscribersCount">getLocalSubscribersCount</a> ( $chan )</p>
<pre><code class="">   -.n @DESC
   -.n.ti `:hc`$params` — params

#&subscribe  -#%s.method ```php:p.inline
 public function <a href="#./subscribe">subscribe</a> ( $chan, $cb, $opcb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;setnx  -#%s.method ```php:p.inline
public function <a href="#./setnx">setnx</a> ( $key, $value, $cb = null )</p>
<pre><code class="">   -.n @DESC
   -.n.ti `:hc`$params` — params

#&setkey  -#%s.method ```php:p.inline
 public function <a href="#./setkey">setkey</a> ( $key, $value, $cb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;getkey  -#%s.method ```php:p.inline
public function <a href="#./getkey">getkey</a> ( $key, $cb = null )</p>
<pre><code class="">   -.n @DESCNS
   -.n.ti `:hc`$params` — params

#&expire  -#%s.method ```php:p.inline
 public function <a href="#./expire">expire</a> ( $key, $seconds, $cb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;unsubscribe  -#%s.method ```php:p.inline
public function <a href="#./unsubscribe">unsubscribe</a> ( $chan, $cb, $opcb = null )</p>
<pre><code class="">   -.n @DESC
   -.n.ti `:hc`$params` — params

#&unsubscribeReal  -#%s.method ```php:p.inline
 public function <a href="#./unsubscribeReal">unsubscribeReal</a> ( $chan, $opcb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;publish  -#%s.method ```php:p.inline
public function <a href="#./publish">publish</a> ( $chan, $cb, $opcb = null )</p>
<pre><code class="">   -.n @DESC
   -.n.ti `:hc`$params` — params

#&onReady  -#%s.method ```php:p.inline
 public function <a href="#./onReady">onReady</a> (  )</code></pre>
<ul>
<li class="n">@DESCспользуется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;onFinish  -#%s.method ```php:p.inline
public function <a href="#./onFinish">onFinish</a> (  )</p>
<pre><code class="">   -.n @DESCпользуется в DNS
   -.n.ti `:hc`$params` — params

#&attachWss  -#%s.method ```php:p.inline
 public function <a href="#./attachWss">attachWss</a> ( $wss )</code></pre>
<ul>
<li class="n">@DESCуется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;wsHandler  -#%s.method ```php:p.inline
public function <a href="#./wsHandler">wsHandler</a> ( $ws, $path, $client, $state )</p>
<pre><code class="">   -.n @DESC
   -.n.ti `:hc`$params` — params

#&detachWss  -#%s.method ```php:p.inline
 public function <a href="#./detachWss">detachWss</a> ( $wss )</code></pre>
<ul>
<li class="n">@DESCуется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;beginSession  -#%s.method ```php:p.inline
public function <a href="#./beginSession">beginSession</a> ( $path, $sessId, $server )</p>
<pre><code class="">   -.n @DESC
   -.n.ti `:hc`$params` — params

#&getRouteOptions  -#%s.method ```php:p.inline
 public function <a href="#./getRouteOptions">getRouteOptions</a> ( $path )</code></pre>
<ul>
<li class="n">@DESC DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;endSession  -#%s.method ```php:p.inline
public function <a href="#./endSession">endSession</a> ( $session )</p>
<pre><code class="">   -.n @DESC в DNS
   -.n.ti `:hc`$params` — params

#&beginRequest  -#%s.method ```php:p.inline
 public function <a href="#./beginRequest">beginRequest</a> ( $req, $upstream )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
<p>#&amp;callMethod  -#%s.method ```php:p.inline
public function <a href="#./callMethod">callMethod</a> ( $method, $req, $upstream )</p>
<pre><code class="">   -.n @DESC
   -.n.ti `:hc`$params` — params

## apps # Приложения

### mongonode # MongoNode #> MongoNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/MongoNode.php"><i class="fa fa-github"></i></a>

```php:p
namespace PHPDaemon\Examples;
class MongoNode;</code></pre>
<p>Это приложение предоставляет узел репликации MongoDB. Это дает возможность устанавливать произвольные хуки на добавление/изменение/удаление объектов.</p>
<h4 id="lib/fs/requirements"><div class="in anchor">Требования<span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>Требуется установленный модуль pecl/mongo и включенный phpdaemon/MongoCllient.</p>
<h4 id="lib/fs/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>Когда MongoNode включено, оно незамедлительно получает новые изменения в базе.</p>
<p>По-умолчанию:</p>
<p>Если объект обладает свойством “_key” сериализованное его значение отправляется в ключ Memcache под тем названием, которое задано в значении _key. Когда объект удаляется из MongoDB, он удаляется и из Memcache.</p>
<p>Если объект имеет свойство “_ev”, его значение отправляется в RTEP-событие под тем названием, которое задано в значении _ev.</p>
<h3 id="lib/telnethoneypot"><div class="in anchor">TelnetHoneypot <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/TelnetHoneypot.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Examples;
class TelnetHoneypot;</code></pre>
<p>Это приложение предоставляет простой telnet сервер для phpDaemon.</p>
<h4 id="lib/telnethoneypot/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#lib/telnethoneypot">TelnetHoneypot <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/TelnetHoneypot.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code>[root@gf-home-server phpdaemon.wiki]# telnet 127.0.0.1 23
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
ping
pong</code></pre>
<h3 id="lib/serverstatus"><div class="in anchor">ServerStatus <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Applications/ServerStatus.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Applications;
class ServerStatus;</code></pre>
<p>Это приложение обеспечивает получение информации о состоянии phpDaemon по протоколу HTTP, аналогично консольной команде <code>phpd fullstatus</code>.</p>
<h4 id="lib/serverstatus/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#lib/serverstatus">ServerStatus <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Applications/ServerStatus.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>Необходимо добавить в <code>conf/phpd.conf</code>:</p>
<pre><code class="">ServerStatus {
    enable    1;
}
HTTP {
    enable 1;
    privileged;
}</code></pre>
<p>Также в <code>conf/AppResolver.php</code> в методе <code>getRequestRoute()</code> добавить условие для запуска метода <code>beginRequest()</code> в приложении ServerStatus. Например, чтобы получить информацию о phpDaemon по адресу http://<host>/ServerStatus/:</p>
<pre><code class="php">/**
 * Routes incoming request to related application. Method is for overloading.   
 * @param object Request.
 * @param object AppInstance of Upstream.
 * @return string Application's name.
 */
public function getRequestRoute($req, $upstream) {
    if (preg_match('~^/(ServerStatus|Example)/~', $req->attrs->server['DOCUMENT_URI'], $m)) {
        return $m[1];
    }
}</code></pre>
<p>Пример ответа:</p>
<pre><code class="">Uptime: 1 day. 11 hour. 33 min. 51 sec.
State of workers:
        Total: 4
        Idle: 4
        Busy: 0
        Shutdown: 20
        Pre-init: 0
        Wait-init: 0
        Init: 0</code></pre>
<h4 id="lib/serverstatus/note"><div class="in anchor">Примечание<span class="header-path"> <i>&larr;</i> <a href="#lib/serverstatus">ServerStatus <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Applications/ServerStatus.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<p>Если вы используете опцию --logworkersetstatus, то соответствие такое:</p>
<ul>
<li>1 - idle</li>
<li>2 - busy</li>
<li>3 - shutdown</li>
<li>4 - pre-init</li>
<li>5 - wait-init</li>
<li>6 - init</li>
</ul>
<h2 id="utils"><div class="in anchor">Утилиты</div>

</h2>
<h3 id="utils/binary"><div class="in anchor">Binary <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Binary.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class Binary;</code></pre>
<p>Данный класс предоставляет набор статических методов для работы с бинарными данными.</p>
<h4 id="utils/binary/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/binary">Binary <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Binary.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;labels  -#%s.method ```php:p.inline
string public static <a href="#./labels">labels</a> ( string $q )</p>
<pre><code class="">   -.n Возвращает структуру имен. Используется в DNS
   -.n.ti `:hc`$q` — Список имен через точку

#&parseLabels  -#%s.method ```php:p.inline
 string public static <a href="#./parseLabels">parseLabels</a> ( string &$data, string $orig = null )</code></pre>
<ul>
<li class="n">азбирает структуру имен. Используется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">&$data</code> — Структура</li>
<li class="n"><code class="code_highlight php clear">$orig</code> — Изначальный пакет данных для обработки ссылок на подстроки</li>
</ul>
<p>#&amp;LV  -#%s.method ```php:p.inline
string public static <a href="#./LV">LV</a> ( string $str, integer $len = 1, boolean $lrev = false )</p>
<pre><code class="">   -.n Возвращает структуру Длина-Значение
   -.n.ti `:hc`$str` — Значение
   -.n `:hc`$len` — Количество байтов для записи длины
   -.n `:hc`$lrev` — Если true, то Little-Endian

#&LVnull  -#%s.method ```php:p.inline
 string public static <a href="#./LVnull">LVnull</a> ( string $str )</code></pre>
<ul>
<li class="n">Возвращает структуру Длина-Значение с Little-Endian размером длины в два байта и NUL-байтом после строки</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Значение</li>
</ul>
<p>#&amp;byte  -#%s.method ```php:p.inline
string public static <a href="#./byte">byte</a> ( integer $int )</p>
<pre><code class="">   -.n Кодирует целое число в один байт
   -.n.ti `:hc`$int` — Число от 0 до 255

#&word  -#%s.method ```php:p.inline
 string public static <a href="#./word">word</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в два байта</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 65535</li>
</ul>
<p>#&amp;wordl  -#%s.method ```php:p.inline
string public static <a href="#./wordl">wordl</a> ( integer $int )</p>
<pre><code class="">   -.n Кодирует целое число в два байта Little-Endian
   -.n.ti `:hc`$int` — Целое от 0 до 65535

#&dword  -#%s.method ```php:p.inline
 string public static <a href="#./dword">dword</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в четыре байта</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 4294967295</li>
</ul>
<p>#&amp;dwordl  -#%s.method ```php:p.inline
string public static <a href="#./dwordl">dwordl</a> ( integer $int )</p>
<pre><code class="">   -.n Кодирует целое число в четыре байта Little-Endian
   -.n.ti `:hc`$int` — Целое от 0 до 4294967295

#&qword  -#%s.method ```php:p.inline
 string public static <a href="#./qword">qword</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в восемь байт</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 18446744073709551615</li>
</ul>
<p>#&amp;qwordl  -#%s.method ```php:p.inline
string public static <a href="#./qwordl">qwordl</a> ( integer $int )</p>
<pre><code class="">   -.n Кодирует целое число в восемь байт Little-Endian
   -.n.ti `:hc`$int` — Целое от 0 до 18446744073709551615

#&getByte  -#%s.method ```php:p.inline
 integer public static <a href="#./getByte">getByte</a> ( string &$p )</code></pre>
<ul>
<li class="n">Удаляет первый байт из строки и возвращает его в виде целого числа от 0 до 255</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
</ul>
<p>#&amp;getChar  -#%s.method ```php:p.inline
string public static <a href="#./getChar">getChar</a> ( string &amp;$p )</p>
<pre><code class="">   -.n Удаляет первый байт из строки и возвращает его в виде строки
   -.n.ti `:hc`&$p` — Строка

#&getWord  -#%s.method ```php:p.inline
 integer public static <a href="#./getWord">getWord</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые два байта из строки и возвращает их в виде целого числа от 0 до 65535</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
<p>#&amp;getStrWord  -#%s.method ```php:p.inline
string public static <a href="#./getStrWord">getStrWord</a> ( string &amp;$p, boolean $l = false )</p>
<pre><code class="">   -.n Удаляет первые два байта из строки и возвращает их
   -.n.ti `:hc`&$p` — Строка
   -.n `:hc`$l` — Если true, то Little-Endian

#&getDWord  -#%s.method ```php:p.inline
 integer public static <a href="#./getDWord">getDWord</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые четыре байта из строки и возвращает их в виде целого от 0 до 4294967295</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
<p>#&amp;getQword  -#%s.method ```php:p.inline
integer public static <a href="#./getQword">getQword</a> ( string &amp;$p, boolean $l = false )</p>
<pre><code class="">   -.n Удаляет первые восемь байт из строки и возвращает их в виде целого от 0 до 18446744073709551615
   -.n.ti `:hc`&$p` — Строка
   -.n `:hc`$l` — Если true, то Little-Endian

#&getStrQWord  -#%s.method ```php:p.inline
 string public static <a href="#./getStrQWord">getStrQWord</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые восемь байт из строки и возвращает их в виде строки</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
<p>#&amp;getString  -#%s.method ```php:p.inline
string public static <a href="#./getString">getString</a> ( string &amp;$str )</p>
<pre><code class="">   -.n Возвращает подстроку до первого NUL-байта и удаляет её из исходной вместе с NUL-байтом
   -.n.ti `:hc`&$str` — Строка

#&getLV  -#%s.method ```php:p.inline
 string public static <a href="#./getLV">getLV</a> ( string &$p, boolean $l = 1, boolean $nul = false, boolean $lrev = false )</code></pre>
<ul>
<li class="n">Разбирает пару Длина-Значение, удаляет её из начала исходной строки и возвращает значение</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Количество байтов для записи длины</li>
<li class="n"><code class="code_highlight php clear">$nul</code> — Если true, то воспринимать как NUL-завершенную строку</li>
<li class="n"><code class="code_highlight php clear">$lrev</code> — Если true, то Little-Endian</li>
</ul>
<p>#&amp;flags2bitarray  -#%s.method ```php:p.inline
string public static <a href="#./flags2bitarray">flags2bitarray</a> ( array $flags, integer $len = 4 )</p>
<pre><code class="">   -.n Кодирует массив флагов (числа должны быть степенями двойки – 2, 4, 16, 32...)
   -.n.ti `:hc`$flags` — массив чисел
   -.n `:hc`$len` — Количество байтов на выходе

#&int2bytes  -#%s.method ```php:p.inline
 string public static <a href="#./int2bytes">int2bytes</a> ( integer $len, integer $int = 0, boolean $l = false )</code></pre>
<ul>
<li class="n">Кодирует целое число</li>
<li class="n ti"><code class="code_highlight php clear">$len</code> — Количество байтов на выходе</li>
<li class="n"><code class="code_highlight php clear">$int</code> — Целое число</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
<p>#&amp;i2b  -#%s.method ```php:p.inline
string public static <a href="#./i2b">i2b</a> ( integer $len, integer $int = 0, boolean $l = false )</p>
<pre><code class="">   -.n Псевдоним метода `:hc`int2bytes`

#&bytes2int  -#%s.method ```php:p.inline
 integer public static <a href="#./bytes2int">bytes2int</a> ( string $str, boolean $l = false )</code></pre>
<ul>
<li class="n">Конвертирует строку в целое число</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Строку</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
<p>#&amp;b2i  -#%s.method ```php:p.inline
integer public static <a href="#./b2i">b2i</a> ( string $str, boolean $l = false )</p>
<pre><code class="">   -.n Псевдоним метода `:hc`bytes2int`

#&bitmap2bytes  -#%s.method ```php:p.inline
 string public static <a href="#./bitmap2bytes">bitmap2bytes</a> ( string $bitmap, integer $check_len = 0 )</code></pre>
<ul>
<li class="n">Конвертирует побитовое представление в массив байтов</li>
<li class="n ti"><code class="code_highlight php clear">$bitmap</code> — Строка состоящая из 1 и 0</li>
<li class="n"><code class="code_highlight php clear">$check_len</code> — Ожидаемое количество байт на выходе, при несовпадении будет возвращено false</li>
</ul>
<p>#&amp;getbitmap  -#%s.method ```php:p.inline
string public static <a href="#./getbitmap">getbitmap</a> ( string $byte )</p>
<pre><code class="">   -.n Получить побитовое представление в виде строки из 1 и 0
   -.n.ti `:hc`$byte` — Строка из одного байта

### crypt # Crypt #> Crypt <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Crypt.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Utils;
class Crypt;</code></pre>
<p>Данный класс содержит методы, относящиеся к криптографии.</p>
<h4 id="utils/binary/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/binary">Binary <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Binary.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;hash  -#%s.method ```php:p.inline
string public static <a href="#./hash">hash</a> ( string $str, string $salt = '', boolean $plain = false )</p>
<pre><code class="">   -.n Возвращает хеш строки по алгоритму Keccak
   -.n.ti `:hc`$str` — исходная строка
   -.n `:hc`$salt` — примесь для хеширования
   -.n `:hc`$plain` — если `false` то результат будет закодирован в base64

#&randomString  -#%s.method ```php:p.inline
 string public static <a href="#./randomString">randomString</a> ( integer $len = 64, string $chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-.' )</code></pre>
<ul>
<li class="n">Генерирует псевдослучайную строку длиной <code class="code_highlight php clear">$len</code> из представленных в <code class="code_highlight php clear">$chars</code> символов</li>
<li class="n ti"><code class="code_highlight php clear">$len</code> — длина выходной строки</li>
<li class="n"><code class="code_highlight php clear">$chars</code> — набор используемых символов</li>
</ul>
<p>#&amp;compareStrings  -#%s.method ```php:p.inline
boolean public static <a href="#./compareStrings">compareStrings</a> ( string $a, string $b )</p>
<pre><code class="">   -.n Сравнение строк устойчивое к атаке по времени (англ. Timing attack)
   -.n.ti `:hc`$a, $b` — Строки для сравнения

### datetime # DateTime #> DateTime <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/DateTime.php"><i class="fa fa-github"></i></a>

```php:p
namespace PHPDaemon\Utils;
class DateTime extends \[DateTime](http://php.net/manual/class.datetime.php);</code></pre>
<p>В конструтор можно передавать метку времени Unix.</p>
<h4 id="utils/binary/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/binary">Binary <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Binary.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;diffAsText  -#%s.method ```php:p.inline
string public static <a href="#./diffAsText">diffAsText</a> ( mixed $datetime1, mixed $datetime2, boolean $absolute = false )</p>
<pre><code class="">   -.n Возвращает разницу двух временных меток в виде строки. Пример: `:c`1 year. 2 mon. 6 day. 4 hours. 21 min. 10 sec.`
   -.n.ti `:hc`$datetime1, $datetime2` — временные метки. Может быть объектом <a target="_blank" class="tpl-outlink" href="http://php.net/manual/class.datetimeinterface.php">DateTimeInterface<i class="fa fa-external-link"></i></a>, строкой или меткой времени Unix
   -.n `:hc`$absolute` — используется, чтобы вернуть абсолютную разницу

 -.method.fake &nbsp;

### encoding # Encoding #> Encoding <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Encoding.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Utils;
class Encoding;</code></pre>
<p>Сторонняя библиотека — <a target="_blank" class="tpl-outlink" href="https://github.com/neitanod/forceutf8">forceutf8<i class="fa fa-external-link"></i></a></p>
<h4 id="utils/binary/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/binary">Binary <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Binary.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;toUTF8  -#%s.method ```php:p.inline
string public static <a href="#./toUTF8">toUTF8</a> ( string $text )</p>
<pre><code class="">   -.n Приводит текст к UTF-8
   -.n.ti `:hc`$text` — Текст

#&toWin1252  -#%s.method ```php:p.inline
 string public static <a href="#./toWin1252">toWin1252</a> ( string $text )</code></pre>
<ul>
<li class="n">Приводит к текст к Windows-1251</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
<p>#&amp;toISO8859  -#%s.method ```php:p.inline
string public static <a href="#./toISO8859">toISO8859</a> ( string $text )</p>
<pre><code class="">   -.n Приводит к текст к ISO-8859
   -.n.ti `:hc`$text` — Текст

#&toLatin1  -#%s.method ```php:p.inline
 string public static <a href="#./toLatin1">toLatin1</a> ( string $text )</code></pre>
<ul>
<li class="n">Приводит к текст к Windows-1251</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
<p>#&amp;fixUTF8  -#%s.method ```php:p.inline
string public static <a href="#./fixUTF8">fixUTF8</a> ( string $text )</p>
<pre><code class="">   -.n Исправляет UTF-8
   -.n.ti `:hc`$text` — Текст

#&UTF8FixWin1252Chars  -#%s.method ```php:p.inline
 string public static <a href="#./UTF8FixWin1252Chars">UTF8FixWin1252Chars</a> ( string $text )</code></pre>
<ul>
<li class="n">Исправляет UTF-8 после конвертации из Windows-1252 так, будто это была ISO-8859</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
<p>#&amp;removeBOM  -#%s.method ```php:p.inline
string public static <a href="#./removeBOM">removeBOM</a> ( string $str = "" )</p>
<pre><code class="">   -.n Удаляет Byte-order mark
   -.n.ti `:hc`$str` — Текст

#&normalizeEncoding  -#%s.method ```php:p.inline
 string public static <a href="#./normalizeEncoding">normalizeEncoding</a> ( string $encodingLabel )</code></pre>
<ul>
<li class="n">Приводит название кодировки к стандартной записи</li>
<li class="n ti"><code class="code_highlight php clear">$encodingLabel</code> — Название кодировки</li>
</ul>
<h3 id="utils/irc"><div class="in anchor">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class IRC;</code></pre>
<p>Класс используемый в IRC-клиенте и IRC-баунсере</p>
<h4 id="utils/irc/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/irc">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;getCommandByCode  -#%s.method ```php:p.inline
string public static <a href="#./getCommandByCode">getCommandByCode</a> ( integer $code )</p>
<pre><code class="">   -.n Возвращает строковое представление команды по её коду
   -.n.ti `:hc`$code` — код команды

#&getCodeByCommand  -#%s.method ```php:p.inline
 string public static <a href="#./getCodeByCommand">getCodeByCommand</a> ( string $cmd )</code></pre>
<ul>
<li class="n">Возвращает код команды по её строковому представлению</li>
<li class="n ti"><code class="code_highlight php clear">$cmd</code> — строковое представление команды</li>
</ul>
<p>#&amp;parseUsermask  -#%s.method ```php:p.inline
string public static <a href="#./parseUsermask">parseUsermask</a> ( string $mask )</p>
<pre><code class="">   -.n Возвращает ассоциативный массив вида {nick: string, unverified: bool, user: string, host: string, orig: string}
   -.n.ti `:hc`$mask` — маска вида `nick!~?user@host`

### mime # MIME #> MIME <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/MIME.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Utils;
class MIME;</code></pre>
<h4 id="utils/irc/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/irc">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;get  -#%s.method ```php:p.inline
string public static <a href="#./get">get</a> ( string $path )</p>
<pre><code class="">   -.n Возвращает MIME-заголовок файла или `false`
   -.n.ti `:hc`$path` — путь до файла

 -.method.fake &nbsp;

### shmentity # ShmEntity #> ShmEntity <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/ShmEntity.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Utils;
class ShmEntity;</code></pre>
<p>Эластичное хранилище кучи в разделяемой памяти</p>
<blockquote>
<p>Используется для хранения массива состояний рабочих процессов</p>
</blockquote>
<h4 id="utils/irc/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/irc">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
string public &lt;a href="#./</strong>construct">__construct</a> ( string $path, integer $segsize, string $name, boolean $create = false )</p>
<pre><code class="">   -.n Конструктор
   -.n.ti `:hc`$path` — путь до файла
   -.n `:hc`$segsize` — размер сегмента
   -.n `:hc`$name` — название
   -.n `:hc`$create` — флаг создания сегмента

#&open  -#%s.method ```php:p.inline
 string public <a href="#./open">open</a> ( integer $segno = 0, boolean $create = false )</code></pre>
<ul>
<li class="n">Открывает сегмент разделяемой памяти</li>
<li class="n ti"><code class="code_highlight php clear">$segno</code> — номер сегмента</li>
<li class="n"><code class="code_highlight php clear">$create</code> — флаг создания сегмента</li>
</ul>
<p>#&amp;getSegments  -#%s.method ```php:p.inline
string public <a href="#./getSegments">getSegments</a> ( )</p>
<pre><code class="">   -.n Возвращает индексный массив всех сегментов

#&openall  -#%s.method ```php:p.inline
 string public <a href="#./openall">openall</a> ( )</code></pre>
<ul>
<li class="n">Открывает все сегменты</li>
</ul>
<p>#&amp;write  -#%s.method ```php:p.inline
string public <a href="#./write">write</a> ( string $data, integer $offset )</p>
<pre><code class="">   -.n Записывает данные `:hc`$data` со смещением `:hc`$offset`
   -.n.ti `:hc`$data` — данные
   -.n `:hc`$offset` — смещение

#&read  -#%s.method ```php:p.inline
 string public <a href="#./read">read</a> ( integer $offset, integer $length = 1 )</code></pre>
<ul>
<li class="n">Считывает данные длиной <code class="code_highlight php clear">$length</code> со смещением <code class="code_highlight php clear">$offset</code></li>
<li class="n ti"><code class="code_highlight php clear">$offset</code> — смещение</li>
<li class="n"><code class="code_highlight php clear">$length</code> — длина читаемых данных</li>
</ul>
<p>#&amp;delete  -#%s.method ```php:p.inline
string public <a href="#./delete">delete</a> ( )</p>
<pre><code class="">   -.n Удаляет все сегменты

### terminal # Terminal #> Terminal <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Terminal.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Utils;
class Terminal;</code></pre>
<p><a target="_self" class="tpl-catimg" href="#contribute/code"><img src="/docs/imgs/cat.png" style="padding-right: 6px;" align="left"></a><br />Данный класс нуждается в доработке: не хватает полноценной поддержки ncurses.
Если хотите помочь, нажмите на кота!<br /></p>
<h4 id="utils/irc/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/irc">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;readln  -#%s.method ```php:p.inline
string public <a href="#./readln">readln</a> ( )</p>
<pre><code class="">   -.n @TODO

#&enableColor  -#%s.method ```php:p.inline
 void public <a href="#./enableColor">enableColor</a> ( boolean $bool = true )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$bool</code> — @TODO</li>
</ul>
<p>#&amp;clearScreen  -#%s.method ```php:p.inline
void public <a href="#./clearScreen">clearScreen</a> ( )</p>
<pre><code class="">   -.n @TODO

#&setStyle  -#%s.method ```php:p.inline
 void public <a href="#./setStyle">setStyle</a> ( string $c )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$c</code> — @TODO</li>
</ul>
<p>#&amp;resetStyle  -#%s.method ```php:p.inline
void public <a href="#./resetStyle">resetStyle</a> ( )</p>
<pre><code class="">   -.n @TODO

#&drawParam  -#%s.method ```php:p.inline
 void public <a href="#./drawParam">drawParam</a> ( string $name, string $description, array $values = '' )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$description</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$values</code> — @TODO</li>
</ul>
<p>#&amp;drawTable  -#%s.method ```php:p.inline
void public <a href="#./drawTable">drawTable</a> ( array $rows )</p>
<pre><code class="">   -.n @TODO
   -.n.ti `:hc`$rows` — @TODO

## structures # Структуры

### object-storage # ObjectStorage #> ObjectStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/ObjectStorage.php"><i class="fa fa-github"></i></a>

```php:p
namespace PHPDaemon\Structures;
class ObjectStorage extends \[SplObjectStorage](http://php.net/manual/class.splobjectstorage.php);</code></pre>
<p>Данный класс предоставляет хранилище объектов с несколькими дополнительными методами</p>
<blockquote>
<p>Можно создавать классы-наследники</p>
</blockquote>
<h4 id="utils/irc/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/irc">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;each  -#%s.method ```php:p.inline
integer public <a href="#./each">each</a> ( string $method, mixed $arg, ... )</p>
<pre><code class="">   -.n Проходит по всем объектам, вызывая у каждого из них метод `:hc`$method` c заданными аргументами `:hc`$args` и возвращает количество объектов в хранилище
   -.n.ti `:hc`$method` — вызываемый метод объекта
   -.n `:hc`$arg, ...` — аргументы

#&removeAll  -#%s.method ```php:p.inline
 void public <a href="#./removeAll">removeAll</a> ( object $obj = null )</code></pre>
<ul>
<li class="n">Удаляет из текущего контейнера все объекты, которых нет в контейнере <code class="code_highlight php clear">$obj</code></li>
<li class="n ti"><code class="code_highlight php clear">$obj</code> — контейнер, содержащий элементы, которые должны остаться в текущем контейнере</li>
</ul>
<p>#&amp;detachFirst  -#%s.method ```php:p.inline
object public <a href="#./detachFirst">detachFirst</a> ( )</p>
<pre><code class="">   -.n Возвращает первый объект, удалив его из контейнера

#&getFirst  -#%s.method ```php:p.inline
 object public <a href="#./getFirst">getFirst</a> ( )</code></pre>
<ul>
<li class="n">Возвращает первый объект контейнера</li>
</ul>
<h3 id="utils/priority-queue-callbacks"><div class="in anchor">PriorityQueueCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/PriorityQueueCallbacks.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Structures;
class PriorityQueueCallbacks extends \<a href="http://php.net/manual/class.splpriorityqueue.php">SplPriorityQueue</a>;</code></pre>
<blockquote>
<p>Используется в <a target="_self" class="tpl-inlink" href="#network/client">Network/Client<i class="fa fa-caret-square-o-up"></i></a> для хранения вызовов, пока все доступные соединения заняты</p>
</blockquote>
<h4 id="utils/priority-queue-callbacks/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/priority-queue-callbacks">PriorityQueueCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/PriorityQueueCallbacks.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;enqueue  -#%s.method ```php:p.inline
void public <a href="#./enqueue">enqueue</a> ( callable $cb, integer $pri = 0 )</p>
<pre><code class="">   -.n Добавляет функцию обратного вызова в очередь и пересортирует её
   -.n.ti `:hc`$cb` — функция обратного вызова
   -.n `:hc`$pri` — приоритет

#&insert  -#%s.method ```php:p.inline
 void public <a href="#./insert">insert</a> ( callable $cb, integer $pri = 0 )</code></pre>
<ul>
<li class="n">Псевдоним метода <code class="code_highlight php clear">enqueue</code></li>
</ul>
<p>#&amp;dequeue  -#%s.method ```php:p.inline
CallbackWrapper public <a href="#./dequeue">dequeue</a> ( )</p>
<pre><code class="">   -.n Извлекает функцию обратного вызова из начала очереди и пересортирует её. Псевдоним метода `:hc`SplPriorityQueue::extract`

#&executeOne  -#%s.method ```php:p.inline
 boolean public <a href="#./executeOne">executeOne</a> ( mixed $arg, ... )</code></pre>
<ul>
<li class="n">Извлекает первую из начала очереди функцию обратного вызова и выполняет её с переданными аргументами. Возвращает <code>false</code> если очередь пуста</li>
<li class="n ti"><code class="code_highlight php clear">$arg, ...</code> — аргументы</li>
</ul>
<p>#&amp;executeAll  -#%s.method ```php:p.inline
integer public <a href="#./executeAll">executeAll</a> ( mixed $arg, ... )</p>
<pre><code class="">   -.n Извлекает и выполняет все функции обратного вызова в очереди с переданными аргументами. Возвращает количество выполненных функций обратного вызова
   -.n.ti `:hc`$arg, ...` — аргументы

### stack-callbacks # StackCallbacks #> StackCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/StackCallbacks.php"><i class="fa fa-github"></i></a>

```php:p
namespace PHPDaemon\Structures;
class StackCallbacks extends \[SplStack](http://php.net/manual/class.splstack.php);</code></pre>
<p>Данный класс предоставляет стек функций обратного вызова с несколькими дополнительными методами</p>
<blockquote>
<p>Используется в <a target="_self" class="tpl-inlink" href="#network/client">Network/Client<i class="fa fa-caret-square-o-up"></i></a> для хранения стека функций обратного вызова запросов</p>
</blockquote>
<h4 id="utils/priority-queue-callbacks/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/priority-queue-callbacks">PriorityQueueCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/PriorityQueueCallbacks.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;push  -#%s.method ```php:p.inline
void public <a href="#./push">push</a> ( callable $cb )</p>
<pre><code class="">   -.n Добавляет функцию обратного вызова в конец стека
   -.n.ti `:hc`$cb` — функция

#&unshift  -#%s.method ```php:p.inline
 void public <a href="#./unshift">unshift</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Добавляет функцию обратного вызова в начало стека</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция</li>
</ul>
<p>#&amp;executeOne  -#%s.method ```php:p.inline
boolean public <a href="#./executeOne">executeOne</a> ( mixed $arg, ... )</p>
<pre><code class="">   -.n Извлекает первую функцию обратного вызова из начала стека и выполняет её с переданными аргументами. Возвращает `false` если стек пуст
   -.n.ti `:hc`$arg` — аргументы

#&executeAndKeepOne  -#%s.method ```php:p.inline
 boolean public <a href="#./executeAndKeepOne">executeAndKeepOne</a> ( mixed $arg, ... )</code></pre>
<ul>
<li class="n">Выполяет первую функцию обратного вызова из начала стека с переданными аргументами без извлечения её из стека. Возвращает <code>false</code> если стек пуст</li>
<li class="n ti"><code class="code_highlight php clear">$arg, ...</code> — аргументы</li>
</ul>
<p>#&amp;executeAll  -#%s.method ```php:p.inline
integer public <a href="#./executeAll">executeAll</a> ( mixed $arg, ... )</p>
<pre><code class="">   -.n Извлекает все функции обратного вызова и выполняет с заданными аргументами. Возвращает количество выполненных функций.
   -.n.ti `:hc`$arg1, ...` — аргументы

#&toArray  -#%s.method ```php:p.inline
 array public <a href="#./toArray">toArray</a> ( )</code></pre>
<ul>
<li class="n">Возвращает индексный массив стека</li>
</ul>
<p>#&amp;reset  -#%s.method ```php:p.inline
void public <a href="#./reset">reset</a> ( )</p>
<pre><code class="">   -.n Удаляет все элементы из стека

## traits # Примеси

Примеси (англ. traits). <a target="_blank" class="tpl-outlink" href="http://php.net/traits"><i class="fa fa-external-link"></i></a>

Данный раздел описывает доступные для разработчиков встроенные примеси.

### class-watchdog # ClassWatchdog #> ClassWatchdog <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/ClassWatchdog.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Traits;
trait ClassWatchdog;</code></pre>
<blockquote>
<p>Данная примесь уже использована во всех базовых классах и при наследовании от них не нужно использовать её повторно.</p>
</blockquote>
<p>Эта примесь нужна, чтобы предотвратить появление ошибки уровня E_ERROR (Fatal error) при обращении к несуществующему методу. E_ERROR же прерывает работу всего рабочего процесса, что недопустимо в реалиях phpDaemon. Настоятельно рекомендуется к использованию во всех используемых классах.</p>
<p>Определены следующие <a target="_blank" class="tpl-outlink" href="http://php.net/language.oop5.magic">магические методы<i class="fa fa-external-link"></i></a>:</p>
<ul>
<li class="n ti"><code>__call</code> — бросает исключение UndefinedMethodCalled</li>
<li class="n ti"><code>__callStatic</code> — бросает исключение UndefinedMethodCalled</li>
</ul>
<h3 id="utils/static-object-watchdog"><div class="in anchor">StaticObjectWatchdog <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/StaticObjectWatchdog.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait StaticObjectWatchdog;</code></pre>
<blockquote>
<p>Данная примесь уже использована во всех базовых классах и при наследовании от них не нужно использовать её повторно.</p>
</blockquote>
<p>PHP-машина умеет хранить набор свойств объекта двумя способами: в виде фиксированного массива и в виде ассоциативной таблицы (англ. hash table) с использованием <a target="_blank" class="tpl-outlink" href="http://ru.wikipedia.org/wiki/B-дерево">B-дерева<i class="fa fa-external-link"></i></a>. Изначально, при создании любого объекта, свойства хранятся в виде массива с быстрым доступом. При первой попытке установить значение свойства не объявленного директивой <code><i>visibility</i> $<i>name</i></code>, набор свойств конвертируется в ассоциативную таблицу. То же самое происходит при удалении (<a target="_blank" class="tpl-outlink" href="http://php.net/unset">unset<i class="fa fa-external-link"></i></a>) любого свойства). Данная операция сама по себе не самая быстрая, особенно при большом количестве свойств), но и доступ к свойствам после неё замедляется. Разумеется, есть объекты с намеренно динамическим набором свойств, которые сродни ассоциативным массивам и с ними всё в порядке. Но часто бывает так, что программист забывает добавить объявление свойства или даже опечатывается в его названии. Порой это ведёт к сильному ухудшению производительности, которое трудно расследовать.</p>
<blockquote>
<p>Прежде чем говорить, что PHP медленный, неплохо бы научиться его готовить.</p>
</blockquote>
<p>Данная примесь определяет следующие магические методы:</p>
<ul>
<li class="n ti"><code>__set</code> — пишет в журнал с префиксом <code>[CODE WARN]</code> при попытке записать значение несуществующего или недоступного из этой области видимости свойства. </li>
<li class="n ti"><code>__unset</code> — пишет в журнал с префиксом <code>[CODE WARN]</code> при попытке удалить свойство.</li>
</ul>
<h3 id="utils/strict-static-object-watchdog"><div class="in anchor">StrictStaticObjectWatchdog <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/StrictStaticObjectWatchdog.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait StrictStaticObjectWatchdog;</code></pre>
<p>Поведение аналогично <a target="_self" class="tpl-inlink" href="#../static-object-watchdog">StaticObjectWatchdog<i class="fa fa-caret-square-o-up"></i></a>, но эта примесь бросает исключение, вместо записи в журнал.</p>
<p>Определяет следующие магические методы:</p>
<ul>
<li class="n ti"><code>__set</code> — бросает исключение UndefinedPropertySetting при попытке записать значение несуществующего или недоступного из этой области видимости свойства. </li>
<li class="n ti"><code>__unset</code> — бросает исключение UnsettingProperty при попытке удалить свойство.</li>
</ul>
<h3 id="utils/deferred-event-handlers"><div class="in anchor">DeferredEventHandlers <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/DeferredEventHandlers.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait DeferredEventHandlers;</code></pre>
<p>Данная примесь реализует механизм отложенных событий в объекте.</p>
<pre><code class="php">class MyClass {
    use \PHPDaemon\Traits\DeferredEventHandlers;
    protected function onSomethingEvent($foo, $bar) {
        return function($ev) {
            list ($foo, $bar = $ev->args;
            $ev->setResult("Foo is $foo, bar is $bar");
        };
    }
}
$o = new MyClass;
$o->onSomething(function($ev) {
    D($ev->result);
    // Foo is fooo, bar is barr
}, 'foo', 'barr');

$o->onSomething(function($ev) {
    D($ev->result);
    // Foo is fooo, bar is barr
});</code></pre>
<blockquote>
<p>При этом когда результат уже установлен, производящее его замыкание не будет вызвано повторно.
Не нужно беспокоиться о повторном вызове еще до того как результат установлен, ожидающие замыкания будут вызваны правильно.</p>
</blockquote>
<h3 id="utils/event-handlers"><div class="in anchor">EventHandlers <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/EventHandlers.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait EventHandlers;</code></pre>
<p>Данная примесь реализует простой механизм PUB/SUB для объекта.</p>
<pre><code class="php">class MyClass {
    use \PHPDaemon\Traits\EventHandlers;
}
$o = new MyClass;

$o->on('smth', function($o, $foo, $bar) {
    D("Foo is $foo, bar is $bar");
});

$o->trigger('smth', 'foo', 'barr');
</code></pre>
<blockquote>
<p>Не забывайте о том, что при удалении такого объекта необходимо вызвать метод <code>cleanupEventHandlers()</code>, чтобы избежать утечек памяти.</p>
</blockquote>
<h3 id="utils/sessions"><div class="in anchor">Sessions <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/Sessions.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait Sessions;</code></pre>
<p>Эта примесь реализует механизм сессий, именно реализует, а не является оберткой над <code>session_*</code> функциями.</p>
<p>Почему мы не можем использовать нативный механизм сессий PHP?</p>
<ul>
<li class="n"><strong>Проблема №1:</strong> В долго живущих процессах(обслуживающих больше одного клиента) суперглобальный массив <code>$_SESSION</code> не будет создаваться заново.  </li>
<li class="n"><strong>Проблема №2:</strong> Нативная реализация сессий является блокируюей, что расходится с идеологией PhpDaemon - обеспечить неблокирующий I/O.</li>
</ul>
<p>Как и нативная реализация, поведение сессий основывается на <code>php.ini</code>.</p>
<p>Текущая реализация поддерживает хранение сессий в файлах, <code>session.serialize_handler = php|php_binary</code>, lock <code>r+!</code> файлов - аналогичный нативному - для предотвращения race condition.</p>
<p>Вы можете безопасно использовать PhpDaemon c существующими сессиями, сериализация совместима с нативной
(См. <a target="_blank" class="tpl-outlink" href="http://php.net//manual/ru/function.session-encode.php">session_encode<i class="fa fa-external-link"></i></a>, <a target="_blank" class="tpl-outlink" href="http://php.net//manual/ru/function.session-decode.php">session_decode<i class="fa fa-external-link"></i></a>).</p>
<p>Пример использования:</p>
<pre><code class="php">$this->onSessionStart(function ($event) {
    if (!$event->getResult()) {
        //Session open failed
    }
    //Session open succeed
});</code></pre>
<blockquote>
<p>Данная примесь используется в <a target="_self" class="tpl-inlink" href="#HTTPRequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a> и <a target="_self" class="tpl-inlink" href="#servers/websocket/route">Servers\WebSocket\Route<i class="fa fa-caret-square-o-up"></i></a></p>
</blockquote>
<h3 id="utils/dnode"><div class="in anchor">DNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/WebSocket/Traits/DNode.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<p><code class="code_highlight php">trait \PHPDaemon\WebSocket\Traits\DNode</code></p>
<p>Данная примесь применима в классах-наследниках  <a target="_self" class="tpl-inlink" href="#servers/websocket/route">Servers\WebSocket\Route<i class="fa fa-caret-square-o-up"></i></a></p>
<p>Примесь реализует серверную часть протокола <a target="_blank" class="tpl-outlink" href="https://github.com/substack/dnode">DNode<i class="fa fa-external-link"></i></a>, который служит для <a target="_blank" class="tpl-outlink" href="http://ru.wikipedia.org/wiki/Удалённый_вызов_процедур">Удалённого вызова процедур<i class="fa fa-external-link"></i></a> (RPC).</p>
<p>Для подключение примеси нужно внести <code class="code_highlight php">use \PHPDaemon\WebSocket\Traits\DNode</code> в определение своего класса-наследника <a target="_self" class="tpl-inlink" href="#servers/websocket/route">Servers\WebSocket\Route<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Затем необходимо определить методы, доступные клиенту. Фактически это делает метод <a target="_self" class="tpl-inlink" href="#traits/dnode/methods/defineLocalMethods">defineLocalMethods<i class="fa fa-caret-square-o-up"></i></a>, который должен вызываться в <a target="_self" class="tpl-inlink" href="#servers/websocket/route/methods/onHandshake">onHandshake<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Давайте, для примера, создадим метод <code>dummy</code> с аргументами <code class="code_highlight php clear">$foo</code>, <code class="code_highlight php clear">$bar</code> и <code class="code_highlight php clear">$callback</code>:</p>
<pre><code class="php">protected function dummyMethod($foo, $bar, $callback) {
    if (!static::ensureCallback($callback)) {
        /* $callback не содержит функцию обратного вызова */
        return;
    }
    $callback(md5($foo ^ $bar));
}</code></pre>
<p>При обращении <code class="code_highlight php">dummy('Hello', 'World', function(result) {...})</code> ответом будет вызов этой функции с аргументом <code>bd7815679056a50c3f545b159ce5e385</code> — результатом выполнения <code class="code_highlight php">md5('Hello' ^ 'World')</code></p>
<p>В качестве аргументов можно передавать передавать собственные функции обратного вызова, но учтите, что они удаляются  из памяти после вызова, если возвратное значение не является <code class="code_highlight php clear">true</code>. Таким образом, следует понимать ожидается ли повторный вызов, и в этом случае возвращать <code class="code_highlight php clear">true</code>. Это делается во избежание утечек памяти.</p>
<p>Для вызова удаленного метода по имени, используйте <a target="_self" class="tpl-inlink" href="#traits/dnode/methods/callRemote">callRemote<i class="fa fa-caret-square-o-up"></i></a>.</p>
<blockquote>
<p>Как вы могли заметить, пример <code>dummyMethod</code> использует вызов <code class="code_highlight php">static::ensureCallback($callback)</code>. Всегда нужно проверять переданный аргумент с помощью <a target="_self" class="tpl-inlink" href="#traits/dnode/methods/ensureCallback">ensureCallback<i class="fa fa-caret-square-o-up"></i></a> перед его исполнением. В противном случае, это обернётся серьёзной брешью безопасности.</p>
</blockquote>
<h4 id="utils/dnode/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/dnode">DNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/WebSocket/Traits/DNode.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;onHandshake  -#%s.method ```php:p.inline
void public <a href="#./onHandshake">onHandshake</a> ( )</p>
<pre><code class="">   -.n Default onHandshake() method

#&callLocal  -#%s.method ```php:p.inline
 [DNode](#../) public <a href="#./callLocal">callLocal</a> ( )</code></pre>
<ul>
<li class="n">Вызывает локальный метод</li>
</ul>
<p>#&amp;extractCallbacks  -#%s.method ```php:p.inline
void protected <a href="#./extractCallbacks">extractCallbacks</a> ( array &amp;$args, array &amp;$list, array &amp;$path )</p>
<pre><code class="">   -.n Извлекает функции обратного вызова из массива аргуметнов
   -.n.ti `:hc`&$args` — Аргументы
   -.n `:hc`&$list` — Выходной массив для свойства 'callbacks'
   -.n `:hc`&$path` — Текущий путь

#&callRemote  -#%s.method ```php:p.inline
 [DNode](#../) public <a href="#./callRemote">callRemote</a> ( )</code></pre>
<ul>
<li class="n">Вызов удаленного метода</li>
</ul>
<p>#&amp;callRemoteArray  -#%s.method ```php:p.inline
<a href="#../">DNode</a> public <a href="#./callRemoteArray">callRemoteArray</a> ( string $method, array $args )</p>
<pre><code class="">   -.n Вызов удаленного метода с передачей аргументов массивом
   -.n.ti `:hc`$method` — Название метода
   -.n `:hc`$args` — Аргументы

#&methodsMethod  -#%s.method ```php:p.inline
 void protected <a href="#./methodsMethod">methodsMethod</a> ( array $methods )</code></pre>
<ul>
<li class="n">Обработчик метода <code>methods</code></li>
<li class="n ti"><code class="code_highlight php clear">$methods</code> — Ассоциативный массив методов</li>
</ul>
<p>#&amp;toJsonDebugResursive  -#%s.method ```php:p.inline
void public <a href="#./toJsonDebugResursive">toJsonDebugResursive</a> ( mixed &amp;$m )</p>
<pre><code class="">   -.n Обработчик рекурсии для метода <a target="_self" class="tpl-inlink" href="#../toJsonDebug">toJsonDebug<i class="fa fa-caret-square-o-up"></i></a>
   -.n.ti `:hc`&$m` — Значение

#&toJsonDebug  -#%s.method ```php:p.inline
 string string public <a href="#./toJsonDebug">toJsonDebug</a> ( mixed $m )</code></pre>
<ul>
<li class="n">Возвращает JSON-представление массива в отладочных целях</li>
<li class="n ti"><code class="code_highlight php clear">$m</code> — Значение</li>
</ul>
<p>#&amp;onFinish  -#%s.method ```php:p.inline
void public <a href="#./onFinish">onFinish</a> ( )</p>
<pre><code class="">   -.n Вызывается когда сессия завершена

#&cleanup  -#%s.method ```php:p.inline
 void public <a href="#./cleanup">cleanup</a> ( )</code></pre>
<ul>
<li class="n">Очищает внутренние структуры</li>
</ul>
<p>#&amp;<strong>call  -#%s.method ```php:p.inline
mixed public &lt;a href="#./</strong>call">__call</a> ( string $m, array $args )</p>
<pre><code class="">   -.n Магический метод __call
   -.n.ti `:hc`$m` — Название метода
   -.n `:hc`$args` — Аргументы

#&onPacket  -#%s.method ```php:p.inline
 void public <a href="#./onPacket">onPacket</a> ( array $pct )</code></pre>
<ul>
<li class="n">Вызывается когда получен пакет</li>
<li class="n ti"><code class="code_highlight php clear">$pct</code> — Data</li>
</ul>
<p>#&amp;onFrame  -#%s.method ```php:p.inline
void public <a href="#./onFrame">onFrame</a> ( string $data, string $type )</p>
<pre><code class="">   -.n Вызывется когда получен фрейм
   -.n.ti `:hc`$data` — Содержимое фрейма
   -.n `:hc`$type` — Тип фрейма

## network # Сеть

### pool # Пул #> Пул <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Pool.php"><i class="fa fa-github"></i></a>

```php:p
namespace PHPDaemon\Network;
abstract class Pool extends [ObjectStorage](#structures/object-storage);</code></pre>
<p>Хранит в себе активные объекты <a target="_self" class="tpl-inlink" href="#network/connection">Соединение<i class="fa fa-caret-square-o-up"></i></a> и <a target="_self" class="tpl-inlink" href="#network/boundsocket">ОткрытыйСокет<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Пул (клиент или сервер) можно инстанцировать из пользовательского приложении, например:</p>
<pre><code class="php">$this->httpclient = \PHPDaemon\Clients\HTTP\Pool::getInstance();</code></pre>
<p>или</p>
<pre><code class="php">/* ... */
$this->pool = \PHPDaemon\Servers\FlashPolicy\Pool::getInstance([
    'listen' => 'tcp://0.0.0.0:843'
]);
$this->pool->onReady();
/* ... */</code></pre>
<p>Но не забывайте отправлять ему onReady(), onShutdown() и onConfigUpdated() события.</p>
<p>В большинстве случаев сервер запускается одноименнным приложением Pool.</p>
<pre><code class="ruby"># контекст для ssl соединения (опционально)
TransportContext:myContext {
    ssl;
    certFile "/path/to/cert.pem";
    pkFile "/path/to/privkey.pem";
    passphrase "";
    verifyPeer true;
    allowSelfSigned true;
}

# слушаем 80 и 443 порт
Pool:HTTPServer {
    listen "tcp://0.0.0.0:80", "tcp://0.0.0.0:443##myContext";
    port 80;
    privileged;
    maxconcurrency 1;
}</code></pre>
<h4 id="utils/dnode/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#utils/dnode">DNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/WebSocket/Traits/DNode.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">string public $connectionClass;</code></pre>
<p>Default connection class</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $name;</code></pre>
<p>Name</p>
</li>
<li class="method">
<pre class="inline"><code class="php">\PHPDaemon\Config\Section public $config;</code></pre>
<p>Configuration</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxConcurrency = 0;</code></pre>
<p>Max concurrency</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxAllowedPacket = 0;</code></pre>
<p>Max allowed packet</p>
</li>
<li class="method">
<pre class="inline"><code class="php">object public $appInstance;</code></pre>
<p>Application instance object</p>
</li>
</ul>
<h4 id="utils/dnode/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/dnode">DNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/WebSocket/Traits/DNode.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
public &lt;a href="#./</strong>construct">__construct</a> ( array $config = [], boolean $init = true )</p>
<pre><code class="">   -.n Constructor
   -.n.ti `:hc`$config` — Config variables
   -.n `:hc`$init` — @TODO

#&onReady  -#%s.method ```php:p.inline
 public <a href="#./onReady">onReady</a> ( )</code></pre>
<ul>
<li class="n">Called when the worker is ready to go</li>
</ul>
<p>#&amp;onConfigUpdated  -#%s.method ```php:p.inline
public <a href="#./onConfigUpdated">onConfigUpdated</a> ( )</p>
<pre><code class="">   -.n Called when worker is going to update configuration

#&getInstance  -#%s.method ```php:p.inline
 public static <a href="#./getInstance">getInstance</a> ( string $arg = '', boolean $spawn = true )</code></pre>
<ul>
<li class="n">Returns instance object</li>
<li class="n ti"><code class="code_highlight php clear">$arg</code> — name / array config / ConfigSection</li>
<li class="n"><code class="code_highlight php clear">$spawn</code> — Spawn? Default is true</li>
</ul>
<p>#&amp;setConnectionClass  -#%s.method ```php:p.inline
public <a href="#./setConnectionClass">setConnectionClass</a> ( string $class )</p>
<pre><code class="">   -.n Sets default connection class
   -.n.ti `:hc`$class` — String name

#&enable  -#%s.method ```php:p.inline
 public <a href="#./enable">enable</a> ( )</code></pre>
<ul>
<li class="n">Enable socket events</li>
</ul>
<p>#&amp;disable  -#%s.method ```php:p.inline
public <a href="#./disable">disable</a> ( )</p>
<pre><code class="">   -.n Disable all events of sockets

#&onShutdown  -#%s.method ```php:p.inline
 public <a href="#./onShutdown">onShutdown</a> ( boolean $graceful = false )</code></pre>
<ul>
<li class="n">Called when application instance is going to shutdown</li>
<li class="n ti"><code class="code_highlight php clear">$graceful</code> — graceful</li>
</ul>
<p>#&amp;finish  -#%s.method ```php:p.inline
public <a href="#./finish">finish</a> ( boolean $graceful = false )</p>
<pre><code class="">   -.n Finishes ConnectionPool
   -.n.ti `:hc`$graceful` — graceful

#&attach  -#%s.method ```php:p.inline
 public <a href="#./attach">attach</a> ( [Connection](#../../connection) $conn, $inf = null )</code></pre>
<ul>
<li class="n">Attach Connection</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
<li class="n"><code class="code_highlight php clear">$inf</code> — Info</li>
</ul>
<p>#&amp;detach  -#%s.method ```php:p.inline
public <a href="#./detach">detach</a> ( <a href="#../../connection">Connection</a> $conn )</p>
<pre><code class="">   -.n Detach Connection
   -.n.ti `:hc`$conn` — Connection

#&connect  -#%s.method ```php:p.inline
 public <a href="#./connect">connect</a> ( string $url, callable $cb, string $class = null )</code></pre>
<ul>
<li class="n">Establish a connection with remote peer</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — URL</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Optional. Callback</li>
<li class="n"><code class="code_highlight php clear">$class</code> — Optional. Connection class name</li>
</ul>
<h3 id="utils/client"><div class="in anchor">Client <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Client.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class Client extends <a href="#../pool">Pool</a>;</code></pre>
<p>@TODO</p>
<h4 id="utils/client/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/client">Client <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Client.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;addServer  -#%s.method ```php:p.inline
void public <a href="#./addServer">addServer</a> ( string $url, integer $weight = NULL )</p>
<pre><code class="">   -.n Adds server
   -.n.ti `:hc`$url` — Server URL
   -.n `:hc`$weight` — Weight

#&getConnection  -#%s.method ```php:p.inline
 boolean public <a href="#./getConnection">getConnection</a> ( string $url = null, callable $cb = null, integer $pri = 0 )</code></pre>
<ul>
<li class="n">Returns available connection from the pool</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — Address</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — onConnected</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — Optional. Priority.</li>
</ul>
<p>#&amp;detach  -#%s.method ```php:p.inline
void public <a href="#./detach">detach</a> ( <a href="#../../connection">Connection</a> $conn )</p>
<pre><code class="">   -.n Detach Connection
   -.n.ti `:hc`$conn` — Connection

#&markConnFree  -#%s.method ```php:p.inline
 void public <a href="#./markConnFree">markConnFree</a> ( [ClientConnection](#../../clientconnection) $conn, string $url )</code></pre>
<ul>
<li class="n">Mark connection as free</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
<li class="n"><code class="code_highlight php clear">$url</code> — URL</li>
</ul>
<p>#&amp;markConnBusy  -#%s.method ```php:p.inline
void public <a href="#./markConnBusy">markConnBusy</a> ( <a href="#../../clientconnection">ClientConnection</a> $conn, string $url )</p>
<pre><code class="">   -.n Mark connection as busy
   -.n.ti `:hc`$conn` — Connection
   -.n `:hc`$url` — URL

#&detachConnFromUrl  -#%s.method ```php:p.inline
 void public <a href="#./detachConnFromUrl">detachConnFromUrl</a> ( [ClientConnection](#../../clientconnection) $conn, string $url )</code></pre>
<ul>
<li class="n">Detaches connection from URL</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
<li class="n"><code class="code_highlight php clear">$url</code> — URL</li>
</ul>
<p>#&amp;touchPending  -#%s.method ```php:p.inline
void public <a href="#./touchPending">touchPending</a> ( string $url )</p>
<pre><code class="">   -.n Touch pending "requests for connection"
   -.n.ti `:hc`$url` — URL

#&getConnectionByKey  -#%s.method ```php:p.inline
 boolean public <a href="#./getConnectionByKey">getConnectionByKey</a> ( string $key, callable $cb = null )</code></pre>
<ul>
<li class="n">Returns available connection from the pool by key</li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — Key</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
<p>#&amp;getConnectionRR  -#%s.method ```php:p.inline
boolean public <a href="#./getConnectionRR">getConnectionRR</a> ( callable $cb = null )</p>
<pre><code class="">   -.n Returns available connection from the pool
   -.n.ti `:hc`$cb` — Callback

#&requestByServer  -#%s.method ```php:p.inline
 boolean public <a href="#./requestByServer">requestByServer</a> ( string $server, string $data, callable $onResponse = null )</code></pre>
<ul>
<li class="n">Sends a request to arbitrary server</li>
<li class="n ti"><code class="code_highlight php clear">$server</code> — Server</li>
<li class="n"><code class="code_highlight php clear">$data</code> — Request</li>
<li class="n"><code class="code_highlight php clear">$onResponse</code> — Callback called when the request complete</li>
</ul>
<p>#&amp;requestByKey  -#%s.method ```php:p.inline
boolean public <a href="#./requestByKey">requestByKey</a> ( string $key, string $data, callable $onResponse = null )</p>
<pre><code class="">   -.n Sends a request to server according to the key
   -.n.ti `:hc`$key` — Key
   -.n `:hc`$data` — Request
   -.n `:hc`$onResponse` — Callback called when the request complete

#&onShutdown  -#%s.method ```php:p.inline
 boolean public <a href="#./onShutdown">onShutdown</a> ( boolean $graceful = false )</code></pre>
<ul>
<li class="n">Called when application instance is going to shutdown</li>
<li class="n ti"><code class="code_highlight php clear">$graceful</code> — @TODO</li>
</ul>
<h3 id="utils/clientconnection"><div class="in anchor">ClientConnection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/ClientConnection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
class ClientConnection extends <a href="#../connection">Connection</a>;</code></pre>
<p>@TODO</p>
<h4 id="utils/clientconnection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/clientconnection">ClientConnection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/ClientConnection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( resource $fd, object $pool = null )</p>
<pre><code class="">   -.n Constructor
   -.n.ti `:hc`$fd` — File descriptor
   -.n `:hc`$pool` — ConnectionPool

#&isBusy  -#%s.method ```php:p.inline
 boolean public <a href="#./isBusy">isBusy</a> ( )</code></pre>
<ul>
<li class="n">Busy?</li>
</ul>
<p>#&amp;onResponse  -#%s.method ```php:p.inline
void public <a href="#./onResponse">onResponse</a> ( callable $cb )</p>
<pre><code class="">   -.n Push callback to onReponse stack
   -.n.ti `:hc`$cb` — callable

#&onReady  -#%s.method ```php:p.inline
 void public <a href="#./onReady">onReady</a> ( )</code></pre>
<ul>
<li class="n">Called when the connection is handshaked (at low-level), and peer is ready to recv. data</li>
</ul>
<p>#&amp;setFree  -#%s.method ```php:p.inline
void public <a href="#./setFree">setFree</a> ( boolean $free = true )</p>
<pre><code class="">   -.n Set connection free/busy
   -.n.ti `:hc`$free` — Free?

#&release  -#%s.method ```php:p.inline
 void public <a href="#./release">release</a> ( )</code></pre>
<ul>
<li class="n">Set connection free</li>
</ul>
<p>#&amp;checkFree  -#%s.method ```php:p.inline
void public <a href="#./checkFree">checkFree</a> ( )</p>
<pre><code class="">   -.n Set connection free/busy according to onResponse emptiness and ->finished

#&getQueueLength  -#%s.method ```php:p.inline
 integer public <a href="#./getQueueLength">getQueueLength</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;isQueueEmpty  -#%s.method ```php:p.inline
boolean public <a href="#./isQueueEmpty">isQueueEmpty</a> ( )</p>
<pre><code class="">   -.n @TODO

#&onFinish  -#%s.method ```php:p.inline
 void public <a href="#./onFinish">onFinish</a> ( )</code></pre>
<ul>
<li class="n">Called when connection finishes</li>
</ul>
<h3 id="utils/connection"><div class="in anchor">Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Connection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class Connection extends <a href="#../iostream">IOStream</a>;</code></pre>
<p>@TODO</p>
<h4 id="utils/connection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/connection">Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;isConnected  -#%s.method ```php:p.inline
boolean public <a href="#./isConnected">isConnected</a> ( )</p>
<pre><code class="">   -.n Connected?

#&setDgram  -#%s.method ```php:p.inline
 void public <a href="#./setDgram">setDgram</a> ( boolean $bool )</code></pre>
<ul>
<li class="n">Sets DGRAM mode</li>
<li class="n ti"><code class="code_highlight php clear">$bool</code> — @TODO</li>
</ul>
<p>#&amp;setPeername  -#%s.method ```php:p.inline
void public <a href="#./setPeername">setPeername</a> ( string $host, integer $port )</p>
<pre><code class="">   -.n Sets peer name
   -.n.ti `:hc`$host` — Hostname
   -.n `:hc`$port` — Port

#&__get  -#%s.method ```php:p.inline
 mixed public <a href="#./__get">__get</a> ( string $name )</code></pre>
<ul>
<li class="n">Getter</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — Name</li>
</ul>
<p>#&amp;getSocketName  -#%s.method ```php:p.inline
void public <a href="#./getSocketName">getSocketName</a> ( string &amp;$addr, string &amp;$port )</p>
<pre><code class="">   -.n Get socket name
   -.n.ti `:hc`&$addr` — Addr
   -.n `:hc`&$port` — Port

#&setParentSocket  -#%s.method ```php:p.inline
 void public <a href="#./setParentSocket">setParentSocket</a> ( \PHPDaemon\BoundSocket\Generic $sock )</code></pre>
<ul>
<li class="n">Sets parent socket</li>
</ul>
<p>#&amp;onUdpPacket  -#%s.method ```php:p.inline
void public <a href="#./onUdpPacket">onUdpPacket</a> ( @TODO $pct )</p>
<pre><code class="">   -.n Called when new UDP packet received
   -.n.ti `:hc`$pct` — @TODO

#&onReady  -#%s.method ```php:p.inline
 void public <a href="#./onReady">onReady</a> ( )</code></pre>
<ul>
<li class="n">Called when the connection is handshaked (at low-level), and peer is ready to recv. data</li>
</ul>
<p>#&amp;onInheritanceFromRequest  -#%s.method ```php:p.inline
void public <a href="#./onInheritanceFromRequest">onInheritanceFromRequest</a> ( object $req )</p>
<pre><code class="">   -.n Called if we inherit connection from request
   -.n.ti `:hc`$req` — Parent Request

#&onFailure  -#%s.method ```php:p.inline
 void public <a href="#./onFailure">onFailure</a> ( )</code></pre>
<ul>
<li class="n">Called when the connection failed to be established</li>
</ul>
<p>#&amp;onFailureEv  -#%s.method ```php:p.inline
void public <a href="#./onFailureEv">onFailureEv</a> ( \EventBufferEvent $bev = null )</p>
<pre><code class="">   -.n Called when the connection failed
   -.n.ti `:hc`$bev` — @TODO

#&__destruct  -#%s.method ```php:p.inline
 void public <a href="#./__destruct">__destruct</a> ( )</code></pre>
<ul>
<li class="n">Destructor</li>
</ul>
<p>#&amp;write  -#%s.method ```php:p.inline
boolean public <a href="#./write">write</a> ( string $data )</p>
<pre><code class="">   -.n Send data to the connection. Note that it just writes to buffer that flushes at every baseloop
   -.n.ti `:hc`$data` — Data to send

#&onConnected  -#%s.method ```php:p.inline
 void public <a href="#./onConnected">onConnected</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Executes the given callback when/if the connection is handshaked</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — callable</li>
</ul>
<p>#&amp;getUrl  -#%s.method ```php:p.inline
string public <a href="#./getUrl">getUrl</a> ( )</p>
<pre><code class="">   -.n Get URL

#&getHost  -#%s.method ```php:p.inline
 string public <a href="#./getHost">getHost</a> ( )</code></pre>
<ul>
<li class="n">Get host</li>
</ul>
<p>#&amp;getPort  -#%s.method ```php:p.inline
integer public <a href="#./getPort">getPort</a> ( )</p>
<pre><code class="">   -.n Get port

#&connect  -#%s.method ```php:p.inline
 boolean public <a href="#./connect">connect</a> ( string $url, callable $cb = null )</code></pre>
<ul>
<li class="n">Connects to URL</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — URL</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
<p>#&amp;connectUnix  -#%s.method ```php:p.inline
boolean public <a href="#./connectUnix">connectUnix</a> ( string $path )</p>
<pre><code class="">   -.n Establish UNIX socket connection
   -.n.ti `:hc`$path` — Path

#&connectRaw  -#%s.method ```php:p.inline
 boolean public <a href="#./connectRaw">connectRaw</a> ( string $host )</code></pre>
<ul>
<li class="n">Establish raw socket connection</li>
<li class="n ti"><code class="code_highlight php clear">$host</code> — Host</li>
</ul>
<p>#&amp;connectUdp  -#%s.method ```php:p.inline
boolean public <a href="#./connectUdp">connectUdp</a> ( string $host, integer $port )</p>
<pre><code class="">   -.n Establish UDP connection
   -.n.ti `:hc`$host` — Hostname
   -.n `:hc`$port` — Port

#&connectTcp  -#%s.method ```php:p.inline
 boolean public <a href="#./connectTcp">connectTcp</a> ( string $host, integer $port )</code></pre>
<ul>
<li class="n">Establish TCP connection</li>
<li class="n ti"><code class="code_highlight php clear">$host</code> — Hostname</li>
<li class="n"><code class="code_highlight php clear">$port</code> — Port</li>
</ul>
<p>#&amp;setKeepalive  -#%s.method ```php:p.inline
void public <a href="#./setKeepalive">setKeepalive</a> ( boolean $bool )</p>
<pre><code class="">   -.n Set keepalive
   -.n.ti `:hc`$bool` — @TODO

#&close  -#%s.method ```php:p.inline
 void public <a href="#./close">close</a> ( )</code></pre>
<ul>
<li class="n">Close the connection</li>
</ul>
<p>#&amp;setTimeouts  -#%s.method ```php:p.inline
void public <a href="#./setTimeouts">setTimeouts</a> ( integer $read, integer $write )</p>
<pre><code class="">   -.n Set timeouts
   -.n.ti `:hc`$read` — Read timeout in seconds
   -.n `:hc`$write` — Write timeout in seconds

#&setOption  -#%s.method ```php:p.inline
 void public <a href="#./setOption">setOption</a> ( integer $level, integer $optname, mixed $val )</code></pre>
<ul>
<li class="n">Set socket option</li>
<li class="n ti"><code class="code_highlight php clear">$level</code> — Level</li>
<li class="n"><code class="code_highlight php clear">$optname</code> — Option</li>
<li class="n"><code class="code_highlight php clear">$val</code> — Value</li>
</ul>
<p>#&amp;onFinish  -#%s.method ```php:p.inline
void public <a href="#./onFinish">onFinish</a> ( )</p>
<pre><code class="">   -.n Called when connection finishes

### iostream # IOStream #> IOStream <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/IOStream.php"><i class="fa fa-github"></i></a>

```php
namespace PHPDaemon\Network;
abstract class IOStream;</code></pre>
<p>@TODO</p>
<h4 id="utils/connection/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#utils/connection">Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">ConnectionPool public $pool;</code></pre>
<p>Associated pool</p>
<ul>
<li class="method fake">&nbsp;</li>
</ul>
</li>
</ul>
<h4 id="utils/connection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/connection">Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( resource $fd = null, object $pool = null )</p>
<pre><code class="">   -.n IOStream constructor
   -.n.ti `:hc`$fd` — File descriptor. Optional.
   -.n `:hc`$pool` — Pool. Optional.

#&__get  -#%s.method ```php:p.inline
 mixed public <a href="#./__get">__get</a> ( string $name )</code></pre>
<ul>
<li class="n">Getter</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — Name</li>
</ul>
<p>#&amp;isFreed  -#%s.method ```php:p.inline
boolean public <a href="#./isFreed">isFreed</a> ( )</p>
<pre><code class="">   -.n Freed?

#&isFinished  -#%s.method ```php:p.inline
 boolean public <a href="#./isFinished">isFinished</a> ( )</code></pre>
<ul>
<li class="n">Finished?</li>
</ul>
<p>#&amp;getBev  -#%s.method ```php:p.inline
\EventBufferEvent public <a href="#./getBev">getBev</a> ( )</p>
<pre><code class="">   -.n Get EventBufferEvent

#&getFd  -#%s.method ```php:p.inline
 resource public <a href="#./getFd">getFd</a> ( )</code></pre>
<ul>
<li class="n">Get file descriptor</li>
</ul>
<p>#&amp;setContext  -#%s.method ```php:p.inline
void public <a href="#./setContext">setContext</a> ( object $ctx, integer $mode )</p>
<pre><code class="">   -.n Sets context mode
   -.n.ti `:hc`$ctx` — Context
   -.n `:hc`$mode` — Mode

#&setFd  -#%s.method ```php:p.inline
 void public <a href="#./setFd">setFd</a> ( resource $fd, \EventBufferEvent $bev = null )</code></pre>
<ul>
<li class="n">Sets fd</li>
<li class="n ti"><code class="code_highlight php clear">$fd</code> — File descriptor</li>
<li class="n"><code class="code_highlight php clear">$bev</code> — EventBufferEvent</li>
</ul>
<p>#&amp;setTimeout  -#%s.method ```php:p.inline
void public <a href="#./setTimeout">setTimeout</a> ( integer $rw )</p>
<pre><code class="">   -.n Set timeout
   -.n.ti `:hc`$rw` — Timeout

#&setTimeouts  -#%s.method ```php:p.inline
 void public <a href="#./setTimeouts">setTimeouts</a> ( integer $read, integer $write )</code></pre>
<ul>
<li class="n">Set timeouts</li>
<li class="n ti"><code class="code_highlight php clear">$read</code> — Read timeout in seconds</li>
<li class="n"><code class="code_highlight php clear">$write</code> — Write timeout in seconds</li>
</ul>
<p>#&amp;setPriority  -#%s.method ```php:p.inline
void public <a href="#./setPriority">setPriority</a> ( integer $p )</p>
<pre><code class="">   -.n Sets priority
   -.n.ti `:hc`$p` — Priority

#&setWatermark  -#%s.method ```php:p.inline
 void public <a href="#./setWatermark">setWatermark</a> ( integer $low = null, integer $high = null )</code></pre>
<ul>
<li class="n">Sets watermark</li>
<li class="n ti"><code class="code_highlight php clear">$low</code> — Low</li>
<li class="n"><code class="code_highlight php clear">$high</code> — High</li>
</ul>
<p>#&amp;readLine  -#%s.method ```php:p.inline
string public <a href="#./readLine">readLine</a> ( integer $eol = null )</p>
<pre><code class="">   -.n Reads line from buffer
   -.n.ti `:hc`$eol` — @TODO

#&drain  -#%s.method ```php:p.inline
 boolean public <a href="#./drain">drain</a> ( integer $n )</code></pre>
<ul>
<li class="n">Drains buffer</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Numbers of bytes to drain</li>
</ul>
<p>#&amp;drainIfMatch  -#%s.method ```php:p.inline
boolean public <a href="#./drainIfMatch">drainIfMatch</a> ( string $str )</p>
<pre><code class="">   -.n Drains buffer it matches the string
   -.n.ti `:hc`$str` — Data

#&lookExact  -#%s.method ```php:p.inline
 string public <a href="#./lookExact">lookExact</a> ( integer $n, integer $o = 0 )</code></pre>
<ul>
<li class="n">Reads exact $n bytes of buffer without draining</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
<li class="n"><code class="code_highlight php clear">$o</code> — Offset</li>
</ul>
<p>#&amp;prependInput  -#%s.method ```php:p.inline
boolean public <a href="#./prependInput">prependInput</a> ( string $str )</p>
<pre><code class="">   -.n Prepends data to input buffer
   -.n.ti `:hc`$str` — Data

#&prependOutput  -#%s.method ```php:p.inline
 boolean public <a href="#./prependOutput">prependOutput</a> ( string $str )</code></pre>
<ul>
<li class="n">Prepends data to output buffer</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Data</li>
</ul>
<p>#&amp;look  -#%s.method ```php:p.inline
string public <a href="#./look">look</a> ( integer $n, integer $o = 0 )</p>
<pre><code class="">   -.n Read from buffer without draining
   -.n.ti `:hc`$n` — Number of bytes to read
   -.n `:hc`$o` — Offset

#&substr  -#%s.method ```php:p.inline
 string public <a href="#./substr">substr</a> ( integer $o, integer $n = -1 )</code></pre>
<ul>
<li class="n">Read from buffer without draining</li>
<li class="n ti"><code class="code_highlight php clear">$o</code> — Offset</li>
<li class="n"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
</ul>
<p>#&amp;search  -#%s.method ```php:p.inline
integer public <a href="#./search">search</a> ( string $what, integer $start = 0, integer $end = -1 )</p>
<pre><code class="">   -.n Searches first occurence of the string in input buffer
   -.n.ti `:hc`$what` — Needle
   -.n `:hc`$start` — Offset start
   -.n `:hc`$end` — Offset end

#&readExact  -#%s.method ```php:p.inline
 string public <a href="#./readExact">readExact</a> ( integer $n )</code></pre>
<ul>
<li class="n">Reads exact $n bytes from buffer</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
</ul>
<p>#&amp;getInputLength  -#%s.method ```php:p.inline
integer public <a href="#./getInputLength">getInputLength</a> ( )</p>
<pre><code class="">   -.n Returns length of input buffer

#&gracefulShutdown  -#%s.method ```php:p.inline
 boolean public <a href="#./gracefulShutdown">gracefulShutdown</a> ( )</code></pre>
<ul>
<li class="n">Called when the worker is going to shutdown</li>
</ul>
<p>#&amp;freezeInput  -#%s.method ```php:p.inline
boolean public <a href="#./freezeInput">freezeInput</a> ( boolean $at_front = false )</p>
<pre><code class="">   -.n Freeze input
   -.n.ti `:hc`$at_front` — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.

#&unfreezeInput  -#%s.method ```php:p.inline
 boolean public <a href="#./unfreezeInput">unfreezeInput</a> ( boolean $at_front = false )</code></pre>
<ul>
<li class="n">Unfreeze input</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
<p>#&amp;freezeOutput  -#%s.method ```php:p.inline
boolean public <a href="#./freezeOutput">freezeOutput</a> ( boolean $at_front = true )</p>
<pre><code class="">   -.n Freeze output
   -.n.ti `:hc`$at_front` — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.

#&unfreezeOutput  -#%s.method ```php:p.inline
 boolean public <a href="#./unfreezeOutput">unfreezeOutput</a> ( boolean $at_front = true )</code></pre>
<ul>
<li class="n">Unfreeze output</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
<p>#&amp;onWrite  -#%s.method ```php:p.inline
void public <a href="#./onWrite">onWrite</a> ( )</p>
<pre><code class="">   -.n Called when the connection is ready to accept new data

#&write  -#%s.method ```php:p.inline
 boolean public <a href="#./write">write</a> ( string $data )</code></pre>
<ul>
<li class="n">Send data to the connection. Note that it just writes to buffer that flushes at every baseloop</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — Data to send</li>
</ul>
<p>#&amp;writeln  -#%s.method ```php:p.inline
boolean public <a href="#./writeln">writeln</a> ( string $data )</p>
<pre><code class="">   -.n Send data and appending \n to connection. Note that it just writes to buffer flushed at every baseloop
   -.n.ti `:hc`$data` — Data to send

#&finish  -#%s.method ```php:p.inline
 void public <a href="#./finish">finish</a> ( )</code></pre>
<ul>
<li class="n">Finish the session. You should not worry about buffers, they are going to be flushed properly.</li>
</ul>
<p>#&amp;close  -#%s.method ```php:p.inline
void public <a href="#./close">close</a> ( )</p>
<pre><code class="">   -.n Close the connection

#&unsetFd  -#%s.method ```php:p.inline
 void public <a href="#./unsetFd">unsetFd</a> ( )</code></pre>
<ul>
<li class="n">Unsets pointers of associated EventBufferEvent and File descriptr</li>
</ul>
<p>#&amp;onReadEv  -#%s.method ```php:p.inline
void public <a href="#./onReadEv">onReadEv</a> ( \EventBufferEvent $bev )</p>
<pre><code class="">   -.n Called when the connection has got new data
   -.n.ti `:hc`$bev` — Bufferevent

#&onWriteOnce  -#%s.method ```php:p.inline
 void public <a href="#./onWriteOnce">onWriteOnce</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Push callback which will be called only once, when writing is available next time</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
<p>#&amp;onWriteEv  -#%s.method ```php:p.inline
void public <a href="#./onWriteEv">onWriteEv</a> ( \EventBufferEvent $bev )</p>
<pre><code class="">   -.n Called when the connection is ready to accept new data
   -.n.ti `:hc`$bev` — Bufferedevent

#&onStateEv  -#%s.method ```php:p.inline
 void public <a href="#./onStateEv">onStateEv</a> ( \EventBufferEvent $bev, integer $events )</code></pre>
<ul>
<li class="n">Called when the connection state changed</li>
<li class="n ti"><code class="code_highlight php clear">$bev</code> — Bufferevent</li>
<li class="n"><code class="code_highlight php clear">$events</code> — Events</li>
</ul>
<p>#&amp;moveToBuffer  -#%s.method ```php:p.inline
integer public <a href="#./moveToBuffer">moveToBuffer</a> ( \EventBuffer $dest, integer $n )</p>
<pre><code class="">   -.n Moves arbitrary number of bytes from input buffer to given buffer
   -.n.ti `:hc`$dest` — Destination nuffer
   -.n `:hc`$n` — Max. number of bytes to move

#&writeFromBuffer  -#%s.method ```php:p.inline
 integer public <a href="#./writeFromBuffer">writeFromBuffer</a> ( \EventBuffer $src, integer $n )</code></pre>
<ul>
<li class="n">Moves arbitrary number of bytes from given buffer to output buffer</li>
<li class="n ti"><code class="code_highlight php clear">$src</code> — Source buffer</li>
<li class="n"><code class="code_highlight php clear">$n</code> — Max. number of bytes to move</li>
</ul>
<p>#&amp;read  -#%s.method ```php:p.inline
string public <a href="#./read">read</a> ( integer $n )</p>
<pre><code class="">   -.n Read data from the connection's buffer
   -.n.ti `:hc`$n` — Max. number of bytes to read

#&readUnlimited  -#%s.method ```php:p.inline
 string public <a href="#./readUnlimited">readUnlimited</a> ( )</code></pre>
<ul>
<li class="n">Reads all data from the connection's buffer</li>
</ul>
<h3 id="utils/server"><div class="in anchor">Server <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Server.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class Server extends <a href="#../pool">Pool</a>;</code></pre>
<p>@TODO</p>
<h4 id="utils/server/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#utils/server">Server <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Server.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $allowedClients = null;</code></pre>
<p>Allowed clients</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxAllowedPacket;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h4 id="utils/server/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/server">Server <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Server.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<p>#&amp;<strong>construct  -#%s.method ```php:p.inline
void public &lt;a href="#./</strong>construct">__construct</a> ( array $config = [], boolean $init = true )</p>
<pre><code class="">   -.n Constructor
   -.n.ti `:hc`$config` — Config variables
   -.n `:hc`$init` — @TODO

#&finish  -#%s.method ```php:p.inline
 boolean public <a href="#./finish">finish</a> ( boolean $graceful = false )</code></pre>
<ul>
<li class="n">Finishes ConnectionPool</li>
<li class="n ti"><code class="code_highlight php clear">$graceful</code> — @TODO</li>
</ul>
<p>#&amp;bindSockets  -#%s.method ```php:p.inline
integer public <a href="#./bindSockets">bindSockets</a> ( mixed $addrs = [], integer $max = 0 )</p>
<pre><code class="">   -.n Bind given sockets
   -.n.ti `:hc`$addrs` — Addresses to bind
   -.n `:hc`$max` — Number of bound

#&bindSocket  -#%s.method ```php:p.inline
 boolean public <a href="#./bindSocket">bindSocket</a> ( string $uri )</code></pre>
<ul>
<li class="n">Bind given socket</li>
<li class="n ti"><code class="code_highlight php clear">$uri</code> — Address to bind</li>
</ul>
<p>#&amp;attachBound  -#%s.method ```php:p.inline
void public <a href="#./attachBound">attachBound</a> ( \PHPDaemon\BoundSocket\Generic $bound, mixed $inf = null )</p>
<pre><code class="">   -.n Attach Generic
   -.n.ti `:hc`$bound` — Generic
   -.n `:hc`$inf` — Info

#&detachBound  -#%s.method ```php:p.inline
 void public <a href="#./detachBound">detachBound</a> ( \PHPDaemon\BoundSocket\Generic $bound )</code></pre>
<ul>
<li class="n">Detach Generic</li>
<li class="n ti"><code class="code_highlight php clear">$bound</code> — Generic</li>
</ul>
<p>#&amp;closeBound  -#%s.method ```php:p.inline
void public <a href="#./closeBound">closeBound</a> ( )</p>
<pre><code class="">   -.n Close each of binded sockets

#&inheritFromRequest  -#%s.method ```php:p.inline
 boolean public <a href="#./inheritFromRequest">inheritFromRequest</a> ( object $req, object $oldConn )</code></pre>
<ul>
<li class="n">Called when a request to HTTP-server looks like another connection</li>
<li class="n ti"><code class="code_highlight php clear">$req</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$oldConn</code> — @TODO</li>
</ul>
<h2 id="httprequest"><div class="in anchor">HTTPRequest</div>

</h2>
<h3 id="httprequest/generic"><div class="in anchor">Generic <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Generic.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\HTTPRequest;
abstract class Generic extends \PHPDaemon\Request\Generic;</code></pre>
<p>@TODO</p>
<h4 id="httprequest/generic/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#httprequest/generic">Generic <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Generic.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">boolean public $keepalive = false;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $responseLength = 0;</code></pre>
<p>Current response length</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $hvaltr = ['; ' => '&', ';' => '&', ' ' => '%20'];</code></pre>
<p>Replacement pairs for processing some header values in parse_str()</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $htr = ['-' => '_'];</code></pre>
<p>State</p>
</li>
</ul>
<h4 id="httprequest/generic/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#httprequest/generic">Generic <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Generic.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<p>#&amp;firstDeferredEventUsed  -#%s.method ```php:p.inline
void public <a href="#./firstDeferredEventUsed">firstDeferredEventUsed</a> ( )</p>
<pre><code class="">   -.n @TODO

#&sendfile  -#%s.method ```php:p.inline
 boolean public <a href="#./sendfile">sendfile</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">Output whole contents of file</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — Path</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Callback</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — Priority</li>
</ul>
<p>#&amp;checkIfReady  -#%s.method ```php:p.inline
boolean public <a href="#./checkIfReady">checkIfReady</a> ( )</p>
<pre><code class="">   -.n Called to check if Request is ready

#&getUploadMaxSize  -#%s.method ```php:p.inline
 integer public <a href="#./getUploadMaxSize">getUploadMaxSize</a> ( )</code></pre>
<ul>
<li class="n">Upload maximum file size</li>
</ul>
<p>#&amp;postPrepare  -#%s.method ```php:p.inline
void public <a href="#./postPrepare">postPrepare</a> ( )</p>
<pre><code class="">   -.n Prepares the request body

#&ensureSentHeaders  -#%s.method ```php:p.inline
 boolean public <a href="#./ensureSentHeaders">ensureSentHeaders</a> ( )</code></pre>
<ul>
<li class="n">Ensure that headers are sent</li>
</ul>
<p>#&amp;out  -#%s.method ```php:p.inline
boolean public <a href="#./out">out</a> ( string $s, boolean $flush = true )</p>
<pre><code class="">   -.n Output some data
   -.n.ti `:hc`$s` — String to out
   -.n `:hc`$flush` — Flush

#&onParsedParams  -#%s.method ```php:p.inline
 void public <a href="#./onParsedParams">onParsedParams</a> ( )</code></pre>
<ul>
<li class="n">Called when request's headers parsed</li>
</ul>
<p>#&amp;combinedOut  -#%s.method ```php:p.inline
boolean public <a href="#./combinedOut">combinedOut</a> ( string $s )</p>
<pre><code class="">   -.n Outputs data with headers (split by \r\n\r\n)
   -.n.ti `:hc`$s` — String to out

#&chunked  -#%s.method ```php:p.inline
 void public <a href="#./chunked">chunked</a> ( )</code></pre>
<ul>
<li class="n">Use chunked encoding</li>
</ul>
<p>#&amp;onWakeup  -#%s.method ```php:p.inline
void public <a href="#./onWakeup">onWakeup</a> ( )</p>
<pre><code class="">   -.n Called when the request wakes up

#&onSleep  -#%s.method ```php:p.inline
 void public <a href="#./onSleep">onSleep</a> ( )</code></pre>
<ul>
<li class="n">Called when the request starts sleep</li>
</ul>
<p>#&amp;status  -#%s.method ```php:p.inline
boolean public <a href="#./status">status</a> ( integer $code = 200 )</p>
<pre><code class="">   -.n Send HTTP-status
   -.n.ti `:hc`$code` — Code

#&headers_sent  -#%s.method ```php:p.inline
 boolean public <a href="#./headers_sent">headers_sent</a> ( string &$file, integer &$line )</code></pre>
<ul>
<li class="n">Checks if headers have been sent</li>
<li class="n ti"><code class="code_highlight php clear">&$file</code> — File name where output started in the file and line variables</li>
<li class="n"><code class="code_highlight php clear">&$line</code> — Line number where output started in the file and line variables</li>
</ul>
<p>#&amp;headers_list  -#%s.method ```php:p.inline
array public <a href="#./headers_list">headers_list</a> ( )</p>
<pre><code class="">   -.n Return current list of headers

#&setcookie  -#%s.method ```php:p.inline
 void public <a href="#./setcookie">setcookie</a> ( string $name, string $value = '', штеупук $maxage = 0, string $path = '', string $domain = '', boolean $secure = false, boolean $HTTPOnly = false )</code></pre>
<ul>
<li class="n">Set the cookie</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — Name of cookie</li>
<li class="n"><code class="code_highlight php clear">$value</code> — Value</li>
<li class="n"><code class="code_highlight php clear">$maxage</code> — Optional. Max-Age. Default is 0</li>
<li class="n"><code class="code_highlight php clear">$path</code> — Optional. Path. Default is empty string</li>
<li class="n"><code class="code_highlight php clear">$domain</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$secure</code> — Optional. Secure. Default is false</li>
<li class="n"><code class="code_highlight php clear">$HTTPOnly</code> — Optional. HTTPOnly. Default is false</li>
</ul>
<p>#&amp;header  -#%s.method ```php:p.inline
boolean public <a href="#./header">header</a> ( string $s, boolean $replace = true, integer $code = false )</p>
<pre><code class="">   -.n Send the header
   -.n.ti `:hc`$s` — Header. Example: `Location: http://php.net/`
   -.n `:hc`$replace` — Optional. Replace?
   -.n `:hc`$code` — Optional. HTTP response code

#&removeHeader  -#%s.method ```php:p.inline
 void public <a href="#./removeHeader">removeHeader</a> ( string $s )</code></pre>
<ul>
<li class="n">Removes a header</li>
<li class="n ti"><code class="code_highlight php clear">$s</code> — Header name. Example: <code>Location</code></li>
</ul>
<p>#&amp;parseSize  -#%s.method ```php:p.inline
integer public static <a href="#./parseSize">parseSize</a> ( string $value )</p>
<pre><code class="">   -.n Converts human-readable representation of size to number of bytes
   -.n.ti `:hc`$value` — Data

#&onUploadFileStart  -#%s.method ```php:p.inline
 void public <a href="#./onUploadFileStart">onUploadFileStart</a> ( [Input](#../input) $in )</code></pre>
<ul>
<li class="n">Called when file upload started</li>
<li class="n ti"><code class="code_highlight php clear">$in</code> — Input</li>
</ul>
<p>#&amp;onUploadFileChunk  -#%s.method ```php:p.inline
void public <a href="#./onUploadFileChunk">onUploadFileChunk</a> ( <a href="#../input">Input</a> $in, boolean $last = false )</p>
<pre><code class="">   -.n Called when chunk of incoming file has arrived
   -.n.ti `:hc`$in` — Input
   -.n `:hc`$last` — Last?

#&getUploadTempDir  -#%s.method ```php:p.inline
 string public <a href="#./getUploadTempDir">getUploadTempDir</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
<p>#&amp;isUploadedFile  -#%s.method ```php:p.inline
boolean public <a href="#./isUploadedFile">isUploadedFile</a> ( string $path )</p>
<pre><code class="">   -.n Tells whether the file was uploaded via HTTP POST
   -.n.ti `:hc`$path` — The filename being checked

#&moveUploadedFile  -#%s.method ```php:p.inline
 boolean public <a href="#./moveUploadedFile">moveUploadedFile</a> ( string $filename, string $dest )</code></pre>
<ul>
<li class="n">Moves an uploaded file to a new location</li>
<li class="n ti"><code class="code_highlight php clear">$filename</code> — The filename of the uploaded file</li>
<li class="n"><code class="code_highlight php clear">$dest</code> — The destination of the moved file</li>
</ul>
<p>#&amp;readBodyFile  -#%s.method ```php:p.inline
boolean public <a href="#./readBodyFile">readBodyFile</a> ( )</p>
<pre><code class="">   -.n Read request body from the file given in REQUEST_BODY_FILE parameter

#&parse_str  -#%s.method ```php:p.inline
 void public static <a href="#./parse_str">parse_str</a> ( string $s, array &$var, boolean $header = false )</code></pre>
<ul>
<li class="n">Replacement for default parse_str(), it supoorts UCS-2 like this: %uXXXX</li>
<li class="n ti"><code class="code_highlight php clear">$s</code> — String to parse</li>
<li class="n"><code class="code_highlight php clear">&$var</code> — Reference to the resulting array</li>
<li class="n"><code class="code_highlight php clear">$header</code> — Header-style string</li>
</ul>
<h3 id="httprequest/input"><div class="in anchor">Input <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Input.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\HTTPRequest;
class Input extends \EventBuffer;</code></pre>
<p>@TODO</p>
<h4 id="httprequest/input/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#httprequest/input">Input <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Input.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $curPart;</code></pre>
<p>Current Part</p>
<ul>
<li class="method fake">&nbsp;</li>
</ul>
</li>
</ul>
<h4 id="httprequest/input/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#httprequest/input">Input <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Input.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<p>#&amp;setBoundary  -#%s.method ```php:p.inline
void public <a href="#./setBoundary">setBoundary</a> ( string $boundary )</p>
<pre><code class="">   -.n Set boundary
   -.n.ti `:hc`$boundary` — @TODO

#&freeze  -#%s.method ```php:p.inline
 void public <a href="#./freeze">freeze</a> ( boolean $at_front = false )</code></pre>
<ul>
<li class="n">Freeze input</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
<p>#&amp;unfreeze  -#%s.method ```php:p.inline
void public <a href="#./unfreeze">unfreeze</a> ( boolean $at_front = false )</p>
<pre><code class="">   -.n Unfreeze input
   -.n.ti `:hc`$at_front` — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.

#&isFrozen  -#%s.method ```php:p.inline
 boolean public <a href="#./isFrozen">isFrozen</a> ( )</code></pre>
<ul>
<li class="n">Is frozen?</li>
</ul>
<p>#&amp;isEof  -#%s.method ```php:p.inline
boolean public <a href="#./isEof">isEof</a> ( )</p>
<pre><code class="">   -.n Is EOF?

#&setRequest  -#%s.method ```php:p.inline
 void public <a href="#./setRequest">setRequest</a> ( [Generic](#../generic) $req )</code></pre>
<ul>
<li class="n">Set request</li>
<li class="n ti"><code class="code_highlight php clear">$req</code> — @TODO</li>
</ul>
<p>#&amp;sendEOF  -#%s.method ```php:p.inline
void public <a href="#./sendEOF">sendEOF</a> ( )</p>
<pre><code class="">   -.n Send EOF

#&readFromBuffer  -#%s.method ```php:p.inline
 integer public <a href="#./readFromBuffer">readFromBuffer</a> ( \EventBuffer $buf )</code></pre>
<ul>
<li class="n">Moves $n bytes from input buffer to arbitrary buffer</li>
<li class="n ti"><code class="code_highlight php clear">$buf</code> — Source nuffer</li>
</ul>
<p>#&amp;readFromString  -#%s.method ```php:p.inline
void public <a href="#./readFromString">readFromString</a> ( string $chunk, boolean $final = true )</p>
<pre><code class="">   -.n Append string to input buffer
   -.n.ti `:hc`$chunk` — Piece of request input
   -.n `:hc`$final` — Final call is THIS SEQUENCE of calls (not mandatory final in request)?

#&look  -#%s.method ```php:p.inline
 string public <a href="#./look">look</a> ( integer $n, integer $o = 0 )</code></pre>
<ul>
<li class="n">Read from buffer without draining</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
<li class="n"><code class="code_highlight php clear">$o</code> — Offset</li>
</ul>
<p>#&amp;parseMultipart  -#%s.method ```php:p.inline
void public <a href="#./parseMultipart">parseMultipart</a> ( )</p>
<pre><code class="">   -.n Parses multipart

#&getChunkString  -#%s.method ```php:p.inline
 string public <a href="#./getChunkString">getChunkString</a> ( )</code></pre>
<ul>
<li class="n">Get current upload chunk as string</li>
</ul>
<p>#&amp;writeChunkToFd  -#%s.method ```php:p.inline
boolean public <a href="#./writeChunkToFd">writeChunkToFd</a> ( resource $fd, callable $cb = null )</p>
<pre><code class="">   -.n Write current upload chunk to file descriptor
   -.n.ti `:hc`$fd` — File destriptor
   -.n `:hc`$cb` — Callback

#&log  -#%s.method ```php:p.inline
 void public <a href="#./log">log</a> ( string $msg )</code></pre>
<ul>
<li class="n">Log</li>
<li class="n ti"><code class="code_highlight php clear">$msg</code> — Message</li>
</ul>
<h2 id="faq"><div class="in anchor">ЧаВО</div>

</h2>
<p><i class="fa fa-question-circle"></i> Как сделать событие, которое вызывается через заданный временной интервал?</p>
<p>См. <a target="_self" class="tpl-inlink" href="#lib/timer">Библиотеки/Timer<i class="fa fa-caret-square-o-up"></i></a></p>
<h2 id="publications"><div class="in anchor">Публикации</div>

</h2>
<ul>
<li><a href="http://habrahabr.ru/blogs/php/104811">phpDaemon и runkit: новый уровень</a> (23 сентября 2010)</li>
<li><a href="http://javascript.ru/blog/Ilya-Kantor/True-FastCGI-dlya-PHP-migraciya-testy">True FastCGI для PHP: миграция и тесты</a> (7 сентября 2010)</li>
<li><a href="http://habrahabr.ru/blogs/webdev/94921">WebSocket: будущее уже здесь!</a> (8 июня 2010)</li>
<li><a href="http://habrahabr.ru/blogs/php/91014">phpDaemon: хорошие новости</a> (24 мая 2010)</li>
<li><a href="http://habrahabr.ru/blogs/php/79377">phpDaemon: фреймворк асинхронных приложений</a> (11 января 2010)</li>
</ul>
<h2 id="contribute"><div class="in anchor">Внести свою лепту</div>

</h2>
<p>Если хотите помочь, то даже если располагаете ограниченным временем, не стесняйтесь!
Проекту пригодится любая помощь. </p>
<h3 id="contribute/this-doc"><div class="in anchor">Эта документация<span class="header-path"> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h3>
<p>Мы очень хотим свести количество недокументированного кода к минимуму, но нам не хватает рук.
Даже написав абзац текста, потратив десять минут, вы уже сделаете большое дело.</p>
<h4 id="contribute/this-doc/commiting"><div class="in anchor">Внесение изменений<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h4>
<blockquote>
<p>Старайтесь вносить изменения в на том языке, которым владеете лучше всего.
Если набрались смелости добавить новый язык, возьмите за основу наиболее близкий из присутствующих.</p>
</blockquote>
<p>Чтобы внести изменения в эту документацию, необходимо:</p>
<ol>
<li>Сделать Fork репозитория <a target="_blank" class="tpl-outlink" href="https://github.com/kakserpom/daemon.io">kakserpom/daemon.io<i class="fa fa-external-link"></i></a></li>
<li>Внести изменения в Markdown (.md) файлыв папке <code>./docs/<язык>/</code></li>
<li>Скомпилировать index.html, выполнив команду <code>./docs/build</code></li>
<li>Посмотреть как выглядят внесенные изменения в браузере</li>
<li>Послать Pull Request</li>
</ol>
<blockquote>
<p>Хотите видеть изменения в браузере, не запуская каждый раз команду?
Запустите <code>watch -n1 ./docs/build</code> — она будет выполняться раз в секунду</p>
</blockquote>
<h4 id="contribute/this-doc/markdown"><div class="in anchor">Формат документации<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h4>
<p>Мы используем <a target="_blank" class="tpl-outlink" href="http://ru.wikipedia.org/wiki/Markdown">Markdown<i class="fa fa-external-link"></i></a> (<a target="_blank" class="tpl-outlink" href="http://rukeba.com/by-the-way/markdown-sintaksis-po-russki/">о синтаксисе по-русски<i class="fa fa-external-link"></i></a>) с некоторыми дополнениями.</p>
<h5 id="contribute/this-doc/markdown/nesting"><div class="in anchor">Вложенность<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Для удобства работы документация разбита на множество мелких файлов.
Подключение файла осуществляется строкой иморта: <code>&lt;!-- import filepath.md --&gt;</code>.
Путь к подключаемому файлу указывается относительно текущего.</p>
<h5 id="contribute/this-doc/markdown/const"><div class="in anchor">Константы<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Константы используются для языковых настроек и короткой записи часто используемых шаблонов.
Записываются в виде <code>&lt;!-- pvar **название** строка значения --&gt;</code></p>
<p>Обязательные языковые константы <code>lang</code>, <code>title</code>, <code>menu-*</code> должны быть переведены для каждой языковой версии документации.</p>
<p>Константы могут быть использованы как шаблоны. Применение шаблона: <code>{**название** переменная1 переменная2...}</code>. Переменные будут подставлены в шаблон вместо <code>%s</code>.</p>
<p>Пример шаблона:<br />
<code>&lt;!-- pvar tpl-outlink &lt;a target="_blank" href="%s"&gt;%s&lt;i class="fa fa-external-link"&gt;&lt;/i&gt;&lt;/a&gt; --&gt;</code></p>
<p>Пример использования:
<code>&#123;tpl-outlink http://ru.wikipedia.org/wiki/Markdown Markdown&#125;</code></p>
<h5 id="contribute/this-doc/markdown/headers"><div class="in anchor">Заголовки<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Заголовки могут быть описаны следующими способами:</p>
<ul>
<li><code>## якорь # Заголовок</code></li>
<li><code>## якорь # Заголовок #> Форматированный заголовок</code></li>
</ul>
<p><code>якорь</code> - идентификатор заголовка для навигации. Разрешенные символы <code>[a-zA-Z0-9_-]</code>. Должен быть уникальным по отношению к идентификаторам заголовков текущего уровня в пределах родительского заголовка.</p>
<p><code>Форматированный заголовок</code> используется в тех случаях, когда заголовок в контенте должен отличаться от заголовка в навигационной панели.</p>
<p>Примеры:</p>
<ul>
<li>Заголовок первого уровня: <code>## contribute # Внести свою лепту</code></li>
<li>Заголовок второго уровня: <code>### this-doc # Эта документация</code></li>
<li>Заголовок третьего уровня: <code>#### markdown # Формат документации</code></li>
<li>Заголовок четвертого уровня: <code>#### markdown # Заголовки</code></li>
<li>Форматированный заголовок: <code>### mysql # MySQL #> Клиенты \ MySQL</code></li>
</ul>
<blockquote>
<p>При добавлении нового заголовка учтите, что якорь должен быть строго на английском языке и быть простым и информативным. При переводе якори не изменяются</p>
</blockquote>
<h5 id="contribute/this-doc/markdown/lists"><div class="in anchor">Списки<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Для списков добавлена возможность указать CSS-класс элемента:</p>
<pre><code class=""> -.n Элемент без символа списка
 -.n.ti Элемент без символа списка и с отступом от предыдущего</code></pre>
<p>На данный момент используются CSS-классы:</p>
<ul>
<li><code>.n</code> - без иконки элемента списка</li>
<li><code>.ti</code> - отступ от предыдущего элемента</li>
<li><code>.method</code> - специальный CSS-класс для записи методов библиотек</li>
</ul>
<h5 id="contribute/this-doc/markdown/italic_bold"><div class="in anchor">Курсив и жирный<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Выделение курсивом и жирным работает только с помощью звездочки <code>*</code>, знак подчеркивания <code>_</code> отключен для совместимости с программным кодом.</p>
<h5 id="contribute/this-doc/markdown/simple_code"><div class="in anchor">Однострочный код<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Простое выделение кода апострофами <code>&#96;...&#96;</code> дополнено возможностью применять модификаторы и CSS-классы.<br />
Модификаторы — это опции, включающие дополнительную обработку текста.</p>
<p>Модификаторы и классы пишутся после открывающего апострофа и должны быть закрыты дополнительным перед началом текста. Перед указанием модификаторов ставится символ <code>:</code> (двоеточие). Каждый модификатор указывается одним латинским символом. Классы указываются с помощью ведущей точки.</p>
<blockquote>
<p>При указании одновременно и модификаторов, и классов, сначала должны быть записаны модификаторы.</p>
</blockquote>
<p>Список модификаторов:</p>
<ul>
<li><code>:e</code> - кодировать символы (по-умолчаниб кодирование символов выключено)</li>
<li><code>:p</code> - парсинг ссылок</li>
<li><code>:h</code> - php подсветка кода</li>
<li><code>:c</code> - стилевое оформление без фона и обводки</li>
</ul>
<p>Из классов на данный момент может применять только <code>&#46;clear</code>, но лучше указывайте модификатор <code>&#58;c</code>.</p>
<p>Примеры использования:</p>
<ul>
<li><code>&#96;:hc&#96;$url&#96;</code></li>
<li><code>&#96;:p&#96;max-requests (&#91;Number&#93;(#config/types/number) = '10k')&#96;</code></li>
<li><code>&#96;:ph.clear&#96;callback ( &#91;Connection&#93;(#clients/http/connection) $conn, boolean $success )&#96;</code></li>
</ul>
<h5 id="contribute/this-doc/markdown/multi_code"><div class="in anchor">Многострочный код<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Многострочный код добавлен возможностью подсветки синтаксиса и указанием CSS-классов.
Код, содержащий конфигурацию, обозначается синтаксисом <code>ruby</code>.</p>
<p>Из классов на данный момент может применять только <code>.inline</code> для оформления методов.</p>
<p>Примеры:</p>
<blockquote>
<p>&#96;&#96;&#96;php.inline<br />
void public post ( url $url, array $data, array $params )<br />
void public post ( url $url, array $data, callable $resultcb )<br />
&#96;&#96;&#96;</p>
<p>&#96;&#96;&#96;ruby<br />
Pool:HTTPServer {  </p>
<pre><code>listen "tcp://0.0.0.0:80", "tcp://0.0.0.0:443##myContext";  
port 80;  
privileged;  
maxconcurrency 1;  </code></pre>
<p>}<br />
&#96;&#96;&#96;</p>
</blockquote>
<h5 id="contribute/this-doc/markdown/tables"><div class="in anchor">Таблицы<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Включена возможность создавать таблицы по формату <a target="_blank" class="tpl-outlink" href="http://code.google.com/p/support/wiki/WikiSyntax#Tables">Google Code Wiki-style<i class="fa fa-external-link"></i></a>.</p>
<h3 id="contribute/php-doc"><div class="in anchor">PHPDoc<span class="header-path"> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h3>
<p>Аналогично, чтобы восполнить пробелы в PHPDoc-комментариях в коде, сделайте Fork <a href="https://github.com/kakserpom/phpdaemon">основного репозитория</a>, внесите изменения и пошлите Pull Request.</p>
<blockquote>
<p>Учтите, что все PHPDoc-комментарии пишутся строго на английском языке</p>
</blockquote>
<h3 id="contribute/code"><div class="in anchor">Программный код<span class="header-path"> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h3>
<p>Улучшения программного кода всегда приветствуется. Если у вас есть модуль для публикации, и вы считаете, что он заслуживает включения в основной репозиторий, пришлите Pull Request. Аналогично поступайте с улучшениями существующего кода.</p>
<h2 id="doc-authors"><div class="in anchor">Авторы документации</div>

</h2>
<h3 id="doc-authors/writing"><div class="in anchor">Написание<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<ul>
<li class="n"><a target="_blank" href="https://github.com/EzheG"><i class="fa fa-github"></i></a> Dmitry Efimenko <a href="mailto:[ezheg89@gmail.com](mailto:ezheg89@gmail.com)">[ezheg89@gmail.com](mailto:ezheg89@gmail.com)</a></li>
<li class="n"><a target="_blank" href="https://github.com/kakserpom"><i class="fa fa-github"></i></a> Vasily Zorin <a href="mailto:[maintainer@daemon.io](mailto:maintainer@daemon.io)">[maintainer@daemon.io](mailto:maintainer@daemon.io)</a></li>
<li class="n"><a target="_blank" href="https://github.com/nizsheanez"><i class="fa fa-github"></i></a> Alexey Sharov <a href="mailto:[www.pismeco@gmail.com](mailto:www.pismeco@gmail.com)">[www.pismeco@gmail.com](mailto:www.pismeco@gmail.com)</a></li>
</ul>
<h3 id="doc-authors/translation"><div class="in anchor">Перевод на русский<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<ul>
<li class="n"><a target="_blank" href="https://github.com/kakserpom"><i class="fa fa-github"></i></a> Vasily Zorin <a href="mailto:[maintainer@daemon.io](mailto:maintainer@daemon.io)">[maintainer@daemon.io](mailto:maintainer@daemon.io)</a></li>
</ul>
<h3 id="doc-authors/proofreading"><div class="in anchor">Корректура русской версии<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<p>...</p>
<h3 id="doc-authors/scripting"><div class="in anchor">Программирование<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<ul>
<li class="n"><a target="_blank" href="https://github.com/EzheG"><i class="fa fa-github"></i></a> Dmitry Efimenko <a href="mailto:[ezheg89@gmail.com](mailto:ezheg89@gmail.com)">[ezheg89@gmail.com](mailto:ezheg89@gmail.com)</a></li>
</ul>
<p>Движок документации был изначально основан на <a target="_blank" href="https://github.com/chibisov/backdoc">Backdoc <i class="fa fa-github"></i></a></p>
        </div>
    </div>
    <a href="https://github.com/kakserpom/phpdaemon" class="forkButton" target="_blank"><img src="/img/forkme.png" height="149" width="149" alt="Fork me on GitHub"></a>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../js/jquery-1.11.0.min.js"><\/script>')</script>
    <script src="../js/jquery.ba-throttle-debounce.js"></script>
    <script src="../js/waypoints.js"></script>
    <!-- <script src="../js/highlight.pack.js"></script> -->
    <script src="../js/highlight_source/build/highlight.pack.js"></script>
    <script src="../js/main.js"></script>
<!--
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'phpdaemon';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
-->
</body>
</html>