<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="HandheldFriendly" content="true" />
    <title>Документация &laquo; phpDaemon</title>
    <!-- <base href="http://daemon.io/" /> -->
    
    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="icon" href="/favicon.png" type="image/png" />

    <link rel="stylesheet" href="../css/normalize.min.css" />
    <link rel="stylesheet" href="../css/highlight.github.css" />
    <link rel="stylesheet" href="../css/font-awesome.min.css" />
    <link rel="stylesheet" href="../css/styles.doc.css" />
</head>
<body>
    <header>
        <div class="center">
            <a href="/" id="logo" title="phpDaemon">phpDaemon</a>
            <a href="?" id="langchoose" title="phpDaemon">{language}</a>
            <menu>
                <li><span><a href="http://daemon.io/examples.html" title="Examples">Примеры</a></span></li>
                <li><span><a href="/faq.html" title="FAQ">ЧАВО</a></span></li>
                <li class="active"><span><a href="http://daemon.io/docs/ru/" title="Documentation">Документация</a></span></li>
                <li><span><a href="https://github.com/kakserpom/phpdaemon/issues" title="Tracker" target="_blank">Задачи/ошибки</a></span></li>
                <li><span><a href="http://daemon.io/team.html" title="Team">Команда</a></span></li>
                <li><span><a href="http://daemon.io/contribute.html" title="Contribute">Участие</a></span></li>
                <li><span><a href="http://daemon.io/publications.html" title="Publications">Публикации</a></span></li>
            </menu>
        </div>
    </header>
    <div class="lang-chooser">
        <!-- <div class="center"> -->
            <ul>
                <li><a href="/docs/en/">English</a></li><li class="active"><a href="/docs/ru/">Русский</a></li>
            </ul>
        <!-- </div> -->
    </div>
    <div class="mainhead"></div>
    <a class="toggle_sidebar_button">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </a>
    <div class="sidebar">
        <ul>
<li><a href="#intro"><span>Введение</span></a>
<ul>
<li><a href="#intro/usage"><span>Пользование документацией</span></a>
<ul>
<li><a href="#intro/usage/hotkeys"><span>Горячие клавиши</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#install"><span>Установка</span></a>
<ul>
<li><a href="#install/requirements"><span>Требования</span></a></li>
<li><a href="#install/sources"><span>Исходный код</span></a></li>
<li><a href="#install/composer"><span>Composer</span></a></li>
<li><a href="#install/redhat"><span>CentOS/RedHat</span></a></li>
<li><a href="#install/ubuntu"><span>Ubuntu</span></a></li>
<li><a href="#install/gentoo"><span>Gentoo</span></a></li>
</ul></li>
<li><a href="#basics"><span>Основы</span></a>
<ul>
<li><a href="#basics/pseudotypes"><span>Псевдотипы</span></a>
<ul>
<li><a href="#basics/pseudotypes/url"><span>url</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#control"><span>Управление</span></a></li>
<li><a href="#examples"><span>Примеры</span></a></li>
<li><a href="#app_resolver"><span>Маршрутизация</span></a></li>
<li><a href="#config"><span>Конфигурация</span></a>
<ul>
<li><a href="#config/types"><span>Типы данных</span></a>
<ul>
<li><a href="#config/types/size"><span>Size</span></a></li>
<li><a href="#config/types/time"><span>Time</span></a></li>
<li><a href="#config/types/number"><span>Number</span></a></li>
</ul></li>
<li><a href="#config/variables"><span>Глобальные опции</span></a>
<ul>
<li><a href="#config/variables/file"><span>Конфигурационный файл</span></a></li>
<li><a href="#config/variables/graceful_restart"><span>Плавный перезапуск рабочих процессов</span></a></li>
<li><a href="#config/variables/pathes"><span>Основные пути</span></a></li>
<li><a href="#config/variables/master"><span>Связанные с мастер-процессом</span></a></li>
<li><a href="#config/variables/requests"><span>Запросы</span></a></li>
<li><a href="#config/variables/workers"><span>Рабочие процессы</span></a></li>
<li><a href="#config/variables/logging"><span>Журналирование и отладка</span></a></li>
<li><a href="#config/variables/eio"><span>Подсистема ввода-вывода POSIX</span></a></li>
</ul></li>
<li><a href="#config/application"><span>Приложения</span></a></li>
</ul></li>
<li><a href="#development"><span>Разработка</span></a>
<ul>
<li><a href="#development/pseudotypes"><span>Псевдотипы</span></a>
<ul>
<li><a href="#development/pseudotypes/url"><span>url</span></a></li>
</ul></li>
<li><a href="#development/app_instance"><span>Приложение</span></a></li>
<li><a href="#development/request"><span>Обработка запросов</span></a></li>
<li><a href="#development/servers_clients"><span>Серверы и клиенты</span></a></li>
<li><a href="#development/debugging"><span>Отладка</span></a></li>
</ul></li>
<li><a href="#servers"><span>Серверы</span></a>
<ul>
<li><a href="#servers/options"><span>Опции серверов</span></a></li>
<li><a href="#servers/http"><span>HTTP</span></a>
<ul>
<li><a href="#servers/http/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/fastcgi"><span>FastCGI</span></a>
<ul>
<li><a href="#servers/fastcgi/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/debugconsole"><span>DebugConsole</span></a>
<ul>
<li><a href="#servers/debugconsole/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/flashpolicy"><span>FlashPolicy</span></a>
<ul>
<li><a href="#servers/flashpolicy/options"><span>Опции</span></a></li>
</ul></li>
<li><a href="#servers/ident"><span>Servers\Ident</span></a></li>
<li><a href="#servers/ircbouncer"><span>Servers\IRCBouncer</span></a></li>
<li><a href="#servers/lock"><span>Lock</span></a></li>
<li><a href="#servers/socks"><span>Servers\Socks</span></a></li>
<li><a href="#servers/websocket"><span>WebSocket</span></a>
<ul>
<li><a href="#servers/websocket/options"><span>Опции</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients"><span>Клиенты</span></a>
<ul>
<li><a href="#clients/basics"><span>Основы</span></a>
<ul>
<li><a href="#clients/basics/options"><span>Опции клиентов</span></a></li>
</ul></li>
<li><a href="#clients/asterisk"><span>Asterisk</span></a>
<ul>
<li><a href="#clients/asterisk/use"><span>Использование</span></a>
<ul>
<li><a href="#clients/asterisk/use/connect"><span>Соединение</span></a></li>
<li><a href="#clients/asterisk/use/io"><span>Немного о формате ввода-вывода</span></a></li>
<li><a href="#clients/asterisk/use/cmds"><span>Отправка команд и получение ответа</span></a></li>
<li><a href="#clients/asterisk/use/events"><span>Получение событий сервера</span></a></li>
</ul></li>
<li><a href="#clients/asterisk/example"><span>Пример реконнекта</span></a></li>
<li><a href="#clients/asterisk/pool"><span>Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/asterisk/pool/options"><span>Опции по-умолчанию</span></a></li>
<li><a href="#clients/asterisk/pool/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/pool/methods/getConnection"><span>getConnection</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/asterisk/connection"><span>Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Connection.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/asterisk/connection/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/asterisk/connection/methods/getSipPeers"><span>getSipPeers</span></a></li>
<li><a href="#clients/asterisk/connection/methods/getIaxPeers"><span>getIaxPeers</span></a></li>
<li><a href="#clients/asterisk/connection/methods/getConfig"><span>getConfig</span></a></li>
<li><a href="#clients/asterisk/connection/methods/getConfigJSON"><span>getConfigJSON</span></a></li>
<li><a href="#clients/asterisk/connection/methods/setVar"><span>setVar</span></a></li>
<li><a href="#clients/asterisk/connection/methods/coreShowChannels"><span>coreShowChannels</span></a></li>
<li><a href="#clients/asterisk/connection/methods/status"><span>status</span></a></li>
<li><a href="#clients/asterisk/connection/methods/redirect"><span>redirect</span></a></li>
<li><a href="#clients/asterisk/connection/methods/originate"><span>originate</span></a></li>
<li><a href="#clients/asterisk/connection/methods/extensionState"><span>extensionState</span></a></li>
<li><a href="#clients/asterisk/connection/methods/ping"><span>ping</span></a></li>
<li><a href="#clients/asterisk/connection/methods/action"><span>action</span></a></li>
<li><a href="#clients/asterisk/connection/methods/logoff"><span>logoff</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/dns"><span>Clients\DNS</span></a></li>
<li><a href="#clients/gibson"><span>Clients\Gibson</span></a></li>
<li><a href="#clients/http"><span>HTTP</span></a>
<ul>
<li><a href="#clients/http/examples"><span>Примеры</span></a></li>
<li><a href="#clients/http/pool"><span>Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/http/pool/options"><span>Опции по-умолчанию</span></a></li>
<li><a href="#clients/http/pool/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/http/pool/methods/get"><span>get</span></a></li>
<li><a href="#clients/http/pool/methods/post"><span>post</span></a></li>
<li><a href="#clients/http/pool/methods/buildUrl"><span>buildUrl</span></a></li>
<li><a href="#clients/http/pool/methods/parseUrl"><span>parseUrl</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/http/connection"><span>Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/http/connection/properties"><span>Свойства</span></a></li>
<li><a href="#clients/http/connection/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/http/connection/methods/getBody"><span>getBody</span></a></li>
<li><a href="#clients/http/connection/methods/getHeaders"><span>getHeaders</span></a></li>
<li><a href="#clients/http/connection/methods/getHeader"><span>getHeader</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/icmp"><span>Clients\ICMP</span></a></li>
<li><a href="#clients/irc"><span>Clients\IRC</span></a></li>
<li><a href="#clients/lock"><span>Lock</span></a></li>
<li><a href="#clients/memcache"><span>Clients\Memcache</span></a></li>
<li><a href="#clients/mongo"><span>Clients\Mongo</span></a></li>
<li><a href="#clients/mysql"><span>MySQL</span></a>
<ul>
<li><a href="#clients/mysql/use"><span>Использование</span></a>
<ul>
<li><a href="#clients/mysql/use/prepare"><span>Подготовка объекта соединения</span></a></li>
</ul></li>
<li><a href="#clients/mysql/examples"><span>Примеры</span></a></li>
<li><a href="#clients/mysql/pool"><span>Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/mysql/pool/options"><span>Опции по-умолчанию</span></a></li>
<li><a href="#clients/mysql/pool/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/mysql/pool/methods/getConnection"><span>getConnection</span></a></li>
<li><a href="#clients/mysql/pool/methods/escape"><span>escape</span></a></li>
<li><a href="#clients/mysql/pool/methods/likeEscape"><span>likeEscape</span></a></li>
<li><a href="#clients/mysql/pool/methods/value"><span>value</span></a></li>
<li><a href="#clients/mysql/pool/methods/values"><span>values</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/mysql/connection"><span>Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Connection.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#clients/mysql/connection/properties"><span>Свойства</span></a></li>
<li><a href="#clients/mysql/connection/methods"><span>Методы</span></a>
<ul>
<li><a href="#clients/mysql/connection/methods/onConnected"><span>onConnected</span></a></li>
<li><a href="#clients/mysql/connection/methods/query"><span>query</span></a></li>
<li><a href="#clients/mysql/connection/methods/ping"><span>ping</span></a></li>
<li><a href="#clients/mysql/connection/methods/selectDB"><span>selectDB</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#clients/postgresql"><span>Clients\PostgreSQL</span></a></li>
<li><a href="#clients/redis"><span>Clients\Redis</span></a></li>
<li><a href="#clients/valve"><span>Clients\Valve</span></a></li>
<li><a href="#clients/websocket"><span>Clients\WebSocket</span></a></li>
<li><a href="#clients/xmpp"><span>Clients\XMPP</span></a></li>
</ul></li>
<li><a href="#lib"><span>Библиотеки</span></a>
<ul>
<li><a href="#lib/cache"><span>Cache</span></a>
<ul>
<li><a href="#lib/cache/capped-storage"><span>Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/cache/capped-storage/properties"><span>Свойства</span></a></li>
<li><a href="#lib/cache/capped-storage/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/cache/capped-storage/methods/hash"><span>hash</span></a></li>
<li><a href="#lib/cache/capped-storage/methods/put"><span>put</span></a></li>
<li><a href="#lib/cache/capped-storage/methods/invalidate"><span>invalidate</span></a></li>
<li><a href="#lib/cache/capped-storage/methods/get"><span>get</span></a></li>
<li><a href="#lib/cache/capped-storage/methods/getValue"><span>getValue</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/cache/item"><span>Класс Item <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/Item.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/cache/item/properties"><span>Свойства</span></a></li>
<li><a href="#lib/cache/item/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/cache/item/methods/getHits"><span>getHits</span></a></li>
<li><a href="#lib/cache/item/methods/getValue"><span>getValue</span></a></li>
<li><a href="#lib/cache/item/methods/addListener"><span>addListener</span></a></li>
<li><a href="#lib/cache/item/methods/setValue"><span>setValue</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/cache/capped-storage-hits"><span>Класс CappedStorageHits <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorageHits.php"><i class="fa fa-github"></i></a></span></a></li>
</ul></li>
<li><a href="#lib/complexjob"><span>ComplexJob</span></a>
<ul>
<li><a href="#lib/complexjob/examples"><span>Примеры</span></a></li>
<li><a href="#lib/complexjob/consts"><span>Константы</span></a></li>
<li><a href="#lib/complexjob/properties"><span>Свойства</span></a></li>
<li><a href="#lib/complexjob/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/complexjob/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/complexjob/methods/addListener"><span>addListener</span></a></li>
<li><a href="#lib/complexjob/methods/offsetExists"><span>offsetExists</span></a></li>
<li><a href="#lib/complexjob/methods/offsetGet"><span>offsetGet</span></a></li>
<li><a href="#lib/complexjob/methods/offsetSet"><span>offsetSet</span></a></li>
<li><a href="#lib/complexjob/methods/offsetUnset"><span>offsetUnset</span></a></li>
<li><a href="#lib/complexjob/methods/getResults"><span>getResults</span></a></li>
<li><a href="#lib/complexjob/methods/keep"><span>keep</span></a></li>
<li><a href="#lib/complexjob/methods/hasCompleted"><span>hasCompleted</span></a></li>
<li><a href="#lib/complexjob/methods/maxConcurrency"><span>maxConcurrency</span></a></li>
<li><a href="#lib/complexjob/methods/setResult"><span>setResult</span></a></li>
<li><a href="#lib/complexjob/methods/getResult"><span>getResult</span></a></li>
<li><a href="#lib/complexjob/methods/checkQueue"><span>checkQueue</span></a></li>
<li><a href="#lib/complexjob/methods/more"><span>more</span></a></li>
<li><a href="#lib/complexjob/methods/isQueueFull"><span>isQueueFull</span></a></li>
<li><a href="#lib/complexjob/methods/addJob"><span>addJob</span></a></li>
<li><a href="#lib/complexjob/methods/cleanup"><span>cleanup</span></a></li>
<li><a href="#lib/complexjob/methods/execute"><span>execute</span></a></li>
<li><a href="#lib/complexjob/methods/__invoke"><span>__invoke</span></a></li>
<li><a href="#lib/complexjob/methods/__invoke"><span>__invoke</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/shellcommand"><span>ShellCommand</span></a>
<ul>
<li><a href="#lib/shellcommand/examples"><span>Примеры</span></a></li>
<li><a href="#lib/shellcommand/properties"><span>Свойства</span></a></li>
<li><a href="#lib/shellcommand/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/shellcommand/methods/exec"><span>exec</span></a></li>
<li><a href="#lib/shellcommand/methods/getCmd"><span>getCmd</span></a></li>
<li><a href="#lib/shellcommand/methods/setUser"><span>setUser</span></a></li>
<li><a href="#lib/shellcommand/methods/setGroup"><span>setGroup</span></a></li>
<li><a href="#lib/shellcommand/methods/setCwd"><span>setCwd</span></a></li>
<li><a href="#lib/shellcommand/methods/setChroot"><span>setChroot</span></a></li>
<li><a href="#lib/shellcommand/methods/setArgs"><span>setArgs</span></a></li>
<li><a href="#lib/shellcommand/methods/setEnv"><span>setEnv</span></a></li>
<li><a href="#lib/shellcommand/methods/nice"><span>nice</span></a></li>
<li><a href="#lib/shellcommand/methods/buildArgs"><span>buildArgs</span></a></li>
<li><a href="#lib/shellcommand/methods/execute"><span>execute</span></a></li>
<li><a href="#lib/shellcommand/methods/finishWrite"><span>finishWrite</span></a></li>
<li><a href="#lib/shellcommand/methods/close"><span>close</span></a></li>
<li><a href="#lib/shellcommand/methods/closeWrite"><span>closeWrite</span></a></li>
<li><a href="#lib/shellcommand/methods/eof"><span>eof</span></a></li>
<li><a href="#lib/shellcommand/methods/onEOF"><span>onEOF</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/timer"><span>Timer</span></a>
<ul>
<li><a href="#lib/timer/examples"><span>Примеры</span></a></li>
<li><a href="#lib/timer/global-functions"><span>Глобальные функции </span></a>
<ul>
<li><a href="#lib/timer/global-functions/setTimeout"><span>setTimeout</span></a></li>
</ul></li>
<li><a href="#lib/timer/properties"><span>Свойства</span></a></li>
<li><a href="#lib/timer/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/timer/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/timer/methods/setPriority"><span>setPriority</span></a></li>
<li><a href="#lib/timer/methods/add"><span>add</span></a></li>
<li><a href="#lib/timer/methods/setTimeout"><span>setTimeout</span></a></li>
<li><a href="#lib/timer/methods/remove"><span>remove</span></a></li>
<li><a href="#lib/timer/methods/cancelTimeout"><span>cancelTimeout</span></a></li>
<li><a href="#lib/timer/methods/timeout"><span>timeout</span></a></li>
<li><a href="#lib/timer/methods/cancel"><span>cancel</span></a></li>
<li><a href="#lib/timer/methods/finish"><span>finish</span></a></li>
<li><a href="#lib/timer/methods/__destruct"><span>__destruct</span></a></li>
<li><a href="#lib/timer/methods/free"><span>free</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/transport-context"><span>TransportContext</span></a></li>
<li><a href="#lib/fs"><span>FS</span></a>
<ul>
<li><a href="#lib/fs/filesystem"><span>Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/filesystem/properties"><span>Свойства</span></a></li>
<li><a href="#lib/fs/filesystem/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/filesystem/methods/init"><span>init</span></a></li>
<li><a href="#lib/fs/filesystem/methods/initEvent"><span>initEvent</span></a></li>
<li><a href="#lib/fs/filesystem/methods/checkFileReadable"><span>checkFileReadable</span></a></li>
<li><a href="#lib/fs/filesystem/methods/waitAllEvents"><span>waitAllEvents</span></a></li>
<li><a href="#lib/fs/filesystem/methods/updateConfig"><span>updateConfig</span></a></li>
<li><a href="#lib/fs/filesystem/methods/sanitizePath"><span>sanitizePath</span></a></li>
<li><a href="#lib/fs/filesystem/methods/statPrepare"><span>statPrepare</span></a></li>
<li><a href="#lib/fs/filesystem/methods/stat"><span>stat</span></a></li>
<li><a href="#lib/fs/filesystem/methods/unlink"><span>unlink</span></a></li>
<li><a href="#lib/fs/filesystem/methods/rename"><span>rename</span></a></li>
<li><a href="#lib/fs/filesystem/methods/statvfs"><span>statvfs</span></a></li>
<li><a href="#lib/fs/filesystem/methods/lstat"><span>lstat</span></a></li>
<li><a href="#lib/fs/filesystem/methods/realpath"><span>realpath</span></a></li>
<li><a href="#lib/fs/filesystem/methods/sync"><span>sync</span></a></li>
<li><a href="#lib/fs/filesystem/methods/syncfs"><span>syncfs</span></a></li>
<li><a href="#lib/fs/filesystem/methods/touch"><span>touch</span></a></li>
<li><a href="#lib/fs/filesystem/methods/rmdir"><span>rmdir</span></a></li>
<li><a href="#lib/fs/filesystem/methods/mkdir"><span>mkdir</span></a></li>
<li><a href="#lib/fs/filesystem/methods/readdir"><span>readdir</span></a></li>
<li><a href="#lib/fs/filesystem/methods/truncate"><span>truncate</span></a></li>
<li><a href="#lib/fs/filesystem/methods/sendfile"><span>sendfile</span></a></li>
<li><a href="#lib/fs/filesystem/methods/chown"><span>chown</span></a></li>
<li><a href="#lib/fs/filesystem/methods/readfile"><span>readfile</span></a></li>
<li><a href="#lib/fs/filesystem/methods/readfileChunked"><span>readfileChunked</span></a></li>
<li><a href="#lib/fs/filesystem/methods/genRndTempnam"><span>genRndTempnam</span></a></li>
<li><a href="#lib/fs/filesystem/methods/genRndTempnamPrefix"><span>genRndTempnamPrefix</span></a></li>
<li><a href="#lib/fs/filesystem/methods/tempnam"><span>tempnam</span></a></li>
<li><a href="#lib/fs/filesystem/methods/open"><span>open</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs/file"><span>Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/file/properties"><span>Свойства</span></a></li>
<li><a href="#lib/fs/file/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/file/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/fs/file/methods/getFd"><span>getFd</span></a></li>
<li><a href="#lib/fs/file/methods/convertFlags"><span>convertFlags</span></a></li>
<li><a href="#lib/fs/file/methods/truncate"><span>truncate</span></a></li>
<li><a href="#lib/fs/file/methods/stat"><span>stat</span></a></li>
<li><a href="#lib/fs/file/methods/statRefresh"><span>statRefresh</span></a></li>
<li><a href="#lib/fs/file/methods/statvfs"><span>statvfs</span></a></li>
<li><a href="#lib/fs/file/methods/sync"><span>sync</span></a></li>
<li><a href="#lib/fs/file/methods/datasync"><span>datasync</span></a></li>
<li><a href="#lib/fs/file/methods/write"><span>write</span></a></li>
<li><a href="#lib/fs/file/methods/chown"><span>chown</span></a></li>
<li><a href="#lib/fs/file/methods/touch"><span>touch</span></a></li>
<li><a href="#lib/fs/file/methods/clearStatCache"><span>clearStatCache</span></a></li>
<li><a href="#lib/fs/file/methods/read"><span>read</span></a></li>
<li><a href="#lib/fs/file/methods/sendfile"><span>sendfile</span></a></li>
<li><a href="#lib/fs/file/methods/readahead"><span>readahead</span></a></li>
<li><a href="#lib/fs/file/methods/readAll"><span>readAll</span></a></li>
<li><a href="#lib/fs/file/methods/readAllChunked"><span>readAllChunked</span></a></li>
<li><a href="#lib/fs/file/methods/__toString"><span>__toString</span></a></li>
<li><a href="#lib/fs/file/methods/setChunkSize"><span>setChunkSize</span></a></li>
<li><a href="#lib/fs/file/methods/seek"><span>seek</span></a></li>
<li><a href="#lib/fs/file/methods/tell"><span>tell</span></a></li>
<li><a href="#lib/fs/file/methods/close"><span>close</span></a></li>
<li><a href="#lib/fs/file/methods/__destruct"><span>__destruct</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/fs/filewatcher"><span>Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/fs/filewatcher/properties"><span>Свойства</span></a></li>
<li><a href="#lib/fs/filewatcher/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/fs/filewatcher/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/fs/filewatcher/methods/addWatch"><span>addWatch</span></a></li>
<li><a href="#lib/fs/filewatcher/methods/rmWatch"><span>rmWatch</span></a></li>
<li><a href="#lib/fs/filewatcher/methods/onFileChanged"><span>onFileChanged</span></a></li>
<li><a href="#lib/fs/filewatcher/methods/watch"><span>watch</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/pubsub"><span>PubSub</span></a>
<ul>
<li><a href="#lib/pubsub/pubsub"><span>Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/pubsub/pubsub/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/pubsub/pubsub/methods/eventExists"><span>eventExists</span></a></li>
<li><a href="#lib/pubsub/pubsub/methods/sub"><span>sub</span></a></li>
<li><a href="#lib/pubsub/pubsub/methods/addEvent"><span>addEvent</span></a></li>
<li><a href="#lib/pubsub/pubsub/methods/removeEvent"><span>removeEvent</span></a></li>
<li><a href="#lib/pubsub/pubsub/methods/unsub"><span>unsub</span></a></li>
<li><a href="#lib/pubsub/pubsub/methods/pub"><span>pub</span></a></li>
<li><a href="#lib/pubsub/pubsub/methods/unsubFromAll"><span>unsubFromAll</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/pubsub/pubsubevent"><span>Класс PubSubEvent <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSubEvent.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/pubsub/pubsubevent/properties"><span>Свойства</span></a></li>
<li><a href="#lib/pubsub/pubsubevent/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/pubsub/pubsubevent/methods/__construct"><span>__construct</span></a></li>
<li><a href="#lib/pubsub/pubsubevent/methods/onActivation"><span>onActivation</span></a></li>
<li><a href="#lib/pubsub/pubsubevent/methods/onDeactivation"><span>onDeactivation</span></a></li>
<li><a href="#lib/pubsub/pubsubevent/methods/init"><span>init</span></a></li>
<li><a href="#lib/pubsub/pubsubevent/methods/sub"><span>sub</span></a></li>
<li><a href="#lib/pubsub/pubsubevent/methods/unsub"><span>unsub</span></a></li>
<li><a href="#lib/pubsub/pubsubevent/methods/pub"><span>pub</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#lib/sockjs"><span>SockJS</span></a>
<ul>
<li><a href="#lib/sockjs/application"><span>Класс Application <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS/Application.php"><i class="fa fa-github"></i></a></span></a>
<ul>
<li><a href="#lib/sockjs/application/methods"><span>Методы</span></a>
<ul>
<li><a href="#lib/sockjs/application/methods/getLocalSubscribersCount"><span>getLocalSubscribersCount</span></a></li>
<li><a href="#lib/sockjs/application/methods/subscribe"><span>subscribe</span></a></li>
<li><a href="#lib/sockjs/application/methods/setnx"><span>setnx</span></a></li>
<li><a href="#lib/sockjs/application/methods/setkey"><span>setkey</span></a></li>
<li><a href="#lib/sockjs/application/methods/getkey"><span>getkey</span></a></li>
<li><a href="#lib/sockjs/application/methods/expire"><span>expire</span></a></li>
<li><a href="#lib/sockjs/application/methods/unsubscribe"><span>unsubscribe</span></a></li>
<li><a href="#lib/sockjs/application/methods/unsubscribeReal"><span>unsubscribeReal</span></a></li>
<li><a href="#lib/sockjs/application/methods/publish"><span>publish</span></a></li>
<li><a href="#lib/sockjs/application/methods/onReady"><span>onReady</span></a></li>
<li><a href="#lib/sockjs/application/methods/onFinish"><span>onFinish</span></a></li>
<li><a href="#lib/sockjs/application/methods/attachWss"><span>attachWss</span></a></li>
<li><a href="#lib/sockjs/application/methods/wsHandler"><span>wsHandler</span></a></li>
<li><a href="#lib/sockjs/application/methods/detachWss"><span>detachWss</span></a></li>
<li><a href="#lib/sockjs/application/methods/beginSession"><span>beginSession</span></a></li>
<li><a href="#lib/sockjs/application/methods/getRouteOptions"><span>getRouteOptions</span></a></li>
<li><a href="#lib/sockjs/application/methods/endSession"><span>endSession</span></a></li>
<li><a href="#lib/sockjs/application/methods/beginRequest"><span>beginRequest</span></a></li>
<li><a href="#lib/sockjs/application/methods/callMethod"><span>callMethod</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#apps"><span>Приложения</span></a>
<ul>
<li><a href="#apps/mongonode"><span>MongoNode</span></a>
<ul>
<li><a href="#apps/mongonode/requirements"><span>Требования</span></a></li>
<li><a href="#apps/mongonode/use"><span>Использование</span></a></li>
</ul></li>
<li><a href="#apps/telnethoneypot"><span>TelnetHoneypot</span></a>
<ul>
<li><a href="#apps/telnethoneypot/use"><span>Использование</span></a></li>
</ul></li>
<li><a href="#apps/serverstatus"><span>ServerStatus</span></a>
<ul>
<li><a href="#apps/serverstatus/use"><span>Использование</span></a></li>
<li><a href="#apps/serverstatus/note"><span>Примечание</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils"><span>Утилиты</span></a>
<ul>
<li><a href="#utils/binary"><span>Binary</span></a>
<ul>
<li><a href="#utils/binary/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/binary/methods/labels"><span>labels</span></a></li>
<li><a href="#utils/binary/methods/parseLabels"><span>parseLabels</span></a></li>
<li><a href="#utils/binary/methods/LV"><span>LV</span></a></li>
<li><a href="#utils/binary/methods/LVnull"><span>LVnull</span></a></li>
<li><a href="#utils/binary/methods/byte"><span>byte</span></a></li>
<li><a href="#utils/binary/methods/word"><span>word</span></a></li>
<li><a href="#utils/binary/methods/wordl"><span>wordl</span></a></li>
<li><a href="#utils/binary/methods/dword"><span>dword</span></a></li>
<li><a href="#utils/binary/methods/dwordl"><span>dwordl</span></a></li>
<li><a href="#utils/binary/methods/qword"><span>qword</span></a></li>
<li><a href="#utils/binary/methods/qwordl"><span>qwordl</span></a></li>
<li><a href="#utils/binary/methods/getByte"><span>getByte</span></a></li>
<li><a href="#utils/binary/methods/getChar"><span>getChar</span></a></li>
<li><a href="#utils/binary/methods/getWord"><span>getWord</span></a></li>
<li><a href="#utils/binary/methods/getStrWord"><span>getStrWord</span></a></li>
<li><a href="#utils/binary/methods/getDWord"><span>getDWord</span></a></li>
<li><a href="#utils/binary/methods/getQword"><span>getQword</span></a></li>
<li><a href="#utils/binary/methods/getStrQWord"><span>getStrQWord</span></a></li>
<li><a href="#utils/binary/methods/getString"><span>getString</span></a></li>
<li><a href="#utils/binary/methods/getLV"><span>getLV</span></a></li>
<li><a href="#utils/binary/methods/flags2bitarray"><span>flags2bitarray</span></a></li>
<li><a href="#utils/binary/methods/int2bytes"><span>int2bytes</span></a></li>
<li><a href="#utils/binary/methods/i2b"><span>i2b</span></a></li>
<li><a href="#utils/binary/methods/bytes2int"><span>bytes2int</span></a></li>
<li><a href="#utils/binary/methods/b2i"><span>b2i</span></a></li>
<li><a href="#utils/binary/methods/bitmap2bytes"><span>bitmap2bytes</span></a></li>
<li><a href="#utils/binary/methods/getbitmap"><span>getbitmap</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/crypt"><span>Crypt</span></a>
<ul>
<li><a href="#utils/crypt/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/crypt/methods/hash"><span>hash</span></a></li>
<li><a href="#utils/crypt/methods/randomString"><span>randomString</span></a></li>
<li><a href="#utils/crypt/methods/compareStrings"><span>compareStrings</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/datetime"><span>DateTime</span></a>
<ul>
<li><a href="#utils/datetime/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/datetime/methods/diffAsText"><span>diffAsText</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/encoding"><span>Encoding</span></a>
<ul>
<li><a href="#utils/encoding/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/encoding/methods/toUTF8"><span>toUTF8</span></a></li>
<li><a href="#utils/encoding/methods/toWin1252"><span>toWin1252</span></a></li>
<li><a href="#utils/encoding/methods/toISO8859"><span>toISO8859</span></a></li>
<li><a href="#utils/encoding/methods/toLatin1"><span>toLatin1</span></a></li>
<li><a href="#utils/encoding/methods/fixUTF8"><span>fixUTF8</span></a></li>
<li><a href="#utils/encoding/methods/UTF8FixWin1252Chars"><span>UTF8FixWin1252Chars</span></a></li>
<li><a href="#utils/encoding/methods/removeBOM"><span>removeBOM</span></a></li>
<li><a href="#utils/encoding/methods/normalizeEncoding"><span>normalizeEncoding</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/irc"><span>IRC</span></a>
<ul>
<li><a href="#utils/irc/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/irc/methods/getCommandByCode"><span>getCommandByCode</span></a></li>
<li><a href="#utils/irc/methods/getCodeByCommand"><span>getCodeByCommand</span></a></li>
<li><a href="#utils/irc/methods/parseUsermask"><span>parseUsermask</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/mime"><span>MIME</span></a>
<ul>
<li><a href="#utils/mime/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/mime/methods/get"><span>get</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/shmentity"><span>ShmEntity</span></a>
<ul>
<li><a href="#utils/shmentity/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/shmentity/methods/__construct"><span>__construct</span></a></li>
<li><a href="#utils/shmentity/methods/open"><span>open</span></a></li>
<li><a href="#utils/shmentity/methods/getSegments"><span>getSegments</span></a></li>
<li><a href="#utils/shmentity/methods/openall"><span>openall</span></a></li>
<li><a href="#utils/shmentity/methods/write"><span>write</span></a></li>
<li><a href="#utils/shmentity/methods/read"><span>read</span></a></li>
<li><a href="#utils/shmentity/methods/delete"><span>delete</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#utils/terminal"><span>Terminal</span></a>
<ul>
<li><a href="#utils/terminal/methods"><span>Методы</span></a>
<ul>
<li><a href="#utils/terminal/methods/readln"><span>readln</span></a></li>
<li><a href="#utils/terminal/methods/enableColor"><span>enableColor</span></a></li>
<li><a href="#utils/terminal/methods/clearScreen"><span>clearScreen</span></a></li>
<li><a href="#utils/terminal/methods/setStyle"><span>setStyle</span></a></li>
<li><a href="#utils/terminal/methods/resetStyle"><span>resetStyle</span></a></li>
<li><a href="#utils/terminal/methods/drawParam"><span>drawParam</span></a></li>
<li><a href="#utils/terminal/methods/drawTable"><span>drawTable</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#structures"><span>Структуры</span></a>
<ul>
<li><a href="#structures/object-storage"><span>ObjectStorage</span></a>
<ul>
<li><a href="#structures/object-storage/methods"><span>Методы</span></a>
<ul>
<li><a href="#structures/object-storage/methods/each"><span>each</span></a></li>
<li><a href="#structures/object-storage/methods/removeAll"><span>removeAll</span></a></li>
<li><a href="#structures/object-storage/methods/detachFirst"><span>detachFirst</span></a></li>
<li><a href="#structures/object-storage/methods/getFirst"><span>getFirst</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#structures/priority-queue-callbacks"><span>PriorityQueueCallbacks</span></a>
<ul>
<li><a href="#structures/priority-queue-callbacks/methods"><span>Методы</span></a>
<ul>
<li><a href="#structures/priority-queue-callbacks/methods/enqueue"><span>enqueue</span></a></li>
<li><a href="#structures/priority-queue-callbacks/methods/insert"><span>insert</span></a></li>
<li><a href="#structures/priority-queue-callbacks/methods/dequeue"><span>dequeue</span></a></li>
<li><a href="#structures/priority-queue-callbacks/methods/executeOne"><span>executeOne</span></a></li>
<li><a href="#structures/priority-queue-callbacks/methods/executeAll"><span>executeAll</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#structures/stack-callbacks"><span>StackCallbacks</span></a>
<ul>
<li><a href="#structures/stack-callbacks/methods"><span>Методы</span></a>
<ul>
<li><a href="#structures/stack-callbacks/methods/push"><span>push</span></a></li>
<li><a href="#structures/stack-callbacks/methods/unshift"><span>unshift</span></a></li>
<li><a href="#structures/stack-callbacks/methods/executeOne"><span>executeOne</span></a></li>
<li><a href="#structures/stack-callbacks/methods/executeAndKeepOne"><span>executeAndKeepOne</span></a></li>
<li><a href="#structures/stack-callbacks/methods/executeAll"><span>executeAll</span></a></li>
<li><a href="#structures/stack-callbacks/methods/toArray"><span>toArray</span></a></li>
<li><a href="#structures/stack-callbacks/methods/reset"><span>reset</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#traits"><span>Примеси</span></a>
<ul>
<li><a href="#traits/class-watchdog"><span>ClassWatchdog</span></a></li>
<li><a href="#traits/static-object-watchdog"><span>StaticObjectWatchdog</span></a></li>
<li><a href="#traits/strict-static-object-watchdog"><span>StrictStaticObjectWatchdog</span></a></li>
<li><a href="#traits/deferred-event-handlers"><span>DeferredEventHandlers</span></a></li>
<li><a href="#traits/event-handlers"><span>EventHandlers</span></a></li>
<li><a href="#traits/sessions"><span>Sessions</span></a></li>
<li><a href="#traits/dnode"><span>DNode</span></a>
<ul>
<li><a href="#traits/dnode/methods"><span>Методы</span></a>
<ul>
<li><a href="#traits/dnode/methods/onHandshake"><span>onHandshake</span></a></li>
<li><a href="#traits/dnode/methods/callLocal"><span>callLocal</span></a></li>
<li><a href="#traits/dnode/methods/extractCallbacks"><span>extractCallbacks</span></a></li>
<li><a href="#traits/dnode/methods/callRemote"><span>callRemote</span></a></li>
<li><a href="#traits/dnode/methods/callRemoteArray"><span>callRemoteArray</span></a></li>
<li><a href="#traits/dnode/methods/methodsMethod"><span>methodsMethod</span></a></li>
<li><a href="#traits/dnode/methods/toJsonDebugResursive"><span>toJsonDebugResursive</span></a></li>
<li><a href="#traits/dnode/methods/toJsonDebug"><span>toJsonDebug</span></a></li>
<li><a href="#traits/dnode/methods/onFinish"><span>onFinish</span></a></li>
<li><a href="#traits/dnode/methods/cleanup"><span>cleanup</span></a></li>
<li><a href="#traits/dnode/methods/__call"><span>__call</span></a></li>
<li><a href="#traits/dnode/methods/onPacket"><span>onPacket</span></a></li>
<li><a href="#traits/dnode/methods/onFrame"><span>onFrame</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#network"><span>Сеть</span></a>
<ul>
<li><a href="#network/pool"><span>Пул</span></a>
<ul>
<li><a href="#network/pool/properties"><span>Свойства</span></a></li>
<li><a href="#network/pool/methods"><span>Методы</span></a>
<ul>
<li><a href="#network/pool/methods/__construct"><span>__construct</span></a></li>
<li><a href="#network/pool/methods/onReady"><span>onReady</span></a></li>
<li><a href="#network/pool/methods/onConfigUpdated"><span>onConfigUpdated</span></a></li>
<li><a href="#network/pool/methods/getInstance"><span>getInstance</span></a></li>
<li><a href="#network/pool/methods/setConnectionClass"><span>setConnectionClass</span></a></li>
<li><a href="#network/pool/methods/enable"><span>enable</span></a></li>
<li><a href="#network/pool/methods/disable"><span>disable</span></a></li>
<li><a href="#network/pool/methods/onShutdown"><span>onShutdown</span></a></li>
<li><a href="#network/pool/methods/finish"><span>finish</span></a></li>
<li><a href="#network/pool/methods/attach"><span>attach</span></a></li>
<li><a href="#network/pool/methods/detach"><span>detach</span></a></li>
<li><a href="#network/pool/methods/connect"><span>connect</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#network/client"><span>Client</span></a>
<ul>
<li><a href="#network/client/methods"><span>Методы</span></a>
<ul>
<li><a href="#network/client/methods/addServer"><span>addServer</span></a></li>
<li><a href="#network/client/methods/getConnection"><span>getConnection</span></a></li>
<li><a href="#network/client/methods/detach"><span>detach</span></a></li>
<li><a href="#network/client/methods/markConnFree"><span>markConnFree</span></a></li>
<li><a href="#network/client/methods/markConnBusy"><span>markConnBusy</span></a></li>
<li><a href="#network/client/methods/detachConnFromUrl"><span>detachConnFromUrl</span></a></li>
<li><a href="#network/client/methods/touchPending"><span>touchPending</span></a></li>
<li><a href="#network/client/methods/getConnectionByKey"><span>getConnectionByKey</span></a></li>
<li><a href="#network/client/methods/getConnectionRR"><span>getConnectionRR</span></a></li>
<li><a href="#network/client/methods/requestByServer"><span>requestByServer</span></a></li>
<li><a href="#network/client/methods/requestByKey"><span>requestByKey</span></a></li>
<li><a href="#network/client/methods/onShutdown"><span>onShutdown</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#network/clientconnection"><span>ClientConnection</span></a>
<ul>
<li><a href="#network/clientconnection/methods"><span>Методы</span></a>
<ul>
<li><a href="#network/clientconnection/methods/__construct"><span>__construct</span></a></li>
<li><a href="#network/clientconnection/methods/isBusy"><span>isBusy</span></a></li>
<li><a href="#network/clientconnection/methods/onResponse"><span>onResponse</span></a></li>
<li><a href="#network/clientconnection/methods/onReady"><span>onReady</span></a></li>
<li><a href="#network/clientconnection/methods/setFree"><span>setFree</span></a></li>
<li><a href="#network/clientconnection/methods/release"><span>release</span></a></li>
<li><a href="#network/clientconnection/methods/checkFree"><span>checkFree</span></a></li>
<li><a href="#network/clientconnection/methods/getQueueLength"><span>getQueueLength</span></a></li>
<li><a href="#network/clientconnection/methods/isQueueEmpty"><span>isQueueEmpty</span></a></li>
<li><a href="#network/clientconnection/methods/onFinish"><span>onFinish</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#network/connection"><span>Connection</span></a>
<ul>
<li><a href="#network/connection/methods"><span>Методы</span></a>
<ul>
<li><a href="#network/connection/methods/isConnected"><span>isConnected</span></a></li>
<li><a href="#network/connection/methods/setDgram"><span>setDgram</span></a></li>
<li><a href="#network/connection/methods/setPeername"><span>setPeername</span></a></li>
<li><a href="#network/connection/methods/__get"><span>__get</span></a></li>
<li><a href="#network/connection/methods/getSocketName"><span>getSocketName</span></a></li>
<li><a href="#network/connection/methods/setParentSocket"><span>setParentSocket</span></a></li>
<li><a href="#network/connection/methods/onUdpPacket"><span>onUdpPacket</span></a></li>
<li><a href="#network/connection/methods/onReady"><span>onReady</span></a></li>
<li><a href="#network/connection/methods/onInheritanceFromRequest"><span>onInheritanceFromRequest</span></a></li>
<li><a href="#network/connection/methods/onFailure"><span>onFailure</span></a></li>
<li><a href="#network/connection/methods/onFailureEv"><span>onFailureEv</span></a></li>
<li><a href="#network/connection/methods/__destruct"><span>__destruct</span></a></li>
<li><a href="#network/connection/methods/write"><span>write</span></a></li>
<li><a href="#network/connection/methods/onConnected"><span>onConnected</span></a></li>
<li><a href="#network/connection/methods/getUrl"><span>getUrl</span></a></li>
<li><a href="#network/connection/methods/getHost"><span>getHost</span></a></li>
<li><a href="#network/connection/methods/getPort"><span>getPort</span></a></li>
<li><a href="#network/connection/methods/connect"><span>connect</span></a></li>
<li><a href="#network/connection/methods/connectUnix"><span>connectUnix</span></a></li>
<li><a href="#network/connection/methods/connectRaw"><span>connectRaw</span></a></li>
<li><a href="#network/connection/methods/connectUdp"><span>connectUdp</span></a></li>
<li><a href="#network/connection/methods/connectTcp"><span>connectTcp</span></a></li>
<li><a href="#network/connection/methods/setKeepalive"><span>setKeepalive</span></a></li>
<li><a href="#network/connection/methods/close"><span>close</span></a></li>
<li><a href="#network/connection/methods/setTimeouts"><span>setTimeouts</span></a></li>
<li><a href="#network/connection/methods/setOption"><span>setOption</span></a></li>
<li><a href="#network/connection/methods/onFinish"><span>onFinish</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#network/iostream"><span>IOStream</span></a>
<ul>
<li><a href="#network/iostream/properties"><span>Свойства</span></a></li>
<li><a href="#network/iostream/methods"><span>Методы</span></a>
<ul>
<li><a href="#network/iostream/methods/__construct"><span>__construct</span></a></li>
<li><a href="#network/iostream/methods/__get"><span>__get</span></a></li>
<li><a href="#network/iostream/methods/isFreed"><span>isFreed</span></a></li>
<li><a href="#network/iostream/methods/isFinished"><span>isFinished</span></a></li>
<li><a href="#network/iostream/methods/getBev"><span>getBev</span></a></li>
<li><a href="#network/iostream/methods/getFd"><span>getFd</span></a></li>
<li><a href="#network/iostream/methods/setContext"><span>setContext</span></a></li>
<li><a href="#network/iostream/methods/setFd"><span>setFd</span></a></li>
<li><a href="#network/iostream/methods/setTimeout"><span>setTimeout</span></a></li>
<li><a href="#network/iostream/methods/setTimeouts"><span>setTimeouts</span></a></li>
<li><a href="#network/iostream/methods/setPriority"><span>setPriority</span></a></li>
<li><a href="#network/iostream/methods/setWatermark"><span>setWatermark</span></a></li>
<li><a href="#network/iostream/methods/readLine"><span>readLine</span></a></li>
<li><a href="#network/iostream/methods/drain"><span>drain</span></a></li>
<li><a href="#network/iostream/methods/drainIfMatch"><span>drainIfMatch</span></a></li>
<li><a href="#network/iostream/methods/lookExact"><span>lookExact</span></a></li>
<li><a href="#network/iostream/methods/prependInput"><span>prependInput</span></a></li>
<li><a href="#network/iostream/methods/prependOutput"><span>prependOutput</span></a></li>
<li><a href="#network/iostream/methods/look"><span>look</span></a></li>
<li><a href="#network/iostream/methods/substr"><span>substr</span></a></li>
<li><a href="#network/iostream/methods/search"><span>search</span></a></li>
<li><a href="#network/iostream/methods/readExact"><span>readExact</span></a></li>
<li><a href="#network/iostream/methods/getInputLength"><span>getInputLength</span></a></li>
<li><a href="#network/iostream/methods/gracefulShutdown"><span>gracefulShutdown</span></a></li>
<li><a href="#network/iostream/methods/freezeInput"><span>freezeInput</span></a></li>
<li><a href="#network/iostream/methods/unfreezeInput"><span>unfreezeInput</span></a></li>
<li><a href="#network/iostream/methods/freezeOutput"><span>freezeOutput</span></a></li>
<li><a href="#network/iostream/methods/unfreezeOutput"><span>unfreezeOutput</span></a></li>
<li><a href="#network/iostream/methods/onWrite"><span>onWrite</span></a></li>
<li><a href="#network/iostream/methods/write"><span>write</span></a></li>
<li><a href="#network/iostream/methods/writeln"><span>writeln</span></a></li>
<li><a href="#network/iostream/methods/finish"><span>finish</span></a></li>
<li><a href="#network/iostream/methods/close"><span>close</span></a></li>
<li><a href="#network/iostream/methods/unsetFd"><span>unsetFd</span></a></li>
<li><a href="#network/iostream/methods/onReadEv"><span>onReadEv</span></a></li>
<li><a href="#network/iostream/methods/onWriteOnce"><span>onWriteOnce</span></a></li>
<li><a href="#network/iostream/methods/onWriteEv"><span>onWriteEv</span></a></li>
<li><a href="#network/iostream/methods/onStateEv"><span>onStateEv</span></a></li>
<li><a href="#network/iostream/methods/moveToBuffer"><span>moveToBuffer</span></a></li>
<li><a href="#network/iostream/methods/writeFromBuffer"><span>writeFromBuffer</span></a></li>
<li><a href="#network/iostream/methods/read"><span>read</span></a></li>
<li><a href="#network/iostream/methods/readUnlimited"><span>readUnlimited</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#network/server"><span>Server</span></a>
<ul>
<li><a href="#network/server/properties"><span>Свойства</span></a></li>
<li><a href="#network/server/methods"><span>Методы</span></a>
<ul>
<li><a href="#network/server/methods/__construct"><span>__construct</span></a></li>
<li><a href="#network/server/methods/finish"><span>finish</span></a></li>
<li><a href="#network/server/methods/bindSockets"><span>bindSockets</span></a></li>
<li><a href="#network/server/methods/bindSocket"><span>bindSocket</span></a></li>
<li><a href="#network/server/methods/attachBound"><span>attachBound</span></a></li>
<li><a href="#network/server/methods/detachBound"><span>detachBound</span></a></li>
<li><a href="#network/server/methods/closeBound"><span>closeBound</span></a></li>
<li><a href="#network/server/methods/inheritFromRequest"><span>inheritFromRequest</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#httprequest"><span>HTTPRequest</span></a>
<ul>
<li><a href="#httprequest/generic"><span>Generic</span></a>
<ul>
<li><a href="#httprequest/generic/properties"><span>Свойства</span></a></li>
<li><a href="#httprequest/generic/methods"><span>Методы</span></a>
<ul>
<li><a href="#httprequest/generic/methods/firstDeferredEventUsed"><span>firstDeferredEventUsed</span></a></li>
<li><a href="#httprequest/generic/methods/sendfile"><span>sendfile</span></a></li>
<li><a href="#httprequest/generic/methods/checkIfReady"><span>checkIfReady</span></a></li>
<li><a href="#httprequest/generic/methods/getUploadMaxSize"><span>getUploadMaxSize</span></a></li>
<li><a href="#httprequest/generic/methods/postPrepare"><span>postPrepare</span></a></li>
<li><a href="#httprequest/generic/methods/ensureSentHeaders"><span>ensureSentHeaders</span></a></li>
<li><a href="#httprequest/generic/methods/out"><span>out</span></a></li>
<li><a href="#httprequest/generic/methods/onParsedParams"><span>onParsedParams</span></a></li>
<li><a href="#httprequest/generic/methods/combinedOut"><span>combinedOut</span></a></li>
<li><a href="#httprequest/generic/methods/chunked"><span>chunked</span></a></li>
<li><a href="#httprequest/generic/methods/onWakeup"><span>onWakeup</span></a></li>
<li><a href="#httprequest/generic/methods/onSleep"><span>onSleep</span></a></li>
<li><a href="#httprequest/generic/methods/status"><span>status</span></a></li>
<li><a href="#httprequest/generic/methods/headers_sent"><span>headers_sent</span></a></li>
<li><a href="#httprequest/generic/methods/headers_list"><span>headers_list</span></a></li>
<li><a href="#httprequest/generic/methods/setcookie"><span>setcookie</span></a></li>
<li><a href="#httprequest/generic/methods/header"><span>header</span></a></li>
<li><a href="#httprequest/generic/methods/removeHeader"><span>removeHeader</span></a></li>
<li><a href="#httprequest/generic/methods/parseSize"><span>parseSize</span></a></li>
<li><a href="#httprequest/generic/methods/onUploadFileStart"><span>onUploadFileStart</span></a></li>
<li><a href="#httprequest/generic/methods/onUploadFileChunk"><span>onUploadFileChunk</span></a></li>
<li><a href="#httprequest/generic/methods/getUploadTempDir"><span>getUploadTempDir</span></a></li>
<li><a href="#httprequest/generic/methods/isUploadedFile"><span>isUploadedFile</span></a></li>
<li><a href="#httprequest/generic/methods/moveUploadedFile"><span>moveUploadedFile</span></a></li>
<li><a href="#httprequest/generic/methods/readBodyFile"><span>readBodyFile</span></a></li>
<li><a href="#httprequest/generic/methods/parse_str"><span>parse_str</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#httprequest/input"><span>Input</span></a>
<ul>
<li><a href="#httprequest/input/properties"><span>Свойства</span></a></li>
<li><a href="#httprequest/input/methods"><span>Методы</span></a>
<ul>
<li><a href="#httprequest/input/methods/setBoundary"><span>setBoundary</span></a></li>
<li><a href="#httprequest/input/methods/freeze"><span>freeze</span></a></li>
<li><a href="#httprequest/input/methods/unfreeze"><span>unfreeze</span></a></li>
<li><a href="#httprequest/input/methods/isFrozen"><span>isFrozen</span></a></li>
<li><a href="#httprequest/input/methods/isEof"><span>isEof</span></a></li>
<li><a href="#httprequest/input/methods/setRequest"><span>setRequest</span></a></li>
<li><a href="#httprequest/input/methods/sendEOF"><span>sendEOF</span></a></li>
<li><a href="#httprequest/input/methods/readFromBuffer"><span>readFromBuffer</span></a></li>
<li><a href="#httprequest/input/methods/readFromString"><span>readFromString</span></a></li>
<li><a href="#httprequest/input/methods/look"><span>look</span></a></li>
<li><a href="#httprequest/input/methods/parseMultipart"><span>parseMultipart</span></a></li>
<li><a href="#httprequest/input/methods/getChunkString"><span>getChunkString</span></a></li>
<li><a href="#httprequest/input/methods/writeChunkToFd"><span>writeChunkToFd</span></a></li>
<li><a href="#httprequest/input/methods/log"><span>log</span></a></li>
</ul></li></li>
</ul></li></li>
</ul></li>
<li><a href="#faq"><span>ЧаВО</span></a></li>
<li><a href="#publications"><span>Публикации</span></a></li>
<li><a href="#contribute"><span>Внести свою лепту</span></a>
<ul>
<li><a href="#contribute/this-doc"><span>Эта документация</span></a>
<ul>
<li><a href="#contribute/this-doc/commiting"><span>Внесение изменений</span></a></li>
<li><a href="#contribute/this-doc/markdown"><span>Формат документации</span></a>
<ul>
<li><a href="#contribute/this-doc/markdown/nesting"><span>Вложенность</span></a></li>
<li><a href="#contribute/this-doc/markdown/const"><span>Константы</span></a></li>
<li><a href="#contribute/this-doc/markdown/headers"><span>Заголовки</span></a></li>
<li><a href="#contribute/this-doc/markdown/lists"><span>Списки</span></a></li>
<li><a href="#contribute/this-doc/markdown/italic_bold"><span>Курсив и жирный</span></a></li>
<li><a href="#contribute/this-doc/markdown/simple_code"><span>Однострочный код</span></a></li>
<li><a href="#contribute/this-doc/markdown/multi_code"><span>Многострочный код</span></a></li>
<li><a href="#contribute/this-doc/markdown/tables"><span>Таблицы</span></a></li>
</ul></li></li>
</ul></li>
<li><a href="#contribute/php-doc"><span>PHPDoc</span></a></li>
<li><a href="#contribute/code"><span>Программный код</span></a></li>
</ul></li>
<li><a href="#doc-authors"><span>Авторы документации</span></a>
<ul>
<li><a href="#doc-authors/writing"><span>Написание</span></a></li>
<li><a href="#doc-authors/translation"><span>Перевод на русский</span></a></li>
<li><a href="#doc-authors/proofreading"><span>Корректура русской версии</span></a></li>
<li><a href="#doc-authors/scripting"><span>Программирование</span></a></li>
</ul></li>
</ul>

    </div>
    <div class="sidebar-downbtn">
        <i class="fa fa-arrow-down"></i>
    </div>
    <div class="main_wrap">
        <div class="main_container">
            
            <h2 id="intro"><div class="in anchor">Введение</div>

</h2>
<p class="doc-notice"><strong>Achtung!</strong><br />Only Russian version is available at the moment, but we are about to publish the English one and a variety of other translations. Currently you may consider reading old Wiki or auto-translating this page.<br />We are terribly sorry for the inconviniece.</p>
<p class="doc-notice">Документация активно дорабатывается!</p>
<p>PHPDaemon — это асинхронный демонизируемый фреймворк.
С&#160;его помощью легко писать очень быстрые сетевые приложения, веб-сервисы и многое другое.
Из&#160;коробки идут сервера FastCGI, HTTP, CGI, FlashPolicy, Telnet, WebSocket; клиенты MySQL, Redis, MongoDB, PostgreSQL, Memcached, IRC, XMPP и&#160;другие.
Работать с&#160;сетью действительно просто. Программист средней руки может написать, к&#160;примеру, полноценного IRC-бота за&#160;час.</p>
<ul>
<li>Официальный сайт <a href="http://daemon.io/">daemon.io</a>.  </li>
<li>GitHub репозиторий <a href="https://github.com/kakserpom/phpdaemon/">github.com/kakserpom/phpdaemon</a>.  </li>
<li>Обсудить проект можно&#160;в <a href="http://groups.google.com/group/phpdaemon">Google Groups</a>.  </li>
<li><a href="https://github.com/kakserpom/phpdaemon/issues">Отслеживание задач/ошибок</a></li>
</ul>
<h3 id="intro/usage"><div class="in anchor">Пользование документацией<span class="header-path"> <i>&larr;</i> <a href="#intro">Введение</a></span></div>

</h3>
<p>Как видите, вся документация представлена на одной странице, поэтому вы можете пользоваться обычным поиском по странице (горячая клавиша <code>Ctrl</code>&#160;+&#160;<code>F</code> или <code>Cmd</code>&#160;+&#160;<code>F</code>)</p>
<h4 id="intro/usage/hotkeys"><div class="in anchor">Горячие клавиши<span class="header-path"> <i>&larr;</i> <a href="#intro/usage">Пользование документацией</a> <i>&larr;</i> <a href="#intro">Введение</a></span></div>

</h4>
<ul>
<li><code>Ctrl</code> + <code>↑</code> — к предыдущему разделу на текущем уровне</li>
<li><code>Ctrl</code> + <code>↓</code> — к следующему разделу на текущем уровне</li>
<li><code>Ctrl</code> + <code>→</code> — на уровень вглубь</li>
<li><code>Ctrl</code> + <code>←</code> — на уровень ближе к поверхности</li>
</ul>
<h2 id="install"><div class="in anchor">Установка</div>

</h2>
<h3 id="install/requirements"><div class="in anchor">Требования<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<ul>
<li><code>PHP</code> версии не ниже 5.4;</li>
<li>Модули <code>posix</code>, <code>pcntl</code>, <code>socket</code>, <code>shmop</code>;</li>
<li><code>libevent 2</code>;</li>
<li><code>pecl-event</code> версии не ниже 1.6.1;</li>
</ul>
<p>Рекомендуется также установить:</p>
<ul>
<li><code>pecl-eio</code> для увеличения проиводительности файловой системы;</li>
<li><code>pecl-proctitle</code> для именования процессов в&#160;понятные названия: &#171;phpd: worker process&#187; (для PHP версии ниже 5.5);</li>
<li><code>pecl-inotify</code> для мониторинга файловой системы.</li>
</ul>
<h3 id="install/sources"><div class="in anchor">Исходный код<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Вы можете клонировать PHPDaemon репозиторий<br />
$&nbsp;<code>git clone https://github.com/kakserpom/phpdaemon.git</code></p>
<p>Или скачать текущую версию в виде архива<br />
$&nbsp;<code>wget https://github.com/kakserpom/phpdaemon/archive/master.zip</code></p>
<p>Установите необходимые модули<br />
$&nbsp;<code>pecl install event eio proctitle inotify</code></p>
<h3 id="install/composer"><div class="in anchor">Composer<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Добавьте раздел в ваш composer.json</p>
<pre><code class="">"require" : {
    "kakserpom/phpdaemon" : "dev-master"
}</code></pre>
<p>Подробная информации о пакете на <a href="https://packagist.org/packages/kakserpom/phpdaemon">packagist.org</a>.</p>
<h3 id="install/redhat"><div class="in anchor">CentOS/RedHat<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Для начала необходимо установить все сопутстсующие утилиты.<br />
$&nbsp;<code>sudo yum install -y git gcc openssl-devel libevent</code></p>
<p>Чтобы установить PHP 5.5 необходимо добавить Remi и Epel репозитории, потому что стандартный содержит старую версию.</p>
<p>Для RHEL/CentOS 6.4-6.0 32 Bit.<br />
$&nbsp;<code>sudo rpm -Uvh http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm</code><br />
$&nbsp;<code>sudo rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm</code></p>
<p>Для RHEL/CentOS 6.4-6.0 64 Bit.<br />
$&nbsp;<code>sudo rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</code><br />
$&nbsp;<code>sudo rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm</code></p>
<p>Устанавливаем PHP.<br />
$&nbsp;<code>sudo yum --enablerepo=remi,remi-test install -y php-cli php-devel php-pear php-process</code></p>
<p>Далее устанавливаем pecl модули.<br />
$&nbsp;<code>sudo -i</code><br />
$&nbsp;<code>pecl install event eio</code></p>
<p>В PHP отсутсвует контроль подгрузки модулей. Для корректной работы модуля event и eio необходим модуль sockets.
В системах RedHat/CentOS модули подгружаются в порядке названия, поэтому назовем конфиги этих модулей как z-event.ini и z-eio.ini соответсвенно.<br />
$&nbsp;<code>echo "extension=event.so" > /etc/php.d/z-event.ini</code>
$&nbsp;<code>echo "extension=eio.so" > /etc/php.d/z-eio.ini</code></p>
<p><code>Ctrl + D</code> - выходим из sudo</p>
<p>Установите <code>date.timezone</code> в /etc/php.ini в соответствие с временной зоной сервера.
Раскомментируйте и отредактируйте строку <code>;date.timezone = </code> (например, <code>date.timezone = Europe/Moscow</code>)<br />
$&nbsp;<code>sudo vi /etc/php.ini</code></p>
<p>Подготовим директорию для установки PHPDaemon.<br />
$&nbsp;<code>sudo mkdir /opt/phpdaemon</code><br />
$&nbsp;<code>sudo chown [your user]:[your group] /opt/phpdaemon</code><br />
$&nbsp;<code>cd /opt/phpdaemon</code></p>
<p>Устанавливаем PHPDaemon.<br />
$&nbsp;<code>cd /opt/phpdaemon</code><br />
$&nbsp;<code>git clone https://github.com/kakserpom/phpdaemon.git ./</code></p>
<p>Создаем конфигурационный файл из примера.<br />
$&nbsp;<code>cp /opt/phpdaemon/conf/phpd.conf.example /opt/phpdaemon/conf/phpd.conf</code></p>
<p>Сделаем ссылку на phpd для удобного управления демоном<br />
$&nbsp;<code>ln -s /opt/phpdaemon/bin/phpd /usr/bin/phpd</code></p>
<p>Пробуем запустить демон.<br />
$&nbsp;<code>sudo phpd start --verbose-tty=1</code></p>
<p>Опция <code>--verbose-tty=1</code> указывет демону выводить журнал в терминал.</p>
<p>Если вы видите что-то похожее на это:</p>
<pre><code>[PHPD] Loaded config file: '/opt/phpdaemon/conf/phpd.conf'
[PHPD] Loaded config file: 'conf/conf.d/ExampleJabberBot.conf'
[PHPD] Loaded config file: 'conf/conf.d/FastCGI.conf'
[PHPD] Loaded config file: 'conf/conf.d/FlashpolicyServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/HTTPServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/IdentServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/SSL-sample.conf'
[PHPD] Loaded config file: 'conf/conf.d/WebSocketServer.conf'</code></pre>
<p>Поздравляем! PHPDaemon запущен!</p>
<h3 id="install/ubuntu"><div class="in anchor">Ubuntu<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Для начала необходимо установить все сопутстсующие утилиты.<br />
$&nbsp;<code>sudo apt-get install gcc make libcurl4-openssl-dev libevent-dev git libevent</code></p>
<p>Устанавливаем PHP 5.5.<br />
$&nbsp;<code>sudo apt-get install php5-cli php5-dev php-pear</code></p>
<p>Далее устанавливаем pecl модули.<br />
$&nbsp;<code>sudo -i</code><br />
$&nbsp;<code>pecl install event eio</code><br />
$&nbsp;<code>echo "extension=event.so" > /etc/php5/mods-available/event.ini</code><br />
$&nbsp;<code>echo "extension=eio.so" > /etc/php5/mods-available/eio.ini</code></p>
<p>Создаем ссылки
$&nbsp;<code>ln -s /etc/php5/mods-available/event.ini /etc/php5/cli/conf.d/event.ini</code><br />
$&nbsp;<code>ln -s /etc/php5/mods-available/eio.ini /etc/php5/cli/conf.d/eio.ini</code></p>
<p><code>Ctrl + D</code> - выходим из sudo</p>
<p>Подготовим директорию для установки PHPDaemon.<br />
$&nbsp;<code>sudo mkdir /opt/phpdaemon</code>
$&nbsp;<code>sudo chown [your user]:[your group] /opt/phpdaemon</code><br />
$&nbsp;<code>cd /opt/phpdaemon</code></p>
<p>Устанавливаем PHPDaemon.<br />
$&nbsp;<code>cd /opt/phpdaemon</code><br />
$&nbsp;<code>git clone https://github.com/kakserpom/phpdaemon.git ./</code></p>
<p>Создаем конфигурационный файл из примера.<br />
$&nbsp;<code>cp /opt/phpdaemon/conf/phpd.conf.example /opt/phpdaemon/conf/phpd.conf</code></p>
<p>Сделаем ссылку на phpd для удобного управления демоном<br />
$&nbsp;<code>alias phpd='/opt/phpdaemon/bin/phpd'</code></p>
<p>Локальный алиас для sudo<br />
$&nbsp;<code>alias sudo='sudo '</code></p>
<p>Пробуем запустить демон.<br />
$&nbsp;<code>sudo phpd start --verbose-tty=1</code></p>
<p>Опция <code>--verbose-tty=1</code> указывет демону выводить журнал в терминал.</p>
<p>Если вы видите что-то похожее на это:</p>
<pre><code>[PHPD] Loaded config file: '/opt/phpdaemon/conf/phpd.conf'
[PHPD] Loaded config file: 'conf/conf.d/ExampleJabberBot.conf'
[PHPD] Loaded config file: 'conf/conf.d/FastCGI.conf'
[PHPD] Loaded config file: 'conf/conf.d/FlashpolicyServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/HTTPServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/IdentServer.conf'
[PHPD] Loaded config file: 'conf/conf.d/SSL-sample.conf'
[PHPD] Loaded config file: 'conf/conf.d/WebSocketServer.conf'</code></pre>
<p>Поздравляем! PHPDaemon запущен!</p>
<p>Добавим алиасы чтобы они были доступны после перезагрузки
$&nbsp;<code>echo "alias phpd='/opt/phpdaemon/bin/phpd'" >> ~/.bashrc'</code>
$&nbsp;<code>echo "alias sudo='sudo /opt/phpdaemon/bin/phpd'" >> ~/.bashrc'</code></p>
<h3 id="install/gentoo"><div class="in anchor">Gentoo<span class="header-path"> <i>&larr;</i> <a href="#install">Установка</a></span></div>

</h3>
<p>Вы можете установить PHPDaemon с помощью <a href="https://github.com/lexa-uw/layman-phpdaemon">layman overlay</a>.</p>
<p>Добавьте ссылку в секцию overlays в файле layman.cfg:<br />
<code>https://github.com/lexa-uw/layman-phpdaemon/blob/master/layman.xml</code></p>
<p>В итоге будет выглядеть примерно так:</p>
<pre><code>overlays  : http://www.gentoo.org/proj/en/overlays/repositories.xml
            https://github.com/lexa-uw/layman-phpdaemon/blob/master/layman.xml</code></pre>
<p>Выполняем команды<br />
$&nbsp;<code>sudo layman -L</code><br />
$&nbsp;<code>sudo layman -a phpdaemon</code><br />
$&nbsp;<code>sudo emerge www-servers/phpdaemon</code></p>
<p>К примеру, нижеследующие команды устанавливают phpdaemon версии 0.4.1, 1.0_beta2 и еженедельный релиз.</p>
<pre><code>$ sudo emerge "=www-servers/phpdaemon-0.4.1" "=www-servers/phpdaemon-1.0_beta2" "www-servers/phpdaemon"
Это пакеты, которые будут объединены по порядку:

Расчёт зависимостей... готово!
[ebuild   R   ~] www-servers/phpdaemon-0.4.1:0.4::phpdaemon  USE="libevent -examples -runkit" 0 kB
[ebuild   R   ~] www-servers/phpdaemon-1.0_beta2:1.0::phpdaemon  USE="eio event -runkit" 0 kB
[ebuild   R   ~] www-servers/phpdaemon-20130907:weekly::phpdaemon  USE="eio event -runkit" 0 kB
...</code></pre>
<p>После установки вы можете использовать "eselect phpdaemon set"  для создания символической ссылки на /usr/bin/phpd</p>
<pre><code>$ sudo eselect phpdaemon list
Available phpdaemon targets:
  [1]   phpd0.4
  [2]   phpd1.0
  [3]   phpdweekly
$ sudo eselect phpdaemon set 3
$ sudo eselect phpdaemon show
Current phpdaemon:
  weekly</code></pre>
<p>Добавить phpdaemon в автозагрузку:</p>
<pre><code>$ rc-update add phpd default
 * service phpd added to runlevel default</code></pre>
<p>Добавить отдельные init.d скрипты для разных версий:</p>
<pre><code>$ ln -s /etc/init.d/phpd /etc/init.d/phpd-0.4
$ ln -s /etc/init.d/phpd /etc/init.d/phpd-1.0
$ ln -s /etc/init.d/phpd /etc/init.d/phpd-weekly</code></pre>
<p>Добавить phpd-1.0 в автозагрузку:</p>
<pre><code>$ rc-update add phpd-1.0 default
 * service phpd added to runlevel default</code></pre>
<h2 id="basics"><div class="in anchor">Основы</div>

</h2>
<p>PHPDaemon представляет из&#160;себя один мастер-процесс с&#160;несколькими рабочими процессами.</p>
<p>Приложение, в&#160;зависимости от&#160;нагрузки, инициализируется в&#160;одном или нескольких рабочих процессах.
Во&#160;втором случае запрос будет передан одному свободному рабочему процессу.</p>
<p>Механизма взаимодействия между ребочими процессами не&#160;предусмотрено, поэтому для синхронизации приложений в&#160;разных процессах вы&#160;можете использовать стороннее&#160;ПО, например Redis.
Также есть возможность задать опцию приложения <code>limit-instances N;</code>, чтобы ограничить кол-во копий приложения во&#160;всех рабочих процессах.</p>
<p>Исполняющий файл находится в дирктории <code>./bin/phpd</code>.
Вы можете создать свой исполняющий файл, как показано в примере <code>./bin/sampleapp</code>.
Перед запуском демон проверяет переменную <code>$configFile</code>, используя её для загрузки конфигурации.</p>
<h3 id="basics/pseudotypes"><div class="in anchor">Псевдотипы<span class="header-path"> <i>&larr;</i> <a href="#basics">Основы</a></span></div>

</h3>
<h4 id="basics/pseudotypes/url"><div class="in anchor">url<span class="header-path"> <i>&larr;</i> <a href="#basics/pseudotypes">Псевдотипы</a> <i>&larr;</i> <a href="#basics">Основы</a></span></div>

</h4>
<p>Псевдотип url @TODO</p>
<h2 id="control"><div class="in anchor">Управление</div>

</h2>
<table class="invis">
  <tr>
    <td class="nowrap">$ <code>phpd start</code></td>
    <td>Запуск демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd stop</code></td>
    <td>Остановка демона<br><code>SYSCTL: SIGTERM, SIGQUIT</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd hardstop</code></td>
    <td>Принудительная остановка демона<br><code>SYSCTL: SIGINT, SIGKILL</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd update</code></td>
    <td>Обновление конфигурации<br><code>SYSCTL: SIGHUP</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd reload</code></td>
    <td>Плавный перезапуск всех рабочих процессов<br><code>SYSCTL: SIGUSR2</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd reopenlog</code></td>
    <td>Переоткрытие журналов<br><code>SYSCTL: SIGUSR1</code></td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd restart</code></td>
    <td>Плавный перезапуск демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd hardrestart</code></td>
    <td>Принудительный перезапуск демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd status</code></td>
    <td>Вывод статуса демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd fullstatus</code></td>
    <td>Вывод подробной информации работы демона</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd configtest</code></td>
    <td>Вывод глобальных опций. В скобках будет указано значение по-умочанию.</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd log [-n K]</code></td>
    <td>Вывод журнала в реальном времени с помощью команды <code>tail -f</code>. C параметром <code>-n K</code> выводится K последних строк. Или используйте <code>-n +K</code> для вывода строк, начиная с K.</td>
  </tr>
  <tr>
    <td class="nowrap">$ <code>phpd runworker</code></td>
    <td>Запуск рабочего процесса без мастер-процесса. Используется для отладки.</td>
  </tr>
</table>
<h2 id="examples"><div class="in anchor">Примеры</div>

</h2>
<p>Примеры</p>
<h2 id="app_resolver"><div class="in anchor">Маршрутизация</div>

</h2>
<p>Получая запросы демон первым делом должен определить какому приложению он&#160;должен передать обработку.
Для этого служит метод <code>getRequestRoute</code> в&#160;классе <code>AppResolver</code> [<a href="https://github.com/kakserpom/phpdaemon/blob/master/PHPDaemon/Core/AppResolver.php#L159">GitHub</a>].</p>
<p>Вы&#160;можете определить свой обработчик, пример которого лежит в <code>./conf/AppResolver.php</code> [<a href="https://github.com/kakserpom/phpdaemon/blob/master/conf/AppResolver.php">GitHub</a>].</p>
<p>Метод <code>getRequestRoute</code> принимает два параметра:</p>
<ul>
<li><code>$req</code> &#8212; объект <code>stdClass</code>, с&#160;параметрами запроса;</li>
<li><code>$upstream</code> &#8212; объект сервера, принимающий входящие запросы, например <code>PHPDaemon\Servers\HTTP\Connection</code>.</li>
</ul>
<p>Результатом работы может быть:</p>
<ul>
<li>Имя приложения;</li>
<li><code>null</code> для попытки передать запрос приложению по-умолчанию;</li>
<li><code>false</code> для завершения обработки запроса.</li>
</ul>
<p>Не&#160;забудьте указать&#160;в <a href="#osnovnyie-puti">конфиге</a> путь до&#160;вашего AppResolver, например <code>path './conf/AppResolver.php';</code>.</p>
<p>В&#160;настройках <a href="#serveryi">сервера</a>, принимающего запросы, с&#160;помощью опции <code>responder</code> можно указать имя приложения по-умолчанию, которому будет передан запрос, если <code>getRequestRoute</code> вернул <code>null</code>.</p>
<h2 id="config"><div class="in anchor">Конфигурация</div>

</h2>
<h3 id="config/types"><div class="in anchor">Типы данных<span class="header-path"> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h3>
<p>Большинство опций phpdaemon описывается своими типами данных, позволяющие указывать значения расширенным форматом.</p>
<h4 id="config/types/size"><div class="in anchor">Size<span class="header-path"> <i>&larr;</i> <a href="#config/types">Типы данных</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Предназначен для записи объема информации. Можно записать в виде целого числа или целого числа с постфиксом.</p>
<p>Формат записи: <code>integer [bBkKmMgG]?</code></p>
<table>
<thead>
<tr>
<th>Постфикс</th>
<th>Множитель</th>
<th>Пример</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>b, B</td>
<td>1</td>
<td>1b</td>
<td>1</td>
</tr>
<tr>
<td>k</td>
<td>1000</td>
<td>1k</td>
<td>1000</td>
</tr>
<tr>
<td>K</td>
<td>1024</td>
<td>1K</td>
<td>1024</td>
</tr>
<tr>
<td>m</td>
<td>1000 * 1000</td>
<td>1m</td>
<td>1000000</td>
</tr>
<tr>
<td>M</td>
<td>1024 * 1024</td>
<td>1M</td>
<td>1048576</td>
</tr>
<tr>
<td>g</td>
<td>1000 * 1000 * 1000</td>
<td>1g</td>
<td>1000000000</td>
</tr>
<tr>
<td>G</td>
<td>1024 * 1024 * 1024</td>
<td>1G</td>
<td>1073741824</td>
</tr>
</tbody>
</table>
<h4 id="config/types/time"><div class="in anchor">Time<span class="header-path"> <i>&larr;</i> <a href="#config/types">Типы данных</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Предназначен для записи количества секунд. Число может быть с плавающей точкой с использованием только символа <code>"."</code>.</p>
<p>Формат записи: <code>float [smhd]?</code> или <code>(float [smhd])+</code></p>
<table>
<thead>
<tr>
<th>Постфикс</th>
<th>Множитель</th>
<th>Пример</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>s</td>
<td>1</td>
<td>1s</td>
<td>1</td>
</tr>
<tr>
<td>m</td>
<td>60</td>
<td>1m</td>
<td>60</td>
</tr>
<tr>
<td>h</td>
<td>60 * 60</td>
<td>2h 12s</td>
<td>7212</td>
</tr>
<tr>
<td>d</td>
<td>60 * 60 * 24</td>
<td>1d 15m 32s</td>
<td>87332</td>
</tr>
</tbody>
</table>
<h4 id="config/types/number"><div class="in anchor">Number<span class="header-path"> <i>&larr;</i> <a href="#config/types">Типы данных</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Предназначен для записи чисел.</p>
<p>Формат записи: <code>integer [kKmMgG]?</code></p>
<table>
<thead>
<tr>
<th>Постфикс</th>
<th>Множитель</th>
<th>Пример</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>k, K</td>
<td>1000</td>
<td>1k</td>
<td>1000</td>
</tr>
<tr>
<td>m, M</td>
<td>1000 * 1000</td>
<td>1M</td>
<td>1000000</td>
</tr>
<tr>
<td>g, G</td>
<td>1000 * 1000 * 1000</td>
<td>1g</td>
<td>1000000000</td>
</tr>
</tbody>
</table>
<h3 id="config/variables"><div class="in anchor">Глобальные опции<span class="header-path"> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h3>
<p>Два способа установки опций:</p>
<ol>
<li>Конфигурационный файл <code>./conf/phpd.conf</code>;</li>
<li>Параметры командной строки, например <code>--max-workers=1</code>.</li>
</ol>
<blockquote>
<p>Параметры командной строки имеют больший приоритет.</p>
</blockquote>
<h4 id="config/variables/file"><div class="in anchor">Конфигурационный файл<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<p>Формат записи опций следующий:<br />
<code>название-опции;</code> или <code>название-опции значение;</code></p>
<p><code>название-опции</code> не чувствительно к регистру и использованию знака дефиса&nbsp;<code>"-"</code>.
Следующие варианты написания равнозначны:</p>
<ul>
<li><code>add-include-path</code>;</li>
<li><code>addincludepath</code>;</li>
<li><code>addIncludePath</code>;</li>
<li><code>ADDInclude-path</code>.</li>
</ul>
<p>Значение может отсутствовать, что приравнивется к <code>bool(true)</code>, либо может быть записано следующими способами:</p>
<ul>
<li><code>null</code>;</li>
<li>булевым выражением <code>false</code> или <code>true</code>;</li>
<li>целым числом;</li>
<li>числом с плавающей точкой;</li>
<li>строкой; если в строке присутствует символ пробела&nbsp;<code>" "</code> или запятая&nbsp;<code>","</code>, то строку необходимо обернуть одинарными или двойными кавычками;</li>
<li>массивом.</li>
</ul>
<p>Для записи массива используется разделитель пробел&nbsp;<code>" "</code> или запятая&nbsp;<code>","</code>. В одном значении можно использовать оба разделителя одновременно.</p>
<table>
<thead>
<tr>
<th>Пример опции</th>
<th>Вывод var_dump</th>
</tr>
</thead>
<tbody>
<tr>
<td>var-name;</td>
<td>bool(true)</td>
</tr>
<tr>
<td>var-name null;</td>
<td>NULL</td>
</tr>
<tr>
<td>var-name true;</td>
<td>bool(true)</td>
</tr>
<tr>
<td>var-name false;</td>
<td>bool(false)</td>
</tr>
<tr>
<td>var-name 0;</td>
<td>int(0)</td>
</tr>
<tr>
<td>var-name 1;</td>
<td>int(1)</td>
</tr>
<tr>
<td>var-name 3.14;</td>
<td>float(3.14)</td>
</tr>
<tr>
<td>var-name "3.14";</td>
<td>string(4) "3.14"</td>
</tr>
<tr>
<td>var-name "пример. длинной строки,второй пример";</td>
<td>string(67) "пример. длинной строки,второй пример"</td>
</tr>
<tr>
<td>var-name пример. длинной строки,второй пример;</td>
<td>array(5) {<br>&nbsp;&nbsp;&nbsp;&nbsp;[0]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(13) "пример."<br>&nbsp;&nbsp;&nbsp;&nbsp;[1]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(14) "длинной"<br>&nbsp;&nbsp;&nbsp;&nbsp;[2]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(12) "строки"<br>&nbsp;&nbsp;&nbsp;&nbsp;[3]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(12) "второй"<br>&nbsp;&nbsp;&nbsp;&nbsp;[4]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(12) "пример"<br>}</td>
</tr>
<tr>
<td>var-name 1, 'a' null 3.14 'пару слов';</td>
<td>array(5) {<br>&nbsp;&nbsp;&nbsp;&nbsp;[0]=><br>&nbsp;&nbsp;&nbsp;&nbsp;int(1)<br>&nbsp;&nbsp;&nbsp;&nbsp;[1]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(1) "a"<br>&nbsp;&nbsp;&nbsp;&nbsp;[2]=><br>&nbsp;&nbsp;&nbsp;&nbsp;NULL<br>&nbsp;&nbsp;&nbsp;&nbsp;[3]=><br>&nbsp;&nbsp;&nbsp;&nbsp;float(3.14)<br>&nbsp;&nbsp;&nbsp;&nbsp;[4]=><br>&nbsp;&nbsp;&nbsp;&nbsp;string(17) "пару слов"<br>}</td>
</tr>
</tbody>
</table>
<p>Ниже будут перечислены глобальные опции демона в формате:<br />
<code>название-опции (тип-данных = значение-по-умолчанию);</code></p>
<h4 id="config/variables/graceful_restart"><div class="in anchor">Плавный перезапуск рабочих процессов<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>max-requests (<a href="#config/types/number">Number</a> = '10k')</code><br />
Максимальное количество запросов перед перезапуском рабочего процесса.
<code>0</code> – неограничено.</p>
</li>
<li>
<p><code>max-memory-usage (<a href="#config/types/size">Size</a> = '0b')</code><br />
Максимальный допустимый порог потребления памяти рабочим процессом.
<code>0</code> – неограничено.</p>
</li>
<li>
<p><code>max-idle (<a href="#config/types/time">Time</a> = '0s')</code><br />
Максимальное время простоя рабочего процесса перед перезапуском.
<code>0</code> – неограничено.</p>
</li>
<li>
<p><code>auto-reload (<a href="#config/types/time">Time</a> = '0s')</code><br />
Задает интервал проверки всех подключенных файлов. При изменении файлов плавно перезагружает рабочие процессы.</p>
</li>
<li><code>auto-reimport (boolean = false)</code><br />
На лету импортирует методы и функции из измененных файлов с помощью runkit, без перезагрузки рабочего процесса.</li>
</ul>
<h4 id="config/variables/pathes"><div class="in anchor">Основные пути<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>pid-file (string = '/var/run/phpd.pid')</code><br />
Путь к pid-файлу. Убедитесь что имеется доступ на запись.</p>
</li>
<li>
<p><code>config-file (string = '/etc/phpdaemon/phpd.conf;/etc/phpd/phpd.conf;./conf/phpd.conf')</code><br />
Путь к файлу конфигурации. Можно указать несколько через разделитель <code>";"</code>.<br />
Будет загружен только первый найденный конфигурационный файл.</p>
</li>
<li>
<p><code>path (string = '/etc/phpdaemon/AppResolver.php;./conf/AppResolver.php')</code><br />
Путь к Application Resolver. Можно указать несколько через разделитель <code>";"</code>.<br />
Будет загружен только первый найденный файл.</p>
</li>
<li><code>add-include-path (string = null)</code><br />
Дополнительные пути для директивы <a href="http://www.php.net/manual/ru/ini.core.php#ini.include-path">include_path</a>.<br />
Можно указать несколько через разделитель <code>":"</code>.</li>
</ul>
<h4 id="config/variables/master"><div class="in anchor">Связанные с мастер-процессом<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>mpm-delay (<a href="#config/types/time">Time</a> = '0.1s')</code><br />
Интервал между срабатываниями Мульти-Процессного Менеджера.<br />
МПМ отвечает за запуск/выключение рабочих процессов, согласно настройкам.</p>
</li>
<li>
<p><code>start-workers (<a href="#config/types/number">Number</a> = 4)</code><br />
Кол-во рабочих процессов при запуске демона.</p>
</li>
<li>
<p><code>min-workers (<a href="#config/types/number">Number</a> = 4)</code><br />
Минимальное допустимое кол-во рабочих процессов.</p>
</li>
<li>
<p><code>max-workers (<a href="#config/types/number">Number</a> = 8)</code><br />
Максимальное допустимое кол-во рабочих процессов.</p>
</li>
<li>
<p><code>min-spare-workers (<a href="#config/types/number">Number</a> = 2)</code><br />
Минимальное количество простаивающих рабочих процессов: phpDaemon запустит дополнительный рабочие процессы когда нагрузка увеличится, чтобы простаивающих рабочих процессов было достаточно. Сверху ограничивается параметром max-workers.</p>
</li>
<li>
<p><code>max-spare-workers (<a href="#config/types/number">Number</a> = 0)</code><br />
Максимальное кол-во простаивающих рабочих процессов. phpDaemon выключит дополнительные рабочие процессы когда нагрузка спадёт.</p>
</li>
<li>
<p><code>master-priorty (<a href="#config/types/number">Number</a> = 100)</code><br />
Приоритет мастер-процесса. Чем меньше значение, тем выше приоритет.</p>
</li>
<li>
<p><code>ipc-thread-priority (<a href="#config/types/number">Number</a> = 100)</code><br />
Приоритет IPC процесса. Чем меньше значение, тем выше приоритет.</p>
</li>
<li>
<p><code>worker-priority (<a href="#config/types/number">Number</a> = 4)</code><br />
Приоритет рабочего процесса. Чем меньше значение, тем выше приоритет.</p>
</li>
<li><code>throw-exception-on-shutdown (boolean = false)</code><br />
Выбрасывать исключение <code>Exception('event shutdown')</code> по завершению процесса.</li>
</ul>
<h4 id="config/variables/requests"><div class="in anchor">Запросы<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>locale (string = '')</code><br />
Устанавливает настройки локали. Можно указать несколько через разделитель <code>","</code>.</p>
</li>
<li><code>ob-filter-auto (boolean = true)</code><br />
Включить стандартный <code>ob_</code> фильтр.</li>
</ul>
<h4 id="config/variables/workers"><div class="in anchor">Рабочие процессы<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>chroot (string = '/')</code><br />
Смена системного корня для рабочих процессов.</p>
</li>
<li>
<p><code>cwd (string = '.')</code><br />
Задание рабочей директории для рабочих процессов.</p>
</li>
<li>
<p><code>user (string = null)</code><br />
Пользователь для рабочих процессов. Используйте безопасного пользователя, не используйте root, если не знаете что делаете.</p>
</li>
<li>
<p><code>group (string = null)</code><br />
Группа для рабочих процессов. Используйте безопасную группу, не используйте root, если не знаете что делаете.</p>
</li>
<li><code>auto-gc (<a href="#config/types/number">Number</a> = '1k')</code><br />
Включает сборщик мусора вызываемый каждые n запросов. <code>0</code> – выключает совсем.</li>
</ul>
<h4 id="config/variables/logging"><div class="in anchor">Журналирование и отладка<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>logging (boolean = true)</code><br />
Включает журналирование.</p>
</li>
<li>
<p><code>log-storage (string = '/var/log/phpdaemon.log')</code><br />
Путь к файлу журнала.</p>
</li>
<li>
<p><code>log-errors (boolean = true)</code><br />
Включает журналирование локальных ошибок таких как Undefined route in WebSocketServer, и т.д.</p>
</li>
<li>
<p><code>log-worker-set-state (boolean = false)</code><br />
Включает журналирование смены состояния рабочего процесса.</p>
</li>
<li>
<p><code>log-events (boolean = false)</code><br />
Включает журналирование сетевых событий.</p>
</li>
<li>
<p><code>log-signals (boolean = false)</code><br />
Включает журналирование системных сигналов.</p>
</li>
<li>
<p><code>verbose-tty (boolean = false)</code><br />
Если параметр включен, журнал будет выводиться в терминал (STDOUT).</p>
<blockquote>
<p>Учтите, что в обычном варианте запуска (не runworker) ввод из терминала игнорируется, хотя после запуска с этим параметром может показаться, что программа привязана к терминалу.</p>
</blockquote>
</li>
<li><code>restrict-error-control (boolean = false)</code><br />
Выключает оператор управления ошибками <code>"@"</code>.</li>
</ul>
<h4 id="config/variables/eio"><div class="in anchor">Подсистема ввода-вывода POSIX<span class="header-path"> <i>&larr;</i> <a href="#config/variables">Глобальные опции</a> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h4>
<ul>
<li>
<p><code>eio-enabled (boolean = true)</code><br />
Включает поддержку EIO.</p>
</li>
<li>
<p><code>eio-set-max-idle (<a href="#config/types/time">Time</a> = null)</code><br />
Устанавливает максимальное количество ожидающих потоков.</p>
</li>
<li>
<p><code>eio-set-min-parallel (<a href="#config/types/number">Number</a> = null)</code><br />
Устанавливает минимальное количество параллельных потоков.</p>
</li>
<li>
<p><code>eio-set-max-parallel (<a href="#config/types/number">Number</a> = null)</code><br />
Устанавливает максимальное количество параллельных потоков.</p>
</li>
<li>
<p><code>eio-set-max-poll-reqs (<a href="#config/types/number">Number</a> = null)</code><br />
Устанавливает максимальное количество обрабатываемых запросов.</p>
</li>
<li><code>eio-set-max-poll-time (<a href="#config/types/time">Time</a> = null)</code><br />
Устанавливает максимальное время выполнения.</li>
</ul>
<h3 id="config/application"><div class="in anchor">Приложения<span class="header-path"> <i>&larr;</i> <a href="#config">Конфигурация</a></span></div>

</h3>
<ul>
<li>
<p><code>enable (boolean = true)</code>
Разрешает демону инициализацию приложения. По-умочанию, описанное в конфигурационном файле приложение, всегда включено.</p>
</li>
<li><code>limit-instances (integer = null)</code>
Ограничивает кол-во инициализированных приложений во всех рабочих процессах. По-умолчанию ограничения нет.</li>
</ul>
<h2 id="development"><div class="in anchor">Разработка</div>

</h2>
<h3 id="development/pseudotypes"><div class="in anchor">Псевдотипы<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h4 id="development/pseudotypes/url"><div class="in anchor">url<span class="header-path"> <i>&larr;</i> <a href="#development/pseudotypes">Псевдотипы</a> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h4>
<p>Псевдотип url @TODO</p>
<h3 id="development/app_instance"><div class="in anchor">Приложение<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<p>Приложением в phpDaemon является наследник класса AppInstance, для того чтобы создать новое приложение, необходимо создать файл applications/[имя].php и объявить в нем class Example extends AppInstance. Затем, ядро будет вызывать методы в ответ на которые приложение должно выполнять необходимые операции:</p>
<ul>
<li>init() - инициализации приложения. Приложению необходимо сохранить необходимые зависимости и подготовиться к запуску.</li>
<li>onReady() - означает что рабочий процесс, в котором запущено приложение, готов к обработке.</li>
<li>onShutdown() - завершение приложения.</li>
<li>beginRequest(Request $req, AppInstance $upstream) - запрашивается объект нового запроса к приложению. Метод может вернуть false, это значит что приложение отказывается (или не умеет) обрабатывать запросы. После вызова этого метода, объект запроса попадает в очередь и вызывается итеративно.</li>
</ul>
<p>Класс декларируется как class ExampleRequest extends Request.
Методы:</p>
<ul>
<li>init() - вызывается единожды при создании объекта запроса.</li>
<li>run() - вызывается диспетчером очереди до тер пор, пока не будет возращен код 1 или не будет вызван метод terminate().</li>
<li>terminate() - его не следует перезагружать. Метод прерывает и завершает выполнение запроса.</li>
<li>sleep($seconds) - время в секундах, через которое необходимо вернуться к запросу.</li>
<li>wakeup() - прервать sleep.</li>
<li>onAbort() - событие сброса запроса, вызывается в случае если клиент отвалился.</li>
<li>header($header) - установить заголовок HTTP-ответа.</li>
<li>out($str) - записать строку в поток вывода.</li>
<li>combinedOut($str) - записать строку в поток вывода, содержащую и заголовки и тело.</li>
<li>stdin($str) - обработчик потока ввода запроса.</li>
<li>finish($status) - 0 - normal, -1 - abort, -2 - termination</li>
<li>chunked() - устанавливает Transfer-Encoding: chunked.</li>
</ul>
<h3 id="development/request"><div class="in anchor">Обработка запросов<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h3 id="development/servers_clients"><div class="in anchor">Серверы и клиенты<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h3 id="development/debugging"><div class="in anchor">Отладка<span class="header-path"> <i>&larr;</i> <a href="#development">Разработка</a></span></div>

</h3>
<h2 id="servers"><div class="in anchor">Серверы</div>

</h2>
<p>Серверы предназначены для приема запросов и передачи их приложениям.</p>
<p>Каждый сервер представляет собой класс наследуемый от <a target="_self" class="tpl-inlink" href="#network/server">Сеть\Сервер<i class="fa fa-caret-square-o-up"></i></a>, который в свой очередь наследуется от <a target="_self" class="tpl-inlink" href="#network/pool">Сеть\Пул<i class="fa fa-caret-square-o-up"></i></a>. 
Сервер можно инициировать прямо в пользовательском приложении,  например:</p>
<pre><code class="php">/* ... */
$this->pool = \PHPDaemon\Servers\FlashPolicy::getInstance([
    'listen' => 'tcp://0.0.0.0:843'
]);
$this->pool->onReady();
/* ... */</code></pre>
<p>Но не забывайте, что в таком случае следует отправлять ему onReady(), onShutdown() и onConfigUpdated() события.</p>
<p>В большинстве случаев сервер запускается одноименнным приложением Pool.</p>
<pre><code class="ruby"># контекст для ssl соединения (опционально)
TransportContext:myContext {
    ssl;
    certFile "/path/to/cert.pem";
    pkFile "/path/to/privkey.pem";
    passphrase "";
    verifyPeer true;
    allowSelfSigned true;
}

# слушаем 80 и 443 порт
Pool:HTTPServer {
    listen "tcp://0.0.0.0:80", "tcp://0.0.0.0:443##myContext";
    port 80;
    privileged;
    maxconcurrency 1;
}</code></pre>
<h3 id="servers/options"><div class="in anchor">Опции серверов<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>В данном разделе перечислены опции, используемые всеми серверами.</p>
<ul>
<li>
<p><code>listen (string|array)</code><br />
Прослушиваемые сервером адреса. Можно указать несколько через разделитель&nbsp;<code>","</code>.</p>
</li>
<li>
<p><code>privileged</code><br />
@TODO</p>
</li>
<li>
<p><code>max-concurrency</code><br />
Максимальное количество открытых соединений.</p>
</li>
<li>
<p><code>max-allowed-packet</code><br />
Максимальный допустимый размер пакета.</p>
</li>
<li>
<p><code>connection-class</code><br />
Класс соединения по-умолчанию.</p>
</li>
<li>
<p><code>name</code><br />
@TODO</p>
</li>
<li>
<p><code>allowed-clients</code><br />
Разрешенные IP-адреса или маски через запятую.</p>
</li>
<li>
<p><code>ssl</code><br />
Включает ssl.</p>
</li>
<li>
<p><code>ssl-port</code><br />
@TODO</p>
</li>
<li>
<p><code>cert-file</code><br />
@TODO</p>
</li>
<li>
<p><code>pk-file</code><br />
@TODO</p>
</li>
<li>
<p><code>passphrase</code><br />
@TODO</p>
</li>
<li>
<p><code>verify-peer</code><br />
@TODO</p>
</li>
<li>
<p><code>allow-self-signed</code><br />
@TODO</p>
</li>
<li>
<p><code>verify-depth</code><br />
@TODO</p>
</li>
<li><code>ca-file</code><br />
@TODO</li>
</ul>
<h3 id="servers/http"><div class="in anchor">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/HTTP"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Сервер использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Это транспортное приложение предоставляет HTTP сервер для phpDaemon. Входящие Websocket соединения будут переданы приложению WebsocketServer.</p>
<p>HTTP пробует определить приложение через AppResolver, не забудьте сконфигурировать его.</p>
<h4 id="servers/http/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = 'tcp://0.0.0.0')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 80)</code><br />
Прослушиваемый порт</p>
</li>
<li>
<p><code>allowed-clients (string = '127.0.0.1')</code><br />
IP адреса (через запятую) которым позволено делать запросы. CIDR-маски поддерживаются</p>
</li>
<li>
<p><code>send-file (boolean = false)</code><br />
Оптимизирует обработку запросов, предварительно записывая их в файл.
Опция будет игнорироваться если передан параметр <code>server['DONT_USE_SENDFILE']</code></p>
</li>
<li>
<p><code>send-file-dir (string = '/dev/shm')</code><br />
Директория для sendfile</p>
</li>
<li>
<p><code>send-file-prefix (string = 'http-')</code><br />
Префикс для sendfile файлов</p>
</li>
<li>
<p><code>send-file-onlybycommand (boolean = false)</code><br />
Включать sendfile если передан <code>server['USE_SENDFILE']</code></p>
</li>
<li>
<p><code>expose (boolean = true)</code><br />
Включать версию PHPDaemon в заголовке <code>X-Powered-By</code></p>
</li>
<li>
<p><code>keepalive (<a href="#config/types/time">Time</a> = '0s')</code><br />
Таймаут бездействия перед закрытием keep-alive соединения</p>
</li>
<li>
<p><code>chunksize (<a href="#config/types/size">Size</a> = '8k')</code><br />
Размер куска</p>
</li>
<li>
<p><code>defaultcharset (string = 'utf-8')</code><br />
Кодировка по-умолчанию</p>
</li>
<li>
<p><code>wss-name (string = '')</code><br />
Имя пула WebSocket-сервера, куда направлять WebSocket-соединения</p>
</li>
<li>
<p><code>fps-name (string = '')</code><br />
Имя пула FlashPolicy-сервера, куда адресовать FlashPolicy-соединения</p>
</li>
<li>
<p><code>upload-max-size (<a href="#config/types/size">Size</a> = ini_get('upload_max_filesize'))</code><br />
Максимальный размер загружаемого файла</p>
</li>
<li><code>responder (string = null)</code><br />
Имя приложения по-умолчанию для обработки запросов с данного сервера</li>
</ul>
<h3 id="servers/fastcgi"><div class="in anchor">FastCGI <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FastCGI"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Сервер использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Это транспортное приложение представляет FastCGI сервер для phpDaemon.</p>
<p>После конфигурирования phpDaemon вам также следует задействовать веб-сервер, который поддерживает FastCGI. Если вы еще не сделали выбор в пользу одного из них, мы советуем <a target="_blank" class="tpl-outlink" href="http://nginx.org">NGINX<i class="fa fa-external-link"></i></a>.</p>
<p>Веб-сервер может передавать FastCGI-серверу параметр APPNAME, который содержит название приложения которое должно обработать данный запрос. Если параметр не передан, FastCGI-сервер попробует определить это через AppResolver.</p>
<p>Пример конфигурации NGINX:</p>
<pre><code class="nginx">location /Example/ {
    fastcgi_pass unix:/tmp/phpdaemon.fcgi.sock;
    fastcgi_param APPNAME Example;
    include fastcgi_params;
}</code></pre>
<h4 id="servers/fastcgi/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/fastcgi">FastCGI <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FastCGI"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = 'tcp://127.0.0.1,unix:///tmp/phpdaemon.fcgi.sock')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 80)</code><br />
Прослушиваемый порт</p>
</li>
<li>
<p><code>auto-read-body-file (boolean = true)</code><br />
Автоматически реагирует на FastCGI параметр REQUEST_BODY_FILE и читает тело запроса из файла, созданного веб-сервером</p>
</li>
<li>
<p><code>allowed-clients (string = '127.0.0.1')</code><br />
IP адреса (через запятую) которым позволено делать запросы. CIDR-маски поддерживаются</p>
</li>
<li>
<p><code>send-file (boolean = false)</code><br />
Оптимизирует обработку запросов, предварительно записывая их в файл.
Опция будет игнорироваться если передан параметр <code>server['DONT_USE_SENDFILE']</code></p>
</li>
<li>
<p><code>send-file-dir (string = '/dev/shm')</code><br />
Директория для sendfile</p>
</li>
<li>
<p><code>send-file-prefix (string = 'fcgi-')</code><br />
Префикс для sendfile файлов</p>
</li>
<li>
<p><code>send-file-onlybycommand (boolean = false)</code><br />
Включать sendfile если передан <code>server['USE_SENDFILE']</code></p>
</li>
<li>
<p><code>expose (boolean = true)</code><br />
Включать версию PHPDaemon в заголовке <code>X-Powered-By</code></p>
</li>
<li>
<p><code>keepalive (<a href="#config/types/time">Time</a> = '0s')</code><br />
Таймаут бездействия перед закрытием keep-alive соединения</p>
<blockquote>
<p>Если вы используете значение отличное от 0, учтите что nginx и некоторые другие веб-сервера НЕ ПОДДЕРЖИВАЮТ keep-alive соединения с FastCGI-бекэндами.</p>
</blockquote>
</li>
<li>
<p><code>chunksize (<a href="#config/types/size">Size</a> = '8k')</code><br />
Размер куска</p>
</li>
<li>
<p><code>defaultcharset (string = 'utf-8')</code><br />
Кодировка по-умолчанию</p>
</li>
<li>
<p><code>wss-name (string = '')</code><br />
Имя пула WebSocket-сервера, куда направлять WebSocket-соединения</p>
</li>
<li>
<p><code>fps-name (string = '')</code><br />
Имя пула FlashPolicy-сервера, куда адресовать FlashPolicy-соединения</p>
</li>
<li>
<p><code>upload-max-size (<a href="#config/types/size">Size</a> = ini_get('upload_max_filesize'))</code><br />
Максимальный размер загружаемого файла</p>
</li>
<li><code>responder (string = null)</code><br />
Имя приложения по-умолчанию для обработки запросов с данного сервера</li>
</ul>
<h3 id="servers/debugconsole"><div class="in anchor">DebugConsole <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/DebugConsole"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Это транспортное приложение предоставляет интерактивную отладочную консоль для phpDaemon.</p>
<pre><code class=""># telnet 127.0.0.1 8818
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
Welcome! DebugConsole for phpDaemon.

login secret
OK.
eval echo 123;
123</code></pre>
<h4 id="servers/debugconsole/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/debugconsole">DebugConsole <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/DebugConsole"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = 'tcp://127.0.0.1')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 8818)</code><br />
Прослушиваемый порт</p>
</li>
<li><code>passphrase (string = 'secret')</code><br />
Пароль для аутентификации</li>
</ul>
<h3 id="servers/flashpolicy"><div class="in anchor">FlashPolicy <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FlashPolicy"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Это простое приложение предоставляет Flashpolicy сервер для phpDaemon.</p>
<p>Это приложение необходимо включить в случае если вы хотите присоединяться к серверу посредством Flash.</p>
<h4 id="servers/flashpolicy/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/flashpolicy">FlashPolicy <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/FlashPolicy"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = '0.0.0.0')</code><br />
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 843)</code><br />
Прослушиваемый порт</p>
</li>
<li><code>file (string = getcwd() . '/conf/crossdomain.xml')</code><br />
Файл Flash-политики</li>
</ul>
<h3 id="servers/ident"><div class="in anchor">Servers\Ident<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<h3 id="servers/ircbouncer"><div class="in anchor">Servers\IRCBouncer<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<h3 id="servers/lock"><div class="in anchor">Lock <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/Lock"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Требует рефакторинга</p>
<h3 id="servers/socks"><div class="in anchor">Servers\Socks<span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<h3 id="servers/websocket"><div class="in anchor">WebSocket <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/WebSocket"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h3>
<p>Сервер использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Это транспортное приложение представляет WebSocket сервер для phpDaemon.</p>
<p>Ваше приложение должно получать ссылку на экземпляр WebSocketServer и вызывать addRoute() для добавления своих путей. Callback-функция пути должна возвращать новый экземпляр вашего класса, который наследуется от WebSocketRoute и определяет метод onFrame. Внутри метода onFrame мы можете обращаться к $this->client->sendFrame() для отправки пакетов клиенту.</p>
<h4 id="servers/websocket/options"><div class="in anchor">Опции<span class="header-path"> <i>&larr;</i> <a href="#servers/websocket">WebSocket <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Servers/WebSocket"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#servers">Серверы</a></span></div>

</h4>
<ul>
<li>
<p><code>listen (string = '0.0.0.0')</code>
Какие адреса слушать, через запятую</p>
</li>
<li>
<p><code>port (integer = 8047)</code>
Прослушиваемый порт</p>
</li>
<li>
<p><code>max-allowed-packet (<a href="#config/types/size">Size</a> = new \PHPDaemon\Config\Entry\Size('1M'))</code>
Максимальный размер пакета</p>
</li>
<li>
<p><code>expose (boolean = true)</code>
Включать версию PHPDaemon в заголовке <code>X-Powered-By</code></p>
</li>
<li><code>fps-name (string = '')</code>
Имя пула FlashPolicy-сервера, куда адресовать FlashPolicy-соединения</li>
</ul>
<h2 id="clients"><div class="in anchor">Клиенты</div>

</h2>
<p>В основе всех клиентов лежит пространство имен <a target="_self" class="tpl-inlink" href="#network">Network<i class="fa fa-caret-square-o-up"></i></a>, изучение которого даст большее представление о возможностях клиентов и сетевой работы демона в целом.</p>
<h3 id="clients/basics"><div class="in anchor">Основы<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h4 id="clients/basics/options"><div class="in anchor">Опции клиентов<span class="header-path"> <i>&larr;</i> <a href="#clients/basics">Основы</a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<ul>
<li>
<p><code>server (string)</code>
Адрес сервера. Записывается специальным форматом, описанном в разделе <a target="_self" class="tpl-inlink" href="#clients/basics/option-server">Опция server<i class="fa fa-caret-square-o-up"></i></a></p>
</li>
<li>
<p><code>servers (array)</code>
Адреса серверов, записанные в формате опции <code>server</code>, разделенные символом запятая <code>,</code>.
При подключении клиента будет использоваться рандомно выбранный сервер.
Учтите, данная опция будет игнорироваться если установлена опция <code>server</code>.</p>
</li>
<li><code>maxconnperserv</code></li>
<li><code>protologging</code></li>
</ul>
<h3 id="clients/asterisk"><div class="in anchor">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Clients\Asterisk;</code></pre>
<p class="doc-notice">Раздел устарел!</p>
<p><a target="_blank" class="tpl-outlink" href="http://www.asterisk.org/">Asterisk<i class="fa fa-external-link"></i></a> - это АТС с открытым исходным кодом.
AMI - программный интерфейс (API) Asterisk для управления системой, который позволяет разработчикам отправлять команды на сервер, считывать результаты их выполнения, а так же получать уведомления о происходящих событиях в реальном времени.
Клиент Asterisk обеспечивает высокоуровневый интерфейс к AMI, позволяющий разработчикам контролировать сервер Asterisk из приложений.</p>
<p>В основе документирования клиента лежит материал книги <a target="_blank" class="tpl-outlink" href="http://asterisk.ru/store/files/Asterisk_RU_OReilly_DRAFT.pdf">Asterisk: будущее телефонии<i class="fa fa-external-link"></i></a>.</p>
<h4 id="clients/asterisk/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<p>@TODO это из вики, проверить</p>
<p>Перед тем как посылать команды и получать события с сервера, нужно получить сессию(сессии) соединения(соединений) в вашем приложении. В вашем приложении вы получаете объект AsteriskDriver посредством:</p>
<pre><code class="php">$this->pbxDriver = Daemon::$appResolver->getInstanceByAppName('AsteriskDriver');</code></pre>
<h5 id="clients/asterisk/use/connect"><div class="in anchor">Соединение<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Далее получаете объект AsteriskDriverSession посредством:</p>
<pre><code class="php">$session = $this->pbxDriver->getConnection();
// или
foreach($this->pbxConnections as $addr => $conn) {
    $session = $this->pbxDriver->getConnection($addr);
    // что-нибудь делаем...
}</code></pre>
<p>Добавляете (композиция) в него текущий контекст соединения посредством:</p>
<pre><code class="php">$session->context = $this;</code></pre>
<p>При соединении:</p>
<pre><code class="php">$session->onConnected(function(SocketSession $session, $status) {
    // ваш код, в зависимости от соединения
});</code></pre>
<p>При разрыве:</p>
<pre><code class="php">$session->onFinish(function(SocketSession $session) {
    // возможно запустить интервал реконнекта...
});</code></pre>
<p>Предположим у вас несколько серверов Asterisk с которых вы хотите получать события(events) и на которые вы хотите отправлять команды(actions). Так же вы хотите отслеживать падение соединения(connection failed), и осуществлять реконнект. Смотрите пример реконнекта ниже.</p>
<h5 id="clients/asterisk/use/io"><div class="in anchor">Немного о формате ввода-вывода<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Хотя протокол AMI является строковым, драйвер при вводе-выводе работает с ассоциативными массивами. При получении ответа на действие или события все заголовки и их значения приводятся к нижнему регистру, если значение не содержит информацию, для которой важен регистр - например имя пира.</p>
<h5 id="clients/asterisk/use/cmds"><div class="in anchor">Отправка команд и получение ответа<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Для отправки команды и получения ответа вы можете воспользоваться либо методом-помощником, который снабжен подробным комментарием из документации Asterisk, либо универсальным методом Connection::action.</p>
<p>В любом случае для каждой команды вы определяете функцию обратного вызова, в которую будет передан объект сессии соединения и ассоциативный массив пар заголовок-значение ответа.</p>
<p>Клиент корректно обрабатывает, что порядок следования пакетов ответа не определен, корректно собирает составные пакеты ответа.</p>
<pre><code class="php">$session->getSipPeers(function(SocketSession $session, array $packet) {
    // $session->addr содержит адрес соединения
    // $session->context содержит контекст вызова (если был установлен)
    // $packet - это массив пар заголовок-значение ответа
    // что-нибудь делаем
})
// или
$session->getConfig('chan_dahdi.conf', array($this, 'doSomething'));
public function doSomething(SocketSession $session, array $packet) {

}
// или
$session->action('Ping', function(SocketSession $session, array $packet) {
    if($packet['response'] == 'success' && $packet['ping'] == 'pong') {
        // успешно сыграли в пинг-понг
    }    
});
// или
// $channel содержит канал из события
$session->redirect(array(
    'Channel' => $channel,
    'Context' => 'internal',
    'Exten' => '116',
    'Priority' => 1
), function(SocketSession $session, array $packet) {
  // узнаем успешно или нет из ответа сервера содержащегося в ассоциативном массиве $packet
});</code></pre>
<h5 id="clients/asterisk/use/events"><div class="in anchor">Получение событий сервера<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/use">Использование</a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<p>Функция обратного вызова при наступлении события в данном соединении определяется один раз и передается методу onEvent().</p>
<pre><code class="php">$session->onEvent(array($this, 'onPbxEvent'));</code></pre>
<p>Когда запущено несколько воркеров, чтобы не получилось, что события канала(характеризуются наличием уникального идентификатора(uniqueid) канала) кратны количеству воркеров(workers) можно воспользоваться таблицей блокировки. Вот пример, когда в качестве таблицы блокировки используется MongoDB коллекция(collection), которая позволяет ставить уникальный индекс на документ:</p>
<pre><code class="php">$session->onEvent(array($this, 'onPbxEvent'));
// db.events.ensureIndex({"event": 1, "addr": 1}, {unique: true});
public function onPbxEvent(SocketSession $session, array $event) {
    if(method_exists('Foo_PbxEventDispatcher', "{$event['event']}Handler")) {
        $handler = "{$event['event']}Handler";
        if(isset($event['uniqueid']) || isset($event['uniqueid1'])) {
            $appInstance = $this;
            $this->db->events->insert(
                array(
                        'ts' => microtime(true),
                        'event' => $event,
                        'addr' => $session->addr
                ),
                function($result) use ($appInstance, $session, $event) {
                    if($result['err'] === null) {
                        $handler = "{$event['event']}Handler";
                        Foo_PbxEventDispatcher::$handler($appInstance, $session, $event);
                    }
                }
            );
        }
        else {
            Foo_PbxEventDispatcher::$handler($this, $session, $event);
        }
    }
}</code></pre>
<h4 id="clients/asterisk/example"><div class="in anchor">Пример реконнекта<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">class Foo extends AppInstance {
    // ...
    public function onInit() {
        // pbxConnections - array of connections
        foreach($this->pbxConnections as $addr => $conn) {
            $pbx_driver_session = $this->pbxDriver->getConnection($addr);
            if($pbx_driver_session instanceof SocketSession) {
                $pbx_driver_session->context = $this;
                //$pbx_driver_session->onError(array($this, 'onPbxError'));
                $pbx_driver_session->onConnected(array($this, 'onPbxConnected'));
                $pbx_driver_session->onEvent(array($this, 'onPbxEvent'));
                $pbx_driver_session->onFinish(array($this, 'onPbxFinish'));
            }
            else {
                $this->runPbxReconnectInterval($pbx_driver_session);
            }
        }
    }
    // ...
    public function onPbxConnected(SocketSession $session, $status) {
        if($status) {
            if($session->context instanceof PbxReconnector) {
                $session->context->finish();
            }
            // do something...
        }
        else {
            $this->runPbxReconnectInterval($session);
        }
    }
    // ...
    public function onPbxFinish(SocketSession $session) {
        $this->runPbxReconnectInterval($session);
    }
    // ...
    public function runPbxReconnectInterval(SocketSession $session) {
                if(Daemon::$process->terminated) {
            return;
        }
        foreach ($this->queue as &$r) {
            if($r instanceof PbxReconnector) {
                if ($r->attrs->addr == $session->addr) {
                    return;
                }
            }
        }
        $interval = $this->pushRequest(new PbxReconnector($this, $this));
        $interval->attrs->addr = $session->addr;
    }
    // ...
}
// ...
class PbxReconnector extends Request {
        public $interval = 0.3;

    public function run() {
        $pbx_driver_session = $this->appInstance->pbxDriver->getConnection($this->attrs->addr);
        if($pbx_driver_session) {
            if($this->appInstance->config->{'pbxreconnectorlogging'}->value) {
                Daemon::log('Reconnecting to ' . $this->attrs->addr);
            }
            $pbx_driver_session->context = $this;
            $pbx_driver_session->onConnected(array($this->appInstance, 'onPbxConnected'));
            $pbx_driver_session->onFinish(array($this->appInstance, 'onPbxFinish'));
        }
        $this->sleep($this->interval);
    }
}</code></pre>
<h4 id="clients/asterisk/pool"><div class="in anchor">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\Asterisk;
class Pool extends \PHPDaemon\Network\Client;</code></pre>
<h5 id="clients/asterisk/pool/options"><div class="in anchor">Опции по-умолчанию<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li><code>authtype (string = 'md5')</code></li>
<li><code>port (integer = 5280)</code></li>
</ul>
<h5 id="clients/asterisk/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li id="clients/asterisk/pool/methods/getConnection" class="method anchor">
<pre class="inline"><code class="php">boolean public static <a href="#./getConnection">getConnection</a> ( callable $cb )
boolean public static getConnection ( string $url = null, callable $cb = null, integer $pri = 0 )</code></pre>
<ul>
<li class="n">Выполняет callback-функцию когда будет установлена связь с сервером. Возвращает <code>false</code> если соединение невозможно установить</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../../connection">Connection</a> $conn, array $packet )</code> — вызывается когда будет установлена связь с сервером</li>
<li class="n"><code class="code_highlight php clear">$url</code> — адрес сервера</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — приоритет данного вызова среди других. Чем больше значение, тем выше приоритет</li>
</ul>
</li>
<li class="method fake">&nbsp;</li>
</ul>
<h4 id="clients/asterisk/connection"><div class="in anchor">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Connection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\Asterisk;
class Connection extends \PHPDaemon\Network\ClientConnection;</code></pre>
<h5 id="clients/asterisk/connection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/asterisk/connection">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/asterisk">Asterisk <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Asterisk"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li id="clients/asterisk/connection/methods/getSipPeers" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./getSipPeers">getSipPeers</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Выводит список сконфигурированных в данный момент равноправных участников SIP с указанием их статуса<br />
Привилегии: system, all</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/getIaxPeers" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./getIaxPeers">getIaxPeers</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Выводит список всех равноправных участников IAX2 с указанием их текущего статуса<br />
Привилегии: none</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/getConfig" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./getConfig">getConfig</a> ( string $filename, callable $cb )</code></pre>
<ul>
<li class="n">Извлекает данные из конфигурационного файла Asterisk<br />
Привилегии: config, all</li>
<li class="n ti"><code class="code_highlight php clear">$filename</code> — имя конфигурационного файла, из которого должны извлекаться данные</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/getConfigJSON" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./getConfigJSON">getConfigJSON</a> ( string $filename, callable $cb )</code></pre>
<ul>
<li class="n">Возвращает данные из конфигурационного файла Asterisk в JSON формате<br />
Привилегии: config, all</li>
<li class="n ti"><code class="code_highlight php clear">$filename</code> — имя конфигурационного файла, из которого должны извлекаться данные</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/setVar" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setVar">setVar</a> ( string $channel, string $variable, string $value, callable $cb )</code></pre>
<ul>
<li class="n">Задает значение глобальной переменной или переменной канала<br />
Привилегии: call, all</li>
<li class="n ti"><code class="code_highlight php clear">$channel</code> — канал, для переменной которого задается значение. Если не указан, переменная будет задана как глобальная</li>
<li class="n"><code class="code_highlight php clear">$variable</code> — имя переменной</li>
<li class="n"><code class="code_highlight php clear">$value</code> — значение</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/coreShowChannels" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./coreShowChannels">coreShowChannels</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Отображает все активные каналы</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/status" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./status">status</a> ( callable $cb, string $channel = null )</code></pre>
<ul>
<li class="n">Представляет статус одного или более каналов с подробной информацией об их текущем состоянии<br />
Привилегии: call, all</li>
<li class="n ti"><code class="code_highlight php clear">$channel</code> — ограничивает вывод статусом заданного канала</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/redirect" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./redirect">redirect</a> ( array $params, callable $cb )</code></pre>
<ul>
<li class="n">Перенаправляет канал в новый контекст, добавочный номер и приоритет диалплана<br />
Привилегии: call, all</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров команды</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/originate" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./originate">originate</a> ( array $params, callable $cb )</code></pre>
<ul>
<li class="n">Формирует исходящий вызов из Asterisk и соединяет канал с контекстом/добавочным номером/приоритетом или приложением диалплана<br />
Привилегии: call, all</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров команды</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/extensionState" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./extensionState">extensionState</a> ( array $params, callable $cb )</code></pre>
<ul>
<li class="n">Сообщает о состоянии заданного добавочного номера. Если добавочный номер имеет подсказку, эта команда обеспечит передачу состояния устройства, соединенного с данным добавочным номером<br />
Привилегии: call, all</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров команды</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/ping" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./ping">ping</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Посылает запрос на сервер Asterisk, чтобы убедиться, что он до сих пор отвечает. Asterisk ответит сообщением Pong. Эта команда также может использоваться, чтобы не допустить разрыва соединения в результате истечения времени ожидания</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/action" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./action">action</a> ( string $action, callable $cb, array $params = null, array $assertion = null )</code></pre>
<ul>
<li class="n">Отправляет на сервер произвольную команду</li>
<li class="n ti"><code class="code_highlight php clear">$action</code> — команда</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
<li class="n"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров команды</li>
<li class="n"><code class="code_highlight php clear">$assertion</code> — @TODO If more events may follow as response this is a main part or full an action complete event indicating that all data has been sent</li>
</ul>
</li>
<li id="clients/asterisk/connection/methods/logoff" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./logoff">logoff</a> ( callable $cb = null )</code></pre>
<ul>
<li class="n">Завершает сеанс</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, array $packet )</code> — вызывается когда будет получен результат</li>
</ul>
</li>
</ul>
<h3 id="clients/dns"><div class="in anchor">Clients\DNS<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/gibson"><div class="in anchor">Clients\Gibson<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/http"><div class="in anchor">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Clients\HTTP;</code></pre>
<p>Предназначен для выполнения GET и POST запросов на удаленные хосты.</p>
<p>Клиент использует пространство имен <a target="_self" class="tpl-inlink" href="#httprequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a>.</p>
<h4 id="clients/http/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#clients/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<p>Получение файла <a target="_blank" class="tpl-outlink" href="http://www.google.com/robots.txt">google.com/robots.txt<i class="fa fa-external-link"></i></a> GET запросом:</p>
<pre><code class="php">$httpclient = \PHPDaemon\Clients\HTTP\Pool::getInstance();

$httpclient->get('http://www.google.com/robots.txt',
    function ($conn, $success) {
        // обработка данных ответа
    }
);</code></pre>
<p>Рабочий пример клиента представлен в <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Examples/Simple.php">Clients/HTTP/Examples/Simple.php<i class="fa fa-github"></i></a></p>
<h4 id="clients/http/pool"><div class="in anchor">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\HTTP;
class Pool extends \PHPDaemon\Network\Client;</code></pre>
<h5 id="clients/http/pool/options"><div class="in anchor">Опции по-умолчанию<span class="header-path"> <i>&larr;</i> <a href="#clients/http/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li><code>port (integer = 80)</code></li>
<li><code>ssl-port (integer = 443)</code></li>
<li><code>expose (boolean = true)</code></li>
</ul>
<h5 id="clients/http/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/http/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li id="clients/http/pool/methods/get" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./get">get</a> ( url $url, array $params )
void public get ( url $url, callable $resultcb )</code></pre>
<ul>
<li class="n">Осуществляет GET запрос</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — запрашиваемый URL</li>
<li class="n"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров запроса</li>
<li class="n"><code class="code_highlight php clear">$resultcb</code> — <code class="code_highlight php clear">callback ( <a href="#../../connection">Connection</a> $conn, boolean $success )</code> — Вызывается когда на запрос пришел ответ, либо произошла ошибка</li>
</ul>
</li>
<li id="clients/http/pool/methods/post" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./post">post</a> ( url $url, array $data, array $params )
void public post ( url $url, array $data, callable $resultcb )</code></pre>
<ul>
<li class="n">Осуществляет POST запрос</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — запрашиваемый URL</li>
<li class="n"><code class="code_highlight php clear">$data</code> — ассоциативный массив POST-параметров</li>
<li class="n"><code class="code_highlight php clear">$params</code> — ассоциативный массив параметров запроса</li>
<li class="n"><code class="code_highlight php clear">$resultcb</code> — <code class="code_highlight php clear">callback ( <a href="#../../connection">Connection</a> $conn, boolean $success )</code> — Вызывается когда на запрос пришел ответ, либо произошла ошибка</li>
</ul>
</li>
<li id="clients/http/pool/methods/buildUrl" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./buildUrl">buildUrl</a> ( string $str )
string public static buildUrl ( array $mixed )</code></pre>
<ul>
<li class="n">Генерирует URL-кодированную строку запроса из предоставленного ассоциативного (или индексного) массива <code class="code_highlight php clear">$mixed</code> или возвращает строку <code class="code_highlight php clear">$str</code>. В случае ошибки возвращает <code class="code_highlight php clear">false</code></li>
<li class="n ti"><code class="code_highlight php clear">$mixed</code> — массив параметров URL</li>
</ul>
</li>
<li id="clients/http/pool/methods/parseUrl" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./parseUrl">parseUrl</a> ( string $str )
string public static parseUrl ( array $mixed )</code></pre>
<ul>
<li class="n">Разбирает массив <code class="code_highlight php clear">$mixed</code> или строку <code class="code_highlight php clear">$str</code> и возвращает ассоциативный массив, содержащий необходимые компоненты URL: <code class="code_highlight php clear">[$scheme, $host, $uri, $port]</code>. В случае ошибки возвращает <code class="code_highlight php clear">false</code>.<br />
См. <a target="_blank" class="tpl-outlink" href="http://php.net/parse_url">php.net/parse_url<i class="fa fa-external-link"></i></a></li>
<li class="n ti"><code class="code_highlight php clear">$mixed</code> — массив параметров URL</li>
</ul>
</li>
</ul>
<h4 id="clients/http/connection"><div class="in anchor">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\HTTP;
class Connection extends \PHPDaemon\Network\ClientConnection;</code></pre>
<h5 id="clients/http/connection/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#clients/http/connection">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $headers;</code></pre>
<p>Заголовки ответа</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $body;</code></pre>
<p>Тело ответа</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $contentLength;</code></pre>
<p>Длина тела ответа</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $cookie;</code></pre>
<p>Ассоциативный массив Cookies пришедших в ответе</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $chunked;</code></pre>
<p>Если true, то в заголовках был получен <code>Transfer-Encoding: chunked</code></p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $protocolError;</code></pre>
<p>Если не <code class="code_highlight php clear">null</code>, то произошла серьезная ошибка при обработке ответа на запрос. Содержит номер строки в файле <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php">Connection.php<i class="fa fa-github"></i></a>, по которому можно определить характер ошибки</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $responseCode;</code></pre>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $lastURL;</code></pre>
<p>Последний запрошенный url</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $rawHeaders;</code></pre>
<p>Заголовки ответа в сыром виде</p>
</li>
</ul>
<h5 id="clients/http/connection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/http/connection">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/http">HTTP <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/HTTP"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li id="clients/http/connection/methods/getBody" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getBody">getBody</a> ( )</code></pre>
<ul>
<li class="n">Возвращает тело ответа</li>
</ul>
</li>
<li id="clients/http/connection/methods/getHeaders" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getHeaders">getHeaders</a> ( )</code></pre>
<ul>
<li class="n">Возвращает ассоциативный массив заголовков ответа</li>
</ul>
</li>
<li id="clients/http/connection/methods/getHeader" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getHeader">getHeader</a> ( string $name )</code></pre>
<ul>
<li class="n">Возвращает заголовок ответа по имени или <code class="code_highlight php clear">null</code></li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — имя заголовка</li>
</ul>
</li>
</ul>
<h3 id="clients/icmp"><div class="in anchor">Clients\ICMP<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/irc"><div class="in anchor">Clients\IRC<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/lock"><div class="in anchor">Lock <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/Lock"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<p>Требует рефакторинга</p>
<h3 id="clients/memcache"><div class="in anchor">Clients\Memcache<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/mongo"><div class="in anchor">Clients\Mongo<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/mysql"><div class="in anchor">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Clients\MySQL;</code></pre>
<p>Клиент для СУБД <a target="_blank" class="tpl-outlink" href="http://mysql.com/">MySQL<i class="fa fa-external-link"></i></a></p>
<h4 id="clients/mysql/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<p>@TODO</p>
<p>В вашем приложении вам следует получать объект MySQLClient посредством <code>Daemon::$appResolver->getInstanceByAppName('MySQLClient')</code> и использовать как описано ниже.</p>
<h5 id="clients/mysql/use/prepare"><div class="in anchor">Подготовка объекта соединения<span class="header-path"> <i>&larr;</i> <a href="#clients/mysql/use">Использование</a> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<pre><code class="">/*
  @method getConnection
  @description Establishes connection.
  @param string Optional. Address.
  @return integer Connection's ID.
*/</code></pre>
<p>Вам следует получить объект MySQLClientSession посредством метода $MySQLClient->getConnection(), затем вы можете положить ваш текущий запрос/сессию/что-нибудь еще в текущий контекст соединения (в свойство context).</p>
<p>Затем используйте:</p>
<pre><code class="php">$this->sql->onConnected(
    function($sql, $success) {
        if (!$success) {
            return;
        }
        // your connection-dependent code
    }
);</code></pre>
<h4 id="clients/mysql/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">$sql->query('SHOW VARIABLES', 
   function($sql, $success) {
      $sql->context->queryResult = $sql->resultRows; // save the result
      $sql->context->wakeup(); // wake up the request immediately
   }
);</code></pre>
<p>Когда callback-функция вызвана, $sql->context содержит ваш объект, который вы туда положили перед этим. $sql->resultRows хранит результат в виде массива ассоциативных массивов. $sql->resultFields содержит поля ответа в виде массива ассоциативных массивов.</p>
<h4 id="clients/mysql/pool"><div class="in anchor">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\MySQL;
class Pool extends \PHPDaemon\Network\Client;</code></pre>
<h5 id="clients/mysql/pool/options"><div class="in anchor">Опции по-умолчанию<span class="header-path"> <i>&larr;</i> <a href="#clients/mysql/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li><code>server (string = 'tcp://root@127.0.0.1/')</code></li>
<li><code>port (integer = 3306)</code></li>
<li><code>max-conn-per-serv (integer = 32)</code></li>
</ul>
<h5 id="clients/mysql/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/mysql/pool">Класс Pool <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li id="clients/mysql/pool/methods/getConnection" class="method anchor">
<pre class="inline"><code class="php">boolean public static <a href="#./getConnection">getConnection</a> ( callable $cb )
boolean public static getConnection ( string $url = null, callable $cb = null, integer $pri = 0 )</code></pre>
<ul>
<li class="n">Выполняет callback-функцию когда будет установлена связь с сервером. Возвращает <code>false</code> если соединение невозможно установить</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — <code class="code_highlight php clear">callback ( <a href="#../../connection">Connection</a> $conn )</code> — вызывается когда будет установлена связь с сервером</li>
<li class="n"><code class="code_highlight php clear">$url</code> — адрес сервера</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — приоритет данного вызова среди других. Чем больше значение, тем выше приоритет</li>
</ul>
</li>
<li id="clients/mysql/pool/methods/escape" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./escape">escape</a> ( string $string )</code></pre>
<ul>
<li class="n">Экранирует специальные символы: <code>\0</code>, <code>\n</code>, <code>\r</code>, <code>\</code>, <code>'</code>, <code>"</code></li>
<li class="n ti"><code class="code_highlight php clear">$string</code> — исходная строка</li>
</ul>
</li>
<li id="clients/mysql/pool/methods/likeEscape" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./likeEscape">likeEscape</a> ( string $string )</code></pre>
<ul>
<li class="n">Работает как метод <code class="code_highlight php clear">Pool::escape</code> с дополнительными символами: <code>%</code> и <code>_</code></li>
<li class="n ti"><code class="code_highlight php clear">$string</code> — исходная строка</li>
</ul>
</li>
<li id="clients/mysql/pool/methods/value" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./value">value</a> ( mixed $mixed )</code></pre>
<ul>
<li class="n">Преобразует строку или число <code class="code_highlight php clear">$mixed</code> для использоания в SQL-выражении и возвращает значение в одинарных кавычках <code>'</code>. Для всех остальных типов возвращает <code>'null'</code></li>
<li class="n ti"><code class="code_highlight php clear">$mixed</code> — конвертируемые данные</li>
</ul>
</li>
<li id="clients/mysql/pool/methods/values" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./values">values</a> ( mixed $arr )</code></pre>
<ul>
<li class="n">Преобразует массив <code class="code_highlight php clear">$arr</code> для использоания в SQL-выражении и возвращает список значений, разделенные запятой <code>,</code>. Для всех остальных типов возвращает пустую строку</li>
<li class="n ti"><code class="code_highlight php clear">$mixed</code> — конвертируемые данные</li>
</ul>
</li>
</ul>
<h4 id="clients/mysql/connection"><div class="in anchor">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Connection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Clients\MySQL;
class Connection extends \PHPDaemon\Network\ClientConnection;</code></pre>
<h5 id="clients/mysql/connection/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#clients/mysql/connection">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">string public $serverver;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $serverCaps;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $serverLang;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $serverStatus;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $warnCount;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $message;</code></pre>
<p>@TODO Flags of this MySQL client</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $dbname;</code></pre>
<p>Текущая база данных</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $resultRows;</code></pre>
<p>Массив результата SQL-запроса в виде ассоциативных массивов</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $resultFields;</code></pre>
<p>Массив колонок таблицы в виде ассоциативных массивов</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $context;</code></pre>
<p>Контекст для выполняемых SQL-запросов</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $insertId;</code></pre>
<p>Идентификатор, сгенерированный при последнем INSERT-запросе</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $affectedRows;</code></pre>
<p>Число затронутых SQL-запросом строк</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $protover;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $timeout;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $errno;</code></pre>
<p>Численный код ошибки выполнения SQL-запроса</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $errmsg;</code></pre>
<p>Текст ошибки выполнения SQL-запроса</p>
</li>
</ul>
<h5 id="clients/mysql/connection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#clients/mysql/connection">Класс Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients/mysql">MySQL <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Clients/MySQL"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h5>
<ul>
<li id="clients/mysql/connection/methods/onConnected" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onConnected">onConnected</a> ( callable $callback )</code></pre>
<ul>
<li class="n">Выполняет callback-функцию когда будет установлена связь с сервером</li>
<li class="n ti"><code class="code_highlight php clear">$callback</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, boolean $success )</code> — вызывается когда установлена связь с сервером, либо произошла ошибка</li>
</ul>
</li>
<li id="clients/mysql/connection/methods/query" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./query">query</a> ( string $query, callable $callback = NULL )</code></pre>
<ul>
<li class="n">Осуществляет SQL-запрос к серверу</li>
<li class="n ti"><code class="code_highlight php clear">$query</code> — SQL-запрос</li>
<li class="n"><code class="code_highlight php clear">$callback</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, boolean $success )</code> — вызывается когда получен результат SQL-запроса, либо произошла ошибка</li>
</ul>
</li>
<li id="clients/mysql/connection/methods/ping" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./ping">ping</a> ( callable $callback = NULL )</code></pre>
<ul>
<li class="n">Проверяет работает ли соединение с сервером. Если оно утеряно, автоматически предпринимается попытка пересоединения</li>
<li class="n ti"><code class="code_highlight php clear">$callback</code> — <code class="code_highlight php clear">callback ( <a href="#../">Connection</a> $conn, boolean $success )</code> — вызывается когда получен результат, либо произошла ошибка</li>
</ul>
</li>
<li id="clients/mysql/connection/methods/selectDB" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./selectDB">selectDB</a> ( string $name )</code></pre>
<ul>
<li class="n">Выбирает базу данных MySQL</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — имя выбираемой базы данных</li>
</ul>
</li>
</ul>
<h3 id="clients/postgresql"><div class="in anchor">Clients\PostgreSQL<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/redis"><div class="in anchor">Clients\Redis<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/valve"><div class="in anchor">Clients\Valve<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/websocket"><div class="in anchor">Clients\WebSocket<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h3 id="clients/xmpp"><div class="in anchor">Clients\XMPP<span class="header-path"> <i>&larr;</i> <a href="#clients">Клиенты</a></span></div>

</h3>
<h2 id="lib"><div class="in anchor">Библиотеки</div>

</h2>
<h3 id="lib/cache"><div class="in anchor">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Cache;</code></pre>
<p>Механизм локального LRU-кеша ключ-значение.</p>
<blockquote>
<p>Используется для кеширования замыканий созданных через create_function. Также используется в <a target="_self" class="tpl-inlink" href="##clients/dns">Clients\DNS<i class="fa fa-caret-square-o-up"></i></a></p>
</blockquote>
<h4 id="lib/cache/capped-storage"><div class="in anchor">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Cache;
abstact class CappedStorage;</code></pre>
<p>Базовый абстрактный класс.</p>
<h5 id="lib/cache/capped-storage/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/capped-storage">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">callable public $sorter;</code></pre>
<p>Метод сортировки</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxCacheSize;</code></pre>
<p>Максимальное количество элементов в кеше</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $capWindow;</code></pre>
<p>Количество элементов, которые пропускаются в кеш сверх максимального количества, для уменьшения количества сортировок</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $cache;</code></pre>
<p>Ассоциативный массив хранимых элементов</p>
</li>
</ul>
<h5 id="lib/cache/capped-storage/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/capped-storage">Класс CappedStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorage.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/cache/capped-storage/methods/hash" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./hash">hash</a> ( string $key )</code></pre>
<ul>
<li class="n">Возвращает хеш ключа, который идентифицирует элемент хранилища, по-умолчанию используется crc32()</li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — ключ элемента</li>
</ul>
</li>
<li id="lib/cache/capped-storage/methods/put" class="method anchor">
<pre class="inline"><code class="php"><a href="#../../item">Item</a> public <a href="#./put">put</a> ( string $key, mixed $value, float $ttl = null )</code></pre>
<ul>
<li class="n">Добавляет элемент в кеш <a target="_self" class="tpl-inlink" href="##../../item">Item<i class="fa fa-caret-square-o-up"></i></a> с значением <code class="code_highlight php clear">$value</code></li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — ключ элемента</li>
<li class="n"><code class="code_highlight php clear">$value</code> — значение</li>
<li class="n"><code class="code_highlight php clear">$ttl</code> — время жизни в секундах</li>
</ul>
</li>
<li id="lib/cache/capped-storage/methods/invalidate" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./invalidate">invalidate</a> ( string $key )</code></pre>
<ul>
<li class="n">Удаляет элемент кеша</li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — ключ</li>
</ul>
</li>
<li id="lib/cache/capped-storage/methods/get" class="method anchor">
<pre class="inline"><code class="php"><a href="#../../item">Item</a> public <a href="#./get">get</a> ( string $key )</code></pre>
<ul>
<li class="n">Возвращает элемент хранилища <a target="_self" class="tpl-inlink" href="##../../item">Item<i class="fa fa-caret-square-o-up"></i></a></li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — ключ</li>
</ul>
</li>
<li id="lib/cache/capped-storage/methods/getValue" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./getValue">getValue</a> ( string $key )</code></pre>
<ul>
<li class="n">Возвращает значение элемента хранилища</li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — ключ элемента</li>
</ul>
</li>
</ul>
<h4 id="lib/cache/item"><div class="in anchor">Класс Item <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/Item.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Cache;
class Item;</code></pre>
<h5 id="lib/cache/item/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/item">Класс Item <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/Item.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">integer public $hits;</code></pre>
<p>Количество обращений к значению элемента</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $expire;</code></pre>
<p>Временная метка до которой элемент действителен</p>
</li>
</ul>
<h5 id="lib/cache/item/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/cache/item">Класс Item <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/Item.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/cache/item/methods/getHits" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./getHits">getHits</a> ( )</code></pre>
<ul>
<li class="n">Возвращает количество обращений к значению элемента</li>
</ul>
</li>
<li id="lib/cache/item/methods/getValue" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./getValue">getValue</a> ( )</code></pre>
<ul>
<li class="n">Возвращает значение элемента</li>
</ul>
</li>
<li id="lib/cache/item/methods/addListener" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./addListener">addListener</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Переданная функция обратного вызова будет вызвана когда будет установлено значение элемента</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
</li>
<li id="lib/cache/item/methods/setValue" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setValue">setValue</a> ( mixed $value )</code></pre>
<ul>
<li class="n">Устанавливает значение элемента</li>
<li class="n ti"><code class="code_highlight php clear">$value</code> — значение</li>
</ul>
</li>
</ul>
<h4 id="lib/cache/capped-storage-hits"><div class="in anchor">Класс CappedStorageHits <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache/CappedStorageHits.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/cache">Cache <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Cache"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\Cache;
class CappedStorageHits extends CappedStorage;</code></pre>
<p>Реализация <a target="_self" class="tpl-inlink" href="##../capped-storage">CappedStorage<i class="fa fa-caret-square-o-up"></i></a> с сортировкой по количеству обращений</p>
<h3 id="lib/complexjob"><div class="in anchor">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Core;
class ComplexJob extends \<a href="http://php.net/manual/class.arrayaccess.php">ArrayAccess</a>;</code></pre>
<p>Объект класса ComplexJob позволяет повесить функцию обратного вызова на завершение всех объявленных в нем процедур. Это удобно, когда нужно выполнить ряд независимых цепочек действий.</p>
<h4 id="lib/complexjob/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">$j = new ComplexJob(function($j) { // Когда всё выполнилось
   D($j['foo']); // this
   D($j['foobar']); // is
   D($j['bar']); // sparta
});

/* Добавляем задачу */
$j('foo', function($name, $j) { 
   $j[$name] = 'this'; // Вызываем setResult()

   /* Еще задачу */
   $j('foobar', function($name, $j) { 
      $j[$name] = 'is';
   });
});

/* И еще одну */
$j('bar', function($name, $j) {
   $j[$name] = 'sparta';
});

$j(); // Запускаем</code></pre>
<h4 id="lib/complexjob/consts"><div class="in anchor">Константы<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">const STATE_WAITING = 1;</code></pre>
<p>Состояние: ожидание</p>
</li>
<li class="method">
<pre class="inline"><code class="php">const STATE_RUNNING = 2;</code></pre>
<p>Состояние: в процессе</p>
</li>
<li class="method">
<pre class="inline"><code class="php">const STATE_DONE = 3;</code></pre>
<p>Состояние: завершено</p>
</li>
</ul>
<h4 id="lib/complexjob/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">callable public $listeners;</code></pre>
<p>Стек функций обратного вызова, которые вызываются при успешном выполнении всех объявленных процедур</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $results;</code></pre>
<p>Ассоциативный массив результатов установленных через <code class="code_highlight php">setResult($value, $value)</code> или <code class="code_highlight php">$job[$name] = $value;</code></p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $state;</code></pre>
<p>Состояние (константа STATE_*)</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $jobs;</code></pre>
<p>Ассоциативный массив, хранящий функции обратного вызова подзадач</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $resultsNum;</code></pre>
<p>Количество выполненных подзадач</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $jobsNum;</code></pre>
<p>Количество подзадач</p>
</li>
</ul>
<h4 id="lib/complexjob/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/complexjob">ComplexJob <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ComplexJob.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li id="lib/complexjob/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( callable $cb = null )</code></pre>
<ul>
<li class="n">Конструктор</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова для метода addListener</li>
</ul>
</li>
<li id="lib/complexjob/methods/addListener" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./addListener">addListener</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Переданная функция будет вызвана когда все подзадачи выполнены</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
</li>
<li id="lib/complexjob/methods/offsetExists" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./offsetExists">offsetExists</a> ( string $j )</code></pre>
<ul>
<li class="n">Позволяет сделать <code class="code_highlight php clear">isset($j[$name])</code></li>
<li class="n ti"><code class="code_highlight php clear">$j</code> — имя подзадачи</li>
</ul>
</li>
<li id="lib/complexjob/methods/offsetGet" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./offsetGet">offsetGet</a> ( string $j )</code></pre>
<ul>
<li class="n">Позволяет сделать <code class="code_highlight php clear">isset($job[$name])</code></li>
<li class="n ti"><code class="code_highlight php clear">$j</code> — имя подзадачи</li>
</ul>
</li>
<li id="lib/complexjob/methods/offsetSet" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./offsetSet">offsetSet</a> ( string $j, mixed $v )</code></pre>
<ul>
<li class="n">Позволяет сделать <code class="code_highlight php clear">$job[$name] = $value</code></li>
<li class="n ti"><code class="code_highlight php clear">$j</code> — имя подзадачи</li>
<li class="n"><code class="code_highlight php clear">$v</code> — значение</li>
</ul>
</li>
<li id="lib/complexjob/methods/offsetUnset" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./offsetUnset">offsetUnset</a> ( string $j )</code></pre>
<ul>
<li class="n">Позволяет сделать <code class="code_highlight php clear">unset($job[$name])</code></li>
<li class="n ti"><code class="code_highlight php clear">$j</code> — имя подзадачи</li>
</ul>
</li>
<li id="lib/complexjob/methods/getResults" class="method anchor">
<pre class="inline"><code class="php">array public <a href="#./getResults">getResults</a> ( )</code></pre>
<ul>
<li class="n">Возвращает ассоциативный массив результатов</li>
</ul>
</li>
<li id="lib/complexjob/methods/keep" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./keep">keep</a> ( boolean $keep = true )</code></pre>
<ul>
<li class="n">Включает опцию keep, при которой, после выполнения всех подзадач не вызывается метод <code class="code_highlight php clear">cleanup()</code></li>
<li class="n ti"><code class="code_highlight php clear">$keep</code> — true/false</li>
</ul>
</li>
<li id="lib/complexjob/methods/hasCompleted" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./hasCompleted">hasCompleted</a> ( )</code></pre>
<ul>
<li class="n">Выполнены ли все подзадачи?</li>
</ul>
</li>
<li id="lib/complexjob/methods/maxConcurrency" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ComplexJob</a> public <a href="#./maxConcurrency">maxConcurrency</a> ( integer $n = -1 )</code></pre>
<ul>
<li class="n">Устанавливает максимальное количество одновременно выполняемых задач</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Натуральное число. При <code>-1</code> ограничение не действует.</li>
</ul>
</li>
<li id="lib/complexjob/methods/setResult" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./setResult">setResult</a> ( string $jobname, mixed $result = null )</code></pre>
<ul>
<li class="n">Устанавливает результат выполнения подзадачи</li>
<li class="n ti"><code class="code_highlight php clear">$jobname</code> — Название подзадачи</li>
<li class="n"><code class="code_highlight php clear">$result</code> — Результат</li>
</ul>
</li>
<li id="lib/complexjob/methods/getResult" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./getResult">getResult</a> ( string $jobname )</code></pre>
<ul>
<li class="n">Получить результат выполнения подзадачи по имени</li>
<li class="n ti"><code class="code_highlight php clear">$jobname</code> — имя подзадачи</li>
</ul>
</li>
<li id="lib/complexjob/methods/checkQueue" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./checkQueue">checkQueue</a> ( )</code></pre>
<ul>
<li class="n">Вызывается автоматически. Проверяет полна ли очередь и если нет, то пробует запустить еще подзадач из <code>backlog</code> и <code>more</code>.</li>
</ul>
</li>
<li id="lib/complexjob/methods/more" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ComplexJob</a> public <a href="#./more">more</a> ( callable $cb = null )</code></pre>
<ul>
<li class="n">Задает функцию обратного вызова, которая автоматически вызывается каждый раз, когда можно добавить еще подзадач.</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
</li>
<li id="lib/complexjob/methods/isQueueFull" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isQueueFull">isQueueFull</a> ( )</code></pre>
<ul>
<li class="n">Проверяет полна ли на данный момент очередь задач (превышен ли параметр <code>maxConcurrency</code>)</li>
</ul>
</li>
<li id="lib/complexjob/methods/addJob" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./addJob">addJob</a> ( string $name, callable $cb )</code></pre>
<ul>
<li class="n">Добавляет подзадачу</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — имя подзадачи</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
</li>
<li id="lib/complexjob/methods/cleanup" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./cleanup">cleanup</a> ( )</code></pre>
<ul>
<li class="n">Удаляет сохраненные результаты и функции обратного вызова. Вызывается автоматически, не задан параметр <code>keep</code>. В этом случае, во избежание утечек памяти вызывайте этот метод сами, когда закончили работать с данными.</li>
</ul>
</li>
<li id="lib/complexjob/methods/execute" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./execute">execute</a> ( )</code></pre>
<ul>
<li class="n">Выполняет</li>
</ul>
</li>
<li id="lib/complexjob/methods/__invoke" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./__invoke">__invoke</a> ( string $name = null, callable $cb = null )</code></pre>
<ul>
<li class="n">Синоним <code>addJob ( $name, $cb )</code>. Пример: <code class="code_highlight php clear">$job('job', )</code></li>
</ul>
</li>
<li id="lib/complexjob/methods/__invoke" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./__invoke">__invoke</a> ( )</code></pre>
<ul>
<li class="n">Синоним <code>execute()</code>. Пример: <code class="code_highlight php clear">$job()</code></li>
</ul>
</li>
</ul>
<h3 id="lib/shellcommand"><div class="in anchor">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Core;
class ShellCommand extends \PHPDaemon\Network\IOStream;</code></pre>
<p>Класс является наследником IOStream, так что в нём доступны такие методы как read[ln], write[ln], и так далее.</p>
<h4 id="lib/shellcommand/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#lib/shellcommand">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<h5 id="lib/shellcommand/examples/simple"><div class="in anchor">Простое выполнение, аналог функции shell_exec</div>

</h5>
<pre><code class="php">ShellCommand::exec('echo "foo"', function($commandInstance, $output) {
   D($output); // foo
});</code></pre>
<h5 id="lib/shellcommand/examples/with_params"><div class="in anchor">С дополнительными параметрами и переменными окружения</div>

</h5>
<pre><code class="php">$command = 'git log';
$cb = function($commandInstance, $output) {
     D($output); // foo
};
$arguments = ['-1', '--pretty' => 'oneline'];
$env = [];
ShellCommand::exec($command, $cb, $arguments, $env);</code></pre>
<blockquote>
<p>Аргументы будут экранированы с помощью <code>escapeshellarg</code></p>
</blockquote>
<h5 id="lib/shellcommand/examples/packet-processing"><div class="in anchor">Пакетная обработка вывода</div>

</h5>
<p>@TODO</p>
<h4 id="lib/shellcommand/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/shellcommand">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">string public $binPath;</code></pre>
<p>Исполняемый путь</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $setUser;</code></pre>
<p>Имя Unix-пользователя от имени которого выполняется команда</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $setGroup;</code></pre>
<p>Имя Unix-группы от имени которого выполняется команда</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $chroot = '/';</code></pre>
<p>Подмена корневого каталога для выполняемой команды</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $cwd;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h4 id="lib/shellcommand/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/shellcommand">ShellCommand <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/ShellCommand.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li id="lib/shellcommand/methods/exec" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./exec">exec</a> ( string $binPath = null, callable $cb = null, array $args = null, array $env = null )</code></pre>
<ul>
<li class="n">Выполняет команду (статический метод)</li>
<li class="n ti"><code class="code_highlight php clear">$binPath</code> — исполняемый путь</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
<li class="n"><code class="code_highlight php clear">$args</code> — массив аргументов</li>
<li class="n"><code class="code_highlight php clear">$env</code> — ассоциативный массив переменных окружения (можно передать $_ENV`)</li>
</ul>
</li>
<li id="lib/shellcommand/methods/getCmd" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getCmd">getCmd</a> ( )</code></pre>
<ul>
<li class="n">Возвращает строку исполняемой команды</li>
</ul>
</li>
<li id="lib/shellcommand/methods/setUser" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./setUser">setUser</a> ( string $val )</code></pre>
<ul>
<li class="n">Задает имя Unix-пользователя от имени которого выполняется команда</li>
<li class="n ti"><code class="code_highlight php clear">$val</code> — имя пользователя</li>
</ul>
</li>
<li id="lib/shellcommand/methods/setGroup" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./setGroup">setGroup</a> ( string $val )</code></pre>
<ul>
<li class="n">Задает название Unix-группы от которой выполняется команда</li>
<li class="n ti"><code class="code_highlight php clear">$val</code> — название группы</li>
</ul>
</li>
<li id="lib/shellcommand/methods/setCwd" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./setCwd">setCwd</a> ( string $dir )</code></pre>
<ul>
<li class="n">Установить рабочий каталог для выполняемой команды</li>
<li class="n ti"><code class="code_highlight php clear">$dir</code> — путь</li>
</ul>
</li>
<li id="lib/shellcommand/methods/setChroot" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./setChroot">setChroot</a> ( string $dir )</code></pre>
<ul>
<li class="n">Подменяет корневой каталог для выполняемой команды</li>
<li class="n ti"><code class="code_highlight php clear">$dir</code> — путь</li>
</ul>
</li>
<li id="lib/shellcommand/methods/setArgs" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./setArgs">setArgs</a> ( array $args = NULL )</code></pre>
<ul>
<li class="n">Установить список аргументов</li>
<li class="n ti"><code class="code_highlight php clear">$args</code> — массив аргументов</li>
</ul>
</li>
<li id="lib/shellcommand/methods/setEnv" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./setEnv">setEnv</a> ( array $env = NULL )</code></pre>
<ul>
<li class="n">Задает ассоциативный массив переменных окружения (можно передать $_ENV`)</li>
<li class="n ti"><code class="code_highlight php clear">$env</code> — массив</li>
</ul>
</li>
<li id="lib/shellcommand/methods/nice" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./nice">nice</a> ( integer $nice = NULL )</code></pre>
<ul>
<li class="n">Задает приоритет выделения процессорного времени (меньше — выше)</li>
<li class="n ti"><code class="code_highlight php clear">$nice</code> — целое число</li>
</ul>
</li>
<li id="lib/shellcommand/methods/buildArgs" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./buildArgs">buildArgs</a> ( array $args )</code></pre>
<ul>
<li class="n">Строит строку аргументов по массиву</li>
<li class="n ti"><code class="code_highlight php clear">$args</code> — массив аргумент</li>
</ul>
</li>
<li id="lib/shellcommand/methods/execute" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./execute">execute</a> ( string $binPath = NULL, array $args = NULL, array $env = NULL )</code></pre>
<ul>
<li class="n">Непосредственно выполняет команду</li>
<li class="n ti"><code class="code_highlight php clear">$binPath</code> — исполняемый путь</li>
<li class="n"><code class="code_highlight php clear">$args</code> — массив аргументов</li>
<li class="n"><code class="code_highlight php clear">$env</code> — ассоциативный массив переменных окружения (можно передать $_ENV`)</li>
</ul>
</li>
<li id="lib/shellcommand/methods/finishWrite" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./finishWrite">finishWrite</a> ( )</code></pre>
<ul>
<li class="n">Закрывает поток ввода исполняемого процесса, когда буфер будет прочитан</li>
</ul>
</li>
<li id="lib/shellcommand/methods/close" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./close">close</a> ( )</code></pre>
<ul>
<li class="n">Завершает процесс</li>
</ul>
</li>
<li id="lib/shellcommand/methods/closeWrite" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./closeWrite">closeWrite</a> ( )</code></pre>
<ul>
<li class="n">Безусловно закрывает поток ввода исполняемого процесса (STDIN)</li>
</ul>
</li>
<li id="lib/shellcommand/methods/eof" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./eof">eof</a> ( )</code></pre>
<ul>
<li class="n">Достигнут ли EOF (Конец Файла)?</li>
</ul>
</li>
<li id="lib/shellcommand/methods/onEOF" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">ShellCommand</a> public <a href="#./onEOF">onEOF</a> ( callable $cb = NULL )</code></pre>
<ul>
<li class="n">Переданная функция обратного вызова будет вызвана когда достигнут EOF (Конец Файла)</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
</ul>
</li>
</ul>
<h3 id="lib/timer"><div class="in anchor">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Core;
class Timer;</code></pre>
<p>С помощью этого класса можно создавать отложенные во времени события (таймеры)</p>
<h4 id="lib/timer/examples"><div class="in anchor">Примеры<span class="header-path"> <i>&larr;</i> <a href="#lib/timer">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">$i = 0;
setTimeout(function($timer) use (&$i) {
 D("Пять секунд прошло!");

 if (++$i < 3) {
    // запуск таймера ещё на 5 секунд
    $timer->timeout();
 } else {
    D('Конец');
    $timer->free();
 }
}, 5e6);</code></pre>
<h4 id="lib/timer/global-functions"><div class="in anchor">Глобальные функции <span class="header-path"> <i>&larr;</i> <a href="#lib/timer">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li id="lib/timer/global-functions/setTimeout" class="method anchor">
<pre class="inline"><code class="php">integer <a href="#./setTimeout">setTimeout</a> ( callable $cb, integer $timeout = null, integer $id = null, integer $priority = null )</code></pre>
<ul>
<li class="n">Функция-псевдоним <code>Timer::add</code></li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
<li class="n"><code class="code_highlight php clear">$timeout</code> — количество микросекунд через которое должна быть выполнена функция обратного вызова</li>
<li class="n"><code class="code_highlight php clear">$id</code> — идентификатор таймера</li>
<li class="n"><code class="code_highlight php clear">$priority</code> — приоритет события таймера</li>
</ul>
</li>
<li class="method fake">&nbsp;</li>
</ul>
<h4 id="lib/timer/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/timer">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">integer public $id;</code></pre>
<p>Идентификатор таймера</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $lastTimeout;</code></pre>
<p>Количество микросекунд на которое был взведен таймер последний раз</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $finished = false;</code></pre>
<p>Завершен ли данный таймер?</p>
</li>
<li class="method">
<pre class="inline"><code class="php">callable public $cb;</code></pre>
<p>Функция обратного вызова</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $list = [];</code></pre>
<p>Ассоциативный массив всех таймеров</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $priority;</code></pre>
<p>Приоритет события данного таймера</p>
</li>
</ul>
<h4 id="lib/timer/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/timer">Timer <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/Timer.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<ul>
<li id="lib/timer/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( callable $cb, integer $timeout = null, integer $id = null, integer $priority = null )</code></pre>
<ul>
<li class="n">Конструктор</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
<li class="n"><code class="code_highlight php clear">$timeout</code> — количество микросекунд через которое должна быть выполнена функция обратного вызова</li>
<li class="n"><code class="code_highlight php clear">$id</code> — идентификатор таймера</li>
<li class="n"><code class="code_highlight php clear">$priority</code> — приоритет события таймера</li>
</ul>
</li>
<li id="lib/timer/methods/setPriority" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setPriority">setPriority</a> ( integer $priority )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$priority</code> — @TODO</li>
</ul>
</li>
<li id="lib/timer/methods/add" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./add">add</a> ( callable $cb, integer $timeout = null, integer $id = null, integer $priority = null )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$timeout</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$priority</code> — @TODO</li>
</ul>
</li>
<li id="lib/timer/methods/setTimeout" class="method anchor">
<pre class="inline"><code class="php">boolean public static <a href="#./setTimeout">setTimeout</a> ( integer $id, integer $timeout = NULL )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$timeout</code> — @TODO</li>
</ul>
</li>
<li id="lib/timer/methods/remove" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./remove">remove</a> ( integer $id )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
</ul>
</li>
<li id="lib/timer/methods/cancelTimeout" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./cancelTimeout">cancelTimeout</a> ( integer $id )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
</ul>
</li>
<li id="lib/timer/methods/timeout" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./timeout">timeout</a> ( integer $timeout = null )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$timeout</code> — @TODO</li>
</ul>
</li>
<li id="lib/timer/methods/cancel" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./cancel">cancel</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/timer/methods/finish" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./finish">finish</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/timer/methods/__destruct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__destruct">__destruct</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/timer/methods/free" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./free">free</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
</ul>
<h3 id="lib/transport-context"><div class="in anchor">TransportContext <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Core/TransportContext.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Core;
class TransportContext extends AppInstance;</code></pre>
<p>@TODO</p>
<h3 id="lib/fs"><div class="in anchor">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\FS;</code></pre>
<h4 id="lib/fs/filesystem"><div class="in anchor">Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\FS;
class FileSystem;</code></pre>
<h5 id="lib/fs/filesystem/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filesystem">Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">boolean public static $supported;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">Event public static $ev;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">resource public static $fd;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $modeTypes;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public static $badFDttl = 5;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php"><a href="#libraries/cache/capped-storage">CappedStorage</a> public static $fdCache;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public static $fdCacheSize = 128;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public static $eioVer = '1.2.1';</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/fs/filesystem/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filesystem">Класс FileSystem <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileSystem.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/fs/filesystem/methods/init" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./init">init</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/initEvent" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./initEvent">initEvent</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/checkFileReadable" class="method anchor">
<pre class="inline"><code class="php">boolean public static <a href="#./checkFileReadable">checkFileReadable</a> ( string $path )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/waitAllEvents" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./waitAllEvents">waitAllEvents</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/updateConfig" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./updateConfig">updateConfig</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/sanitizePath" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./sanitizePath">sanitizePath</a> ( string $path )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/statPrepare" class="method anchor">
<pre class="inline"><code class="php">array public static <a href="#./statPrepare">statPrepare</a> ( array $stat )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$stat</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/stat" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./stat">stat</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/unlink" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./unlink">unlink</a> ( string $path, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/rename" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./rename">rename</a> ( string $path, string $newpath, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$newpath</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/statvfs" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./statvfs">statvfs</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/lstat" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./lstat">lstat</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/realpath" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./realpath">realpath</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/sync" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./sync">sync</a> ( callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/syncfs" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./syncfs">syncfs</a> ( callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/touch" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./touch">touch</a> ( string $path, integer $mtime, integer $atime = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$mtime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$atime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/rmdir" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./rmdir">rmdir</a> ( string $path, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/mkdir" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./mkdir">mkdir</a> ( string $path, integer $mode, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$mode</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/readdir" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./readdir">readdir</a> ( string $path, callable $cb = null, integer $flags, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$flags</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/truncate" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./truncate">truncate</a> ( string $path, integer $offset = 0, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/sendfile" class="method anchor">
<pre class="inline"><code class="php">boolean public static <a href="#./sendfile">sendfile</a> ( mixed $outfd, string $path, callable $cb, callable $startCb = null, integer $offset = 0, integer $length = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$outfd</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$startCb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$length</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/chown" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./chown">chown</a> ( string $path, integer $uid, integer $gid = -1, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$uid</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$gid</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/readfile" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./readfile">readfile</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/readfileChunked" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./readfileChunked">readfileChunked</a> ( string $path, callable $cb, callable $chunkcb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$chunkcb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/genRndTempnam" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./genRndTempnam">genRndTempnam</a> ( string $dir = null, string $prefix = 'php' )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$dir</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$prefix</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/genRndTempnamPrefix" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./genRndTempnamPrefix">genRndTempnamPrefix</a> ( string $dir, string $prefix )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$dir</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$prefix</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/tempnam" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./tempnam">tempnam</a> ( string $dir, string $prefix, callable $cb )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$dir</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$prefix</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filesystem/methods/open" class="method anchor">
<pre class="inline"><code class="php">resource public static <a href="#./open">open</a> ( string $path, string $flags, callable $cb, integer $mode = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$flags</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$mode</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
</ul>
<h4 id="lib/fs/file"><div class="in anchor">Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\FS;
class File;</code></pre>
<h5 id="lib/fs/file/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/file">Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">integer public priority = 10;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $chunkSize = 4096;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $offset = 0;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $fdCacheKey;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $append;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $path;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $writing = false;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">boolean public $closed = false;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/fs/file/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/file">Класс File <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/File.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/fs/file/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( resource $fd, string $path )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$fd</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$path</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/getFd" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./getFd">getFd</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/convertFlags" class="method anchor">
<pre class="inline"><code class="php">mixed public static <a href="#./convertFlags">convertFlags</a> ( string $mode, boolean $text = false )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$mode</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$text</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/truncate" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./truncate">truncate</a> ( integer $offset = 0, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/stat" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./stat">stat</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/statRefresh" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./statRefresh">statRefresh</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/statvfs" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./statvfs">statvfs</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/sync" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./sync">sync</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/datasync" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./datasync">datasync</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/write" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./write">write</a> ( string $data, callable $cb = null, integer $offset = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/chown" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./chown">chown</a> ( integer $uid, integer $gid = -1, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$uid</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$gid</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/touch" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./touch">touch</a> ( integer $mtime, integer $atime = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$mtime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$atime</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/clearStatCache" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./clearStatCache">clearStatCache</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/read" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./read">read</a> ( integer $length, integer $offset = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$length</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/sendfile" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./sendfile">sendfile</a> ( mixed $outfd, callable $cb, callable $startCb = null, integer $offset = 0, integer $length = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$outfd</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$startCb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$length</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/readahead" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./readahead">readahead</a> ( integer $length, integer $offset = null, callable $cb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$length</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/readAll" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./readAll">readAll</a> ( callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/readAllChunked" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./readAllChunked">readAllChunked</a> ( callable $cb = null, callable $chunkcb = null, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$chunkcb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/__toString" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./__toString">__toString</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/setChunkSize" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setChunkSize">setChunkSize</a> ( integer $n )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/seek" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./seek">seek</a> ( integer $offset, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$offset</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/tell" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./tell">tell</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/close" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./close">close</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/file/methods/__destruct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__destruct">__destruct</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
</ul>
<h4 id="lib/fs/filewatcher"><div class="in anchor">Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\FS;
class FileWatcher;</code></pre>
<h5 id="lib/fs/filewatcher/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filewatcher">Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public files = [];</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">resource public $inotify;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public $descriptors = [];</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/fs/filewatcher/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/fs/filewatcher">Класс FileWatcher <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS/FileWatcher.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/fs">FS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/FS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/fs/filewatcher/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/fs/filewatcher/methods/addWatch" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./addWatch">addWatch</a> ( string $path, mixed $subscriber, integer $flags = NULL )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$subscriber</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$flags</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filewatcher/methods/rmWatch" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./rmWatch">rmWatch</a> ( string $path, mixed $subscriber )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$subscriber</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filewatcher/methods/onFileChanged" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onFileChanged">onFileChanged</a> ( string $path )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — @TODO</li>
</ul>
</li>
<li id="lib/fs/filewatcher/methods/watch" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./watch">watch</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
</ul>
<h3 id="lib/pubsub"><div class="in anchor">PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\PubSub;</code></pre>
<h4 id="lib/pubsub/pubsub"><div class="in anchor">Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/pubsub">PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\PubSub;
class PubSub;</code></pre>
<h5 id="lib/pubsub/pubsub/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/pubsub/pubsub">Класс PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSub.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/pubsub">PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/pubsub/pubsub/methods/eventExists" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./eventExists">eventExists</a> ( string $id )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsub/methods/sub" class="method anchor">
<pre class="inline"><code class="php"><a href="#../../pubsubevent">PubSubEvent</a> public <a href="#./sub">sub</a> ( string $id, object $obj, callable $cb )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$obj</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsub/methods/addEvent" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./addEvent">addEvent</a> ( string $id, PubSubEvent $obj )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$obj</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsub/methods/removeEvent" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./removeEvent">removeEvent</a> ( string $id )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsub/methods/unsub" class="method anchor">
<pre class="inline"><code class="php"><a href="#../../pubsubevent">PubSubEvent</a> public <a href="#./unsub">unsub</a> ( string $id, object $obj )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$obj</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsub/methods/pub" class="method anchor">
<pre class="inline"><code class="php"><a href="#../../pubsubevent">PubSubEvent</a> public <a href="#./pub">pub</a> ( string $id, mixed $data )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$id</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$data</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsub/methods/unsubFromAll" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./unsubFromAll">unsubFromAll</a> ( object $obj )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$obj</code> — @TODO</li>
</ul>
</li>
</ul>
<h4 id="lib/pubsub/pubsubevent"><div class="in anchor">Класс PubSubEvent <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSubEvent.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/pubsub">PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\PubSub;
class PubSubEvent extends \<a href="http://php.net/manual/class.splobjectstorage.php">SplObjectStorage</a>;</code></pre>
<h5 id="lib/pubsub/pubsubevent/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#lib/pubsub/pubsubevent">Класс PubSubEvent <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSubEvent.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/pubsub">PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $sub = [ ];</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">callable public $actCb;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">callable public $deactCb;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h5 id="lib/pubsub/pubsubevent/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/pubsub/pubsubevent">Класс PubSubEvent <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub/PubSubEvent.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/pubsub">PubSub <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/PubSub"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/pubsub/pubsubevent/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( callable $act = null, callable $deact = null )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$act</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$deact</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsubevent/methods/onActivation" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">PubSubEvent</a> public <a href="#./onActivation">onActivation</a> ( callable $cb )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsubevent/methods/onDeactivation" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">PubSubEvent</a> public <a href="#./onDeactivation">onDeactivation</a> ( callable $cb )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsubevent/methods/init" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">PubSubEvent</a> public static <a href="#./init">init</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsubevent/methods/sub" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">PubSubEvent</a> public <a href="#./sub">sub</a> ( object $obj, callable $cb )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$obj</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsubevent/methods/unsub" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">PubSubEvent</a> public <a href="#./unsub">unsub</a> ( object $obj )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$obj</code> — @TODO</li>
</ul>
</li>
<li id="lib/pubsub/pubsubevent/methods/pub" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">PubSubEvent</a> public <a href="#./pub">pub</a> ( mixed $data )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — @TODO</li>
</ul>
</li>
</ul>
<h3 id="lib/sockjs"><div class="in anchor">SockJS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\SockJS;</code></pre>
<h4 id="lib/sockjs/application"><div class="in anchor">Класс Application <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS/Application.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#lib/sockjs">SockJS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h4>
<pre><code class="php">namespace PHPDaemon\SockJS;
class Application extends \PHPDaemon\Core\AppInstance;</code></pre>
<h5 id="lib/sockjs/application/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#lib/sockjs/application">Класс Application <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS/Application.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib/sockjs">SockJS <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/SockJS"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#lib">Библиотеки</a></span></div>

</h5>
<ul>
<li id="lib/sockjs/application/methods/getLocalSubscribersCount" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./getLocalSubscribersCount">getLocalSubscribersCount</a> ( $chan )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/subscribe" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./subscribe">subscribe</a> ( $chan, $cb, $opcb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/setnx" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./setnx">setnx</a> ( $key, $value, $cb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/setkey" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./setkey">setkey</a> ( $key, $value, $cb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/getkey" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./getkey">getkey</a> ( $key, $cb = null )</code></pre>
<ul>
<li class="n">@DESCNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/expire" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./expire">expire</a> ( $key, $seconds, $cb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/unsubscribe" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./unsubscribe">unsubscribe</a> ( $chan, $cb, $opcb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/unsubscribeReal" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./unsubscribeReal">unsubscribeReal</a> ( $chan, $opcb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/publish" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./publish">publish</a> ( $chan, $cb, $opcb = null )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/onReady" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./onReady">onReady</a> (  )</code></pre>
<ul>
<li class="n">@DESCспользуется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/onFinish" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./onFinish">onFinish</a> (  )</code></pre>
<ul>
<li class="n">@DESCпользуется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/attachWss" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./attachWss">attachWss</a> ( $wss )</code></pre>
<ul>
<li class="n">@DESCуется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/wsHandler" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./wsHandler">wsHandler</a> ( $ws, $path, $client, $state )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/detachWss" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./detachWss">detachWss</a> ( $wss )</code></pre>
<ul>
<li class="n">@DESCуется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/beginSession" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./beginSession">beginSession</a> ( $path, $sessId, $server )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/getRouteOptions" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./getRouteOptions">getRouteOptions</a> ( $path )</code></pre>
<ul>
<li class="n">@DESC DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/endSession" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./endSession">endSession</a> ( $session )</code></pre>
<ul>
<li class="n">@DESC в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/beginRequest" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./beginRequest">beginRequest</a> ( $req, $upstream )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
<li id="lib/sockjs/application/methods/callMethod" class="method anchor">
<pre class="inline"><code class="php">public function <a href="#./callMethod">callMethod</a> ( $method, $req, $upstream )</code></pre>
<ul>
<li class="n">@DESC</li>
<li class="n ti"><code class="code_highlight php clear">$params</code> — params</li>
</ul>
</li>
</ul>
<h2 id="apps"><div class="in anchor">Приложения</div>

</h2>
<h3 id="apps/mongonode"><div class="in anchor">MongoNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/MongoNode.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Examples;
class MongoNode;</code></pre>
<p>Это приложение предоставляет узел репликации MongoDB. Это дает возможность устанавливать произвольные хуки на добавление/изменение/удаление объектов.</p>
<h4 id="apps/mongonode/requirements"><div class="in anchor">Требования<span class="header-path"> <i>&larr;</i> <a href="#apps/mongonode">MongoNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/MongoNode.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h4>
<p>Требуется установленный модуль pecl/mongo и включенный phpdaemon/MongoCllient.</p>
<h4 id="apps/mongonode/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#apps/mongonode">MongoNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/MongoNode.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h4>
<p>Когда MongoNode включено, оно незамедлительно получает новые изменения в базе.</p>
<p>По-умолчанию:</p>
<p>Если объект обладает свойством “_key” сериализованное его значение отправляется в ключ Memcache под тем названием, которое задано в значении _key. Когда объект удаляется из MongoDB, он удаляется и из Memcache.</p>
<p>Если объект имеет свойство “_ev”, его значение отправляется в RTEP-событие под тем названием, которое задано в значении _ev.</p>
<h3 id="apps/telnethoneypot"><div class="in anchor">TelnetHoneypot <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/TelnetHoneypot.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Examples;
class TelnetHoneypot;</code></pre>
<p>Это приложение предоставляет простой telnet сервер для phpDaemon.</p>
<h4 id="apps/telnethoneypot/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#apps/telnethoneypot">TelnetHoneypot <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Examples/TelnetHoneypot.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h4>
<pre><code>[root@gf-home-server phpdaemon.wiki]# telnet 127.0.0.1 23
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'.
ping
pong</code></pre>
<h3 id="apps/serverstatus"><div class="in anchor">ServerStatus <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Applications/ServerStatus.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Applications;
class ServerStatus;</code></pre>
<p>Это приложение обеспечивает получение информации о состоянии phpDaemon по протоколу HTTP, аналогично консольной команде <code>phpd fullstatus</code>.</p>
<h4 id="apps/serverstatus/use"><div class="in anchor">Использование<span class="header-path"> <i>&larr;</i> <a href="#apps/serverstatus">ServerStatus <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Applications/ServerStatus.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h4>
<p>Необходимо добавить в <code>conf/phpd.conf</code>:</p>
<pre><code class="">ServerStatus {
    enable    1;
}
HTTP {
    enable 1;
    privileged;
}</code></pre>
<p>Также в <code>conf/AppResolver.php</code> в методе <code>getRequestRoute()</code> добавить условие для запуска метода <code>beginRequest()</code> в приложении ServerStatus. Например, чтобы получить информацию о phpDaemon по адресу http://<host>/ServerStatus/:</p>
<pre><code class="php">/**
 * Routes incoming request to related application. Method is for overloading.   
 * @param object Request.
 * @param object AppInstance of Upstream.
 * @return string Application's name.
 */
public function getRequestRoute($req, $upstream) {
    if (preg_match('~^/(ServerStatus|Example)/~', $req->attrs->server['DOCUMENT_URI'], $m)) {
        return $m[1];
    }
}</code></pre>
<p>Пример ответа:</p>
<pre><code class="">Uptime: 1 day. 11 hour. 33 min. 51 sec.
State of workers:
        Total: 4
        Idle: 4
        Busy: 0
        Shutdown: 20
        Pre-init: 0
        Wait-init: 0
        Init: 0</code></pre>
<h4 id="apps/serverstatus/note"><div class="in anchor">Примечание<span class="header-path"> <i>&larr;</i> <a href="#apps/serverstatus">ServerStatus <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Applications/ServerStatus.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#apps">Приложения</a></span></div>

</h4>
<p>Если вы используете опцию --logworkersetstatus, то соответствие такое:</p>
<ul>
<li>1 - idle</li>
<li>2 - busy</li>
<li>3 - shutdown</li>
<li>4 - pre-init</li>
<li>5 - wait-init</li>
<li>6 - init</li>
</ul>
<h2 id="utils"><div class="in anchor">Утилиты</div>

</h2>
<h3 id="utils/binary"><div class="in anchor">Binary <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Binary.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class Binary;</code></pre>
<p>Данный класс предоставляет набор статических методов для работы с бинарными данными.</p>
<h4 id="utils/binary/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/binary">Binary <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Binary.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/binary/methods/labels" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./labels">labels</a> ( string $q )</code></pre>
<ul>
<li class="n">Возвращает структуру имен. Используется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">$q</code> — Список имен через точку</li>
</ul>
</li>
<li id="utils/binary/methods/parseLabels" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./parseLabels">parseLabels</a> ( string &$data, string $orig = null )</code></pre>
<ul>
<li class="n">азбирает структуру имен. Используется в DNS</li>
<li class="n ti"><code class="code_highlight php clear">&$data</code> — Структура</li>
<li class="n"><code class="code_highlight php clear">$orig</code> — Изначальный пакет данных для обработки ссылок на подстроки</li>
</ul>
</li>
<li id="utils/binary/methods/LV" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./LV">LV</a> ( string $str, integer $len = 1, boolean $lrev = false )</code></pre>
<ul>
<li class="n">Возвращает структуру Длина-Значение</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Значение</li>
<li class="n"><code class="code_highlight php clear">$len</code> — Количество байтов для записи длины</li>
<li class="n"><code class="code_highlight php clear">$lrev</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/LVnull" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./LVnull">LVnull</a> ( string $str )</code></pre>
<ul>
<li class="n">Возвращает структуру Длина-Значение с Little-Endian размером длины в два байта и NUL-байтом после строки</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Значение</li>
</ul>
</li>
<li id="utils/binary/methods/byte" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./byte">byte</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в один байт</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Число от 0 до 255</li>
</ul>
</li>
<li id="utils/binary/methods/word" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./word">word</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в два байта</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 65535</li>
</ul>
</li>
<li id="utils/binary/methods/wordl" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./wordl">wordl</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в два байта Little-Endian</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 65535</li>
</ul>
</li>
<li id="utils/binary/methods/dword" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./dword">dword</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в четыре байта</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 4294967295</li>
</ul>
</li>
<li id="utils/binary/methods/dwordl" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./dwordl">dwordl</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в четыре байта Little-Endian</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 4294967295</li>
</ul>
</li>
<li id="utils/binary/methods/qword" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./qword">qword</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в восемь байт</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 18446744073709551615</li>
</ul>
</li>
<li id="utils/binary/methods/qwordl" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./qwordl">qwordl</a> ( integer $int )</code></pre>
<ul>
<li class="n">Кодирует целое число в восемь байт Little-Endian</li>
<li class="n ti"><code class="code_highlight php clear">$int</code> — Целое от 0 до 18446744073709551615</li>
</ul>
</li>
<li id="utils/binary/methods/getByte" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./getByte">getByte</a> ( string &$p )</code></pre>
<ul>
<li class="n">Удаляет первый байт из строки и возвращает его в виде целого числа от 0 до 255</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
</ul>
</li>
<li id="utils/binary/methods/getChar" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getChar">getChar</a> ( string &$p )</code></pre>
<ul>
<li class="n">Удаляет первый байт из строки и возвращает его в виде строки</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
</ul>
</li>
<li id="utils/binary/methods/getWord" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./getWord">getWord</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые два байта из строки и возвращает их в виде целого числа от 0 до 65535</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/getStrWord" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getStrWord">getStrWord</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые два байта из строки и возвращает их</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/getDWord" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./getDWord">getDWord</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые четыре байта из строки и возвращает их в виде целого от 0 до 4294967295</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/getQword" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./getQword">getQword</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые восемь байт из строки и возвращает их в виде целого от 0 до 18446744073709551615</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/getStrQWord" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getStrQWord">getStrQWord</a> ( string &$p, boolean $l = false )</code></pre>
<ul>
<li class="n">Удаляет первые восемь байт из строки и возвращает их в виде строки</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/getString" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getString">getString</a> ( string &$str )</code></pre>
<ul>
<li class="n">Возвращает подстроку до первого NUL-байта и удаляет её из исходной вместе с NUL-байтом</li>
<li class="n ti"><code class="code_highlight php clear">&$str</code> — Строка</li>
</ul>
</li>
<li id="utils/binary/methods/getLV" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getLV">getLV</a> ( string &$p, boolean $l = 1, boolean $nul = false, boolean $lrev = false )</code></pre>
<ul>
<li class="n">Разбирает пару Длина-Значение, удаляет её из начала исходной строки и возвращает значение</li>
<li class="n ti"><code class="code_highlight php clear">&$p</code> — Строка</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Количество байтов для записи длины</li>
<li class="n"><code class="code_highlight php clear">$nul</code> — Если true, то воспринимать как NUL-завершенную строку</li>
<li class="n"><code class="code_highlight php clear">$lrev</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/flags2bitarray" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./flags2bitarray">flags2bitarray</a> ( array $flags, integer $len = 4 )</code></pre>
<ul>
<li class="n">Кодирует массив флагов (числа должны быть степенями двойки – 2, 4, 16, 32...)</li>
<li class="n ti"><code class="code_highlight php clear">$flags</code> — массив чисел</li>
<li class="n"><code class="code_highlight php clear">$len</code> — Количество байтов на выходе</li>
</ul>
</li>
<li id="utils/binary/methods/int2bytes" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./int2bytes">int2bytes</a> ( integer $len, integer $int = 0, boolean $l = false )</code></pre>
<ul>
<li class="n">Кодирует целое число</li>
<li class="n ti"><code class="code_highlight php clear">$len</code> — Количество байтов на выходе</li>
<li class="n"><code class="code_highlight php clear">$int</code> — Целое число</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/i2b" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./i2b">i2b</a> ( integer $len, integer $int = 0, boolean $l = false )</code></pre>
<ul>
<li class="n">Псевдоним метода <code class="code_highlight php clear">int2bytes</code></li>
</ul>
</li>
<li id="utils/binary/methods/bytes2int" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./bytes2int">bytes2int</a> ( string $str, boolean $l = false )</code></pre>
<ul>
<li class="n">Конвертирует строку в целое число</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Строку</li>
<li class="n"><code class="code_highlight php clear">$l</code> — Если true, то Little-Endian</li>
</ul>
</li>
<li id="utils/binary/methods/b2i" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./b2i">b2i</a> ( string $str, boolean $l = false )</code></pre>
<ul>
<li class="n">Псевдоним метода <code class="code_highlight php clear">bytes2int</code></li>
</ul>
</li>
<li id="utils/binary/methods/bitmap2bytes" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./bitmap2bytes">bitmap2bytes</a> ( string $bitmap, integer $check_len = 0 )</code></pre>
<ul>
<li class="n">Конвертирует побитовое представление в массив байтов</li>
<li class="n ti"><code class="code_highlight php clear">$bitmap</code> — Строка состоящая из 1 и 0</li>
<li class="n"><code class="code_highlight php clear">$check_len</code> — Ожидаемое количество байт на выходе, при несовпадении будет возвращено false</li>
</ul>
</li>
<li id="utils/binary/methods/getbitmap" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getbitmap">getbitmap</a> ( string $byte )</code></pre>
<ul>
<li class="n">Получить побитовое представление в виде строки из 1 и 0</li>
<li class="n ti"><code class="code_highlight php clear">$byte</code> — Строка из одного байта</li>
</ul>
</li>
</ul>
<h3 id="utils/crypt"><div class="in anchor">Crypt <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Crypt.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class Crypt;</code></pre>
<p>Данный класс содержит методы, относящиеся к криптографии.</p>
<h4 id="utils/crypt/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/crypt">Crypt <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Crypt.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/crypt/methods/hash" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./hash">hash</a> ( string $str, string $salt = '', boolean $plain = false )</code></pre>
<ul>
<li class="n">Возвращает хеш строки по алгоритму Keccak</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — исходная строка</li>
<li class="n"><code class="code_highlight php clear">$salt</code> — примесь для хеширования</li>
<li class="n"><code class="code_highlight php clear">$plain</code> — если <code>false</code> то результат будет закодирован в base64</li>
</ul>
</li>
<li id="utils/crypt/methods/randomString" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./randomString">randomString</a> ( integer $len = 64, string $chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-.' )</code></pre>
<ul>
<li class="n">Генерирует псевдослучайную строку длиной <code class="code_highlight php clear">$len</code> из представленных в <code class="code_highlight php clear">$chars</code> символов</li>
<li class="n ti"><code class="code_highlight php clear">$len</code> — длина выходной строки</li>
<li class="n"><code class="code_highlight php clear">$chars</code> — набор используемых символов</li>
</ul>
</li>
<li id="utils/crypt/methods/compareStrings" class="method anchor">
<pre class="inline"><code class="php">boolean public static <a href="#./compareStrings">compareStrings</a> ( string $a, string $b )</code></pre>
<ul>
<li class="n">Сравнение строк устойчивое к атаке по времени (англ. Timing attack)</li>
<li class="n ti"><code class="code_highlight php clear">$a, $b</code> — Строки для сравнения</li>
</ul>
</li>
</ul>
<h3 id="utils/datetime"><div class="in anchor">DateTime <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/DateTime.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class DateTime extends \<a href="http://php.net/manual/class.datetime.php">DateTime</a>;</code></pre>
<p>В конструтор можно передавать метку времени Unix.</p>
<h4 id="utils/datetime/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/datetime">DateTime <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/DateTime.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/datetime/methods/diffAsText" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./diffAsText">diffAsText</a> ( mixed $datetime1, mixed $datetime2, boolean $absolute = false )</code></pre>
<ul>
<li class="n">Возвращает разницу двух временных меток в виде строки. Пример: <code class="clear">1 year. 2 mon. 6 day. 4 hours. 21 min. 10 sec.</code></li>
<li class="n ti"><code class="code_highlight php clear">$datetime1, $datetime2</code> — временные метки. Может быть объектом <a target="_blank" class="tpl-outlink" href="http://php.net/manual/class.datetimeinterface.php">DateTimeInterface<i class="fa fa-external-link"></i></a>, строкой или меткой времени Unix</li>
<li class="n"><code class="code_highlight php clear">$absolute</code> — используется, чтобы вернуть абсолютную разницу</li>
</ul>
</li>
<li class="method fake">&nbsp;</li>
</ul>
<h3 id="utils/encoding"><div class="in anchor">Encoding <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Encoding.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class Encoding;</code></pre>
<p>Сторонняя библиотека — <a target="_blank" class="tpl-outlink" href="https://github.com/neitanod/forceutf8">forceutf8<i class="fa fa-external-link"></i></a></p>
<h4 id="utils/encoding/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/encoding">Encoding <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Encoding.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/encoding/methods/toUTF8" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./toUTF8">toUTF8</a> ( string $text )</code></pre>
<ul>
<li class="n">Приводит текст к UTF-8</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
</li>
<li id="utils/encoding/methods/toWin1252" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./toWin1252">toWin1252</a> ( string $text )</code></pre>
<ul>
<li class="n">Приводит к текст к Windows-1251</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
</li>
<li id="utils/encoding/methods/toISO8859" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./toISO8859">toISO8859</a> ( string $text )</code></pre>
<ul>
<li class="n">Приводит к текст к ISO-8859</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
</li>
<li id="utils/encoding/methods/toLatin1" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./toLatin1">toLatin1</a> ( string $text )</code></pre>
<ul>
<li class="n">Приводит к текст к Windows-1251</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
</li>
<li id="utils/encoding/methods/fixUTF8" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./fixUTF8">fixUTF8</a> ( string $text )</code></pre>
<ul>
<li class="n">Исправляет UTF-8</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
</li>
<li id="utils/encoding/methods/UTF8FixWin1252Chars" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./UTF8FixWin1252Chars">UTF8FixWin1252Chars</a> ( string $text )</code></pre>
<ul>
<li class="n">Исправляет UTF-8 после конвертации из Windows-1252 так, будто это была ISO-8859</li>
<li class="n ti"><code class="code_highlight php clear">$text</code> — Текст</li>
</ul>
</li>
<li id="utils/encoding/methods/removeBOM" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./removeBOM">removeBOM</a> ( string $str = "" )</code></pre>
<ul>
<li class="n">Удаляет Byte-order mark</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Текст</li>
</ul>
</li>
<li id="utils/encoding/methods/normalizeEncoding" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./normalizeEncoding">normalizeEncoding</a> ( string $encodingLabel )</code></pre>
<ul>
<li class="n">Приводит название кодировки к стандартной записи</li>
<li class="n ti"><code class="code_highlight php clear">$encodingLabel</code> — Название кодировки</li>
</ul>
</li>
</ul>
<h3 id="utils/irc"><div class="in anchor">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class IRC;</code></pre>
<p>Класс используемый в IRC-клиенте и IRC-баунсере</p>
<h4 id="utils/irc/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/irc">IRC <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/IRC.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/irc/methods/getCommandByCode" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getCommandByCode">getCommandByCode</a> ( integer $code )</code></pre>
<ul>
<li class="n">Возвращает строковое представление команды по её коду</li>
<li class="n ti"><code class="code_highlight php clear">$code</code> — код команды</li>
</ul>
</li>
<li id="utils/irc/methods/getCodeByCommand" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./getCodeByCommand">getCodeByCommand</a> ( string $cmd )</code></pre>
<ul>
<li class="n">Возвращает код команды по её строковому представлению</li>
<li class="n ti"><code class="code_highlight php clear">$cmd</code> — строковое представление команды</li>
</ul>
</li>
<li id="utils/irc/methods/parseUsermask" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./parseUsermask">parseUsermask</a> ( string $mask )</code></pre>
<ul>
<li class="n">Возвращает ассоциативный массив вида {nick: string, unverified: bool, user: string, host: string, orig: string}</li>
<li class="n ti"><code class="code_highlight php clear">$mask</code> — маска вида <code>nick!~?user@host</code></li>
</ul>
</li>
</ul>
<h3 id="utils/mime"><div class="in anchor">MIME <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/MIME.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class MIME;</code></pre>
<h4 id="utils/mime/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/mime">MIME <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/MIME.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/mime/methods/get" class="method anchor">
<pre class="inline"><code class="php">string public static <a href="#./get">get</a> ( string $path )</code></pre>
<ul>
<li class="n">Возвращает MIME-заголовок файла или <code>false</code></li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — путь до файла</li>
</ul>
</li>
<li class="method fake">&nbsp;</li>
</ul>
<h3 id="utils/shmentity"><div class="in anchor">ShmEntity <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/ShmEntity.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class ShmEntity;</code></pre>
<p>Эластичное хранилище кучи в разделяемой памяти</p>
<blockquote>
<p>Используется для хранения массива состояний рабочих процессов</p>
</blockquote>
<h4 id="utils/shmentity/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/shmentity">ShmEntity <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/ShmEntity.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/shmentity/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./__construct">__construct</a> ( string $path, integer $segsize, string $name, boolean $create = false )</code></pre>
<ul>
<li class="n">Конструктор</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — путь до файла</li>
<li class="n"><code class="code_highlight php clear">$segsize</code> — размер сегмента</li>
<li class="n"><code class="code_highlight php clear">$name</code> — название</li>
<li class="n"><code class="code_highlight php clear">$create</code> — флаг создания сегмента</li>
</ul>
</li>
<li id="utils/shmentity/methods/open" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./open">open</a> ( integer $segno = 0, boolean $create = false )</code></pre>
<ul>
<li class="n">Открывает сегмент разделяемой памяти</li>
<li class="n ti"><code class="code_highlight php clear">$segno</code> — номер сегмента</li>
<li class="n"><code class="code_highlight php clear">$create</code> — флаг создания сегмента</li>
</ul>
</li>
<li id="utils/shmentity/methods/getSegments" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getSegments">getSegments</a> ( )</code></pre>
<ul>
<li class="n">Возвращает индексный массив всех сегментов</li>
</ul>
</li>
<li id="utils/shmentity/methods/openall" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./openall">openall</a> ( )</code></pre>
<ul>
<li class="n">Открывает все сегменты</li>
</ul>
</li>
<li id="utils/shmentity/methods/write" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./write">write</a> ( string $data, integer $offset )</code></pre>
<ul>
<li class="n">Записывает данные <code class="code_highlight php clear">$data</code> со смещением <code class="code_highlight php clear">$offset</code></li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — данные</li>
<li class="n"><code class="code_highlight php clear">$offset</code> — смещение</li>
</ul>
</li>
<li id="utils/shmentity/methods/read" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./read">read</a> ( integer $offset, integer $length = 1 )</code></pre>
<ul>
<li class="n">Считывает данные длиной <code class="code_highlight php clear">$length</code> со смещением <code class="code_highlight php clear">$offset</code></li>
<li class="n ti"><code class="code_highlight php clear">$offset</code> — смещение</li>
<li class="n"><code class="code_highlight php clear">$length</code> — длина читаемых данных</li>
</ul>
</li>
<li id="utils/shmentity/methods/delete" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./delete">delete</a> ( )</code></pre>
<ul>
<li class="n">Удаляет все сегменты</li>
</ul>
</li>
</ul>
<h3 id="utils/terminal"><div class="in anchor">Terminal <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Terminal.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Utils;
class Terminal;</code></pre>
<p><a target="_self" class="tpl-catimg" href="#contribute/code"><img src="/docs/imgs/cat.png" style="padding-right: 6px;" align="left"></a><br />Данный класс нуждается в доработке: не хватает полноценной поддержки ncurses.
Если хотите помочь, нажмите на кота!<br /></p>
<h4 id="utils/terminal/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#utils/terminal">Terminal <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Utils/Terminal.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#utils">Утилиты</a></span></div>

</h4>
<ul>
<li id="utils/terminal/methods/readln" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./readln">readln</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="utils/terminal/methods/enableColor" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./enableColor">enableColor</a> ( boolean $bool = true )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$bool</code> — @TODO</li>
</ul>
</li>
<li id="utils/terminal/methods/clearScreen" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./clearScreen">clearScreen</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="utils/terminal/methods/setStyle" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setStyle">setStyle</a> ( string $c )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$c</code> — @TODO</li>
</ul>
</li>
<li id="utils/terminal/methods/resetStyle" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./resetStyle">resetStyle</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="utils/terminal/methods/drawParam" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./drawParam">drawParam</a> ( string $name, string $description, array $values = '' )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$description</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$values</code> — @TODO</li>
</ul>
</li>
<li id="utils/terminal/methods/drawTable" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./drawTable">drawTable</a> ( array $rows )</code></pre>
<ul>
<li class="n">@TODO</li>
<li class="n ti"><code class="code_highlight php clear">$rows</code> — @TODO</li>
</ul>
</li>
</ul>
<h2 id="structures"><div class="in anchor">Структуры</div>

</h2>
<h3 id="structures/object-storage"><div class="in anchor">ObjectStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/ObjectStorage.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#structures">Структуры</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Structures;
class ObjectStorage extends \<a href="http://php.net/manual/class.splobjectstorage.php">SplObjectStorage</a>;</code></pre>
<p>Данный класс предоставляет хранилище объектов с несколькими дополнительными методами</p>
<blockquote>
<p>Можно создавать классы-наследники</p>
</blockquote>
<h4 id="structures/object-storage/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#structures/object-storage">ObjectStorage <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/ObjectStorage.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#structures">Структуры</a></span></div>

</h4>
<ul>
<li id="structures/object-storage/methods/each" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./each">each</a> ( string $method, mixed $arg, ... )</code></pre>
<ul>
<li class="n">Проходит по всем объектам, вызывая у каждого из них метод <code class="code_highlight php clear">$method</code> c заданными аргументами <code class="code_highlight php clear">$args</code> и возвращает количество объектов в хранилище</li>
<li class="n ti"><code class="code_highlight php clear">$method</code> — вызываемый метод объекта</li>
<li class="n"><code class="code_highlight php clear">$arg, ...</code> — аргументы</li>
</ul>
</li>
<li id="structures/object-storage/methods/removeAll" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./removeAll">removeAll</a> ( object $obj = null )</code></pre>
<ul>
<li class="n">Удаляет из текущего контейнера все объекты, которых нет в контейнере <code class="code_highlight php clear">$obj</code></li>
<li class="n ti"><code class="code_highlight php clear">$obj</code> — контейнер, содержащий элементы, которые должны остаться в текущем контейнере</li>
</ul>
</li>
<li id="structures/object-storage/methods/detachFirst" class="method anchor">
<pre class="inline"><code class="php">object public <a href="#./detachFirst">detachFirst</a> ( )</code></pre>
<ul>
<li class="n">Возвращает первый объект, удалив его из контейнера</li>
</ul>
</li>
<li id="structures/object-storage/methods/getFirst" class="method anchor">
<pre class="inline"><code class="php">object public <a href="#./getFirst">getFirst</a> ( )</code></pre>
<ul>
<li class="n">Возвращает первый объект контейнера</li>
</ul>
</li>
</ul>
<h3 id="structures/priority-queue-callbacks"><div class="in anchor">PriorityQueueCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/PriorityQueueCallbacks.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#structures">Структуры</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Structures;
class PriorityQueueCallbacks extends \<a href="http://php.net/manual/class.splpriorityqueue.php">SplPriorityQueue</a>;</code></pre>
<blockquote>
<p>Используется в <a target="_self" class="tpl-inlink" href="#network/client">Network/Client<i class="fa fa-caret-square-o-up"></i></a> для хранения вызовов, пока все доступные соединения заняты</p>
</blockquote>
<h4 id="structures/priority-queue-callbacks/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#structures/priority-queue-callbacks">PriorityQueueCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/PriorityQueueCallbacks.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#structures">Структуры</a></span></div>

</h4>
<ul>
<li id="structures/priority-queue-callbacks/methods/enqueue" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./enqueue">enqueue</a> ( callable $cb, integer $pri = 0 )</code></pre>
<ul>
<li class="n">Добавляет функцию обратного вызова в очередь и пересортирует её</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция обратного вызова</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — приоритет</li>
</ul>
</li>
<li id="structures/priority-queue-callbacks/methods/insert" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./insert">insert</a> ( callable $cb, integer $pri = 0 )</code></pre>
<ul>
<li class="n">Псевдоним метода <code class="code_highlight php clear">enqueue</code></li>
</ul>
</li>
<li id="structures/priority-queue-callbacks/methods/dequeue" class="method anchor">
<pre class="inline"><code class="php">CallbackWrapper public <a href="#./dequeue">dequeue</a> ( )</code></pre>
<ul>
<li class="n">Извлекает функцию обратного вызова из начала очереди и пересортирует её. Псевдоним метода <code class="code_highlight php clear">SplPriorityQueue::extract</code></li>
</ul>
</li>
<li id="structures/priority-queue-callbacks/methods/executeOne" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./executeOne">executeOne</a> ( mixed $arg, ... )</code></pre>
<ul>
<li class="n">Извлекает первую из начала очереди функцию обратного вызова и выполняет её с переданными аргументами. Возвращает <code>false</code> если очередь пуста</li>
<li class="n ti"><code class="code_highlight php clear">$arg, ...</code> — аргументы</li>
</ul>
</li>
<li id="structures/priority-queue-callbacks/methods/executeAll" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./executeAll">executeAll</a> ( mixed $arg, ... )</code></pre>
<ul>
<li class="n">Извлекает и выполняет все функции обратного вызова в очереди с переданными аргументами. Возвращает количество выполненных функций обратного вызова</li>
<li class="n ti"><code class="code_highlight php clear">$arg, ...</code> — аргументы</li>
</ul>
</li>
</ul>
<h3 id="structures/stack-callbacks"><div class="in anchor">StackCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/StackCallbacks.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#structures">Структуры</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Structures;
class StackCallbacks extends \<a href="http://php.net/manual/class.splstack.php">SplStack</a>;</code></pre>
<p>Данный класс предоставляет стек функций обратного вызова с несколькими дополнительными методами</p>
<blockquote>
<p>Используется в <a target="_self" class="tpl-inlink" href="#network/client">Network/Client<i class="fa fa-caret-square-o-up"></i></a> для хранения стека функций обратного вызова запросов</p>
</blockquote>
<h4 id="structures/stack-callbacks/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#structures/stack-callbacks">StackCallbacks <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Structures/StackCallbacks.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#structures">Структуры</a></span></div>

</h4>
<ul>
<li id="structures/stack-callbacks/methods/push" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./push">push</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Добавляет функцию обратного вызова в конец стека</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция</li>
</ul>
</li>
<li id="structures/stack-callbacks/methods/unshift" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./unshift">unshift</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Добавляет функцию обратного вызова в начало стека</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — функция</li>
</ul>
</li>
<li id="structures/stack-callbacks/methods/executeOne" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./executeOne">executeOne</a> ( mixed $arg, ... )</code></pre>
<ul>
<li class="n">Извлекает первую функцию обратного вызова из начала стека и выполняет её с переданными аргументами. Возвращает <code>false</code> если стек пуст</li>
<li class="n ti"><code class="code_highlight php clear">$arg</code> — аргументы</li>
</ul>
</li>
<li id="structures/stack-callbacks/methods/executeAndKeepOne" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./executeAndKeepOne">executeAndKeepOne</a> ( mixed $arg, ... )</code></pre>
<ul>
<li class="n">Выполяет первую функцию обратного вызова из начала стека с переданными аргументами без извлечения её из стека. Возвращает <code>false</code> если стек пуст</li>
<li class="n ti"><code class="code_highlight php clear">$arg, ...</code> — аргументы</li>
</ul>
</li>
<li id="structures/stack-callbacks/methods/executeAll" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./executeAll">executeAll</a> ( mixed $arg, ... )</code></pre>
<ul>
<li class="n">Извлекает все функции обратного вызова и выполняет с заданными аргументами. Возвращает количество выполненных функций.</li>
<li class="n ti"><code class="code_highlight php clear">$arg1, ...</code> — аргументы</li>
</ul>
</li>
<li id="structures/stack-callbacks/methods/toArray" class="method anchor">
<pre class="inline"><code class="php">array public <a href="#./toArray">toArray</a> ( )</code></pre>
<ul>
<li class="n">Возвращает индексный массив стека</li>
</ul>
</li>
<li id="structures/stack-callbacks/methods/reset" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./reset">reset</a> ( )</code></pre>
<ul>
<li class="n">Удаляет все элементы из стека</li>
</ul>
</li>
</ul>
<h2 id="traits"><div class="in anchor">Примеси</div>

</h2>
<p>Примеси (англ. traits). <a target="_blank" class="tpl-outlink" href="http://php.net/traits"><i class="fa fa-external-link"></i></a></p>
<p>Данный раздел описывает доступные для разработчиков встроенные примеси.</p>
<h3 id="traits/class-watchdog"><div class="in anchor">ClassWatchdog <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/ClassWatchdog.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait ClassWatchdog;</code></pre>
<blockquote>
<p>Данная примесь уже использована во всех базовых классах и при наследовании от них не нужно использовать её повторно.</p>
</blockquote>
<p>Эта примесь нужна, чтобы предотвратить появление ошибки уровня E_ERROR (Fatal error) при обращении к несуществующему методу. E_ERROR же прерывает работу всего рабочего процесса, что недопустимо в реалиях phpDaemon. Настоятельно рекомендуется к использованию во всех используемых классах.</p>
<p>Определены следующие <a target="_blank" class="tpl-outlink" href="http://php.net/language.oop5.magic">магические методы<i class="fa fa-external-link"></i></a>:</p>
<ul>
<li class="n ti"><code>__call</code> — бросает исключение UndefinedMethodCalled</li>
<li class="n ti"><code>__callStatic</code> — бросает исключение UndefinedMethodCalled</li>
</ul>
<h3 id="traits/static-object-watchdog"><div class="in anchor">StaticObjectWatchdog <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/StaticObjectWatchdog.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait StaticObjectWatchdog;</code></pre>
<blockquote>
<p>Данная примесь уже использована во всех базовых классах и при наследовании от них не нужно использовать её повторно.</p>
</blockquote>
<p>PHP-машина умеет хранить набор свойств объекта двумя способами: в виде фиксированного массива и в виде ассоциативной таблицы (англ. hash table) с использованием <a target="_blank" class="tpl-outlink" href="http://ru.wikipedia.org/wiki/B-дерево">B-дерева<i class="fa fa-external-link"></i></a>. Изначально, при создании любого объекта, свойства хранятся в виде массива с быстрым доступом. При первой попытке установить значение свойства не объявленного директивой <code><i>visibility</i> $<i>name</i></code>, набор свойств конвертируется в ассоциативную таблицу. То же самое происходит при удалении (<a target="_blank" class="tpl-outlink" href="http://php.net/unset">unset<i class="fa fa-external-link"></i></a>) любого свойства). Данная операция сама по себе не самая быстрая, особенно при большом количестве свойств), но и доступ к свойствам после неё замедляется. Разумеется, есть объекты с намеренно динамическим набором свойств, которые сродни ассоциативным массивам и с ними всё в порядке. Но часто бывает так, что программист забывает добавить объявление свойства или даже опечатывается в его названии. Порой это ведёт к сильному ухудшению производительности, которое трудно расследовать.</p>
<blockquote>
<p>Прежде чем говорить, что PHP медленный, неплохо бы научиться его готовить.</p>
</blockquote>
<p>Данная примесь определяет следующие магические методы:</p>
<ul>
<li class="n ti"><code>__set</code> — пишет в журнал с префиксом <code>[CODE WARN]</code> при попытке записать значение несуществующего или недоступного из этой области видимости свойства. </li>
<li class="n ti"><code>__unset</code> — пишет в журнал с префиксом <code>[CODE WARN]</code> при попытке удалить свойство.</li>
</ul>
<h3 id="traits/strict-static-object-watchdog"><div class="in anchor">StrictStaticObjectWatchdog <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/StrictStaticObjectWatchdog.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait StrictStaticObjectWatchdog;</code></pre>
<p>Поведение аналогично <a target="_self" class="tpl-inlink" href="#../static-object-watchdog">StaticObjectWatchdog<i class="fa fa-caret-square-o-up"></i></a>, но эта примесь бросает исключение, вместо записи в журнал.</p>
<p>Определяет следующие магические методы:</p>
<ul>
<li class="n ti"><code>__set</code> — бросает исключение UndefinedPropertySetting при попытке записать значение несуществующего или недоступного из этой области видимости свойства. </li>
<li class="n ti"><code>__unset</code> — бросает исключение UnsettingProperty при попытке удалить свойство.</li>
</ul>
<h3 id="traits/deferred-event-handlers"><div class="in anchor">DeferredEventHandlers <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/DeferredEventHandlers.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait DeferredEventHandlers;</code></pre>
<p>Данная примесь реализует механизм отложенных событий в объекте.</p>
<pre><code class="php">class MyClass {
    use \PHPDaemon\Traits\DeferredEventHandlers;
    protected function onSomethingEvent($foo, $bar) {
        return function($ev) {
            list ($foo, $bar = $ev->args;
            $ev->setResult("Foo is $foo, bar is $bar");
        };
    }
}
$o = new MyClass;
$o->onSomething(function($ev) {
    D($ev->result);
    // Foo is fooo, bar is barr
}, 'foo', 'barr');

$o->onSomething(function($ev) {
    D($ev->result);
    // Foo is fooo, bar is barr
});</code></pre>
<blockquote>
<p>При этом когда результат уже установлен, производящее его замыкание не будет вызвано повторно.
Не нужно беспокоиться о повторном вызове еще до того как результат установлен, ожидающие замыкания будут вызваны правильно.</p>
</blockquote>
<h3 id="traits/event-handlers"><div class="in anchor">EventHandlers <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/EventHandlers.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait EventHandlers;</code></pre>
<p>Данная примесь реализует простой механизм PUB/SUB для объекта.</p>
<pre><code class="php">class MyClass {
    use \PHPDaemon\Traits\EventHandlers;
}
$o = new MyClass;

$o->on('smth', function($o, $foo, $bar) {
    D("Foo is $foo, bar is $bar");
});

$o->trigger('smth', 'foo', 'barr');
</code></pre>
<blockquote>
<p>Не забывайте о том, что при удалении такого объекта необходимо вызвать метод <code>cleanupEventHandlers()</code>, чтобы избежать утечек памяти.</p>
</blockquote>
<h3 id="traits/sessions"><div class="in anchor">Sessions <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Traits/Sessions.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Traits;
trait Sessions;</code></pre>
<p>Эта примесь реализует механизм сессий, именно реализует, а не является оберткой над <code>session_*</code> функциями.</p>
<p>Почему мы не можем использовать нативный механизм сессий PHP?</p>
<ul>
<li class="n"><strong>Проблема №1:</strong> В долго живущих процессах(обслуживающих больше одного клиента) суперглобальный массив <code>$_SESSION</code> не будет создаваться заново.  </li>
<li class="n"><strong>Проблема №2:</strong> Нативная реализация сессий является блокируюей, что расходится с идеологией PhpDaemon - обеспечить неблокирующий I/O.</li>
</ul>
<p>Как и нативная реализация, поведение сессий основывается на <code>php.ini</code>.</p>
<p>Текущая реализация поддерживает хранение сессий в файлах, <code>session.serialize_handler = php|php_binary</code>, lock <code>r+!</code> файлов - аналогичный нативному - для предотвращения race condition.</p>
<p>Вы можете безопасно использовать PhpDaemon c существующими сессиями, сериализация совместима с нативной
(См. <a target="_blank" class="tpl-outlink" href="http://php.net//manual/ru/function.session-encode.php">session_encode<i class="fa fa-external-link"></i></a>, <a target="_blank" class="tpl-outlink" href="http://php.net//manual/ru/function.session-decode.php">session_decode<i class="fa fa-external-link"></i></a>).</p>
<p>Пример использования:</p>
<pre><code class="php">$this->onSessionStart(function ($event) {
    if (!$event->getResult()) {
        //Session open failed
    }
    //Session open succeed
});</code></pre>
<blockquote>
<p>Данная примесь используется в <a target="_self" class="tpl-inlink" href="#HTTPRequest">HTTPRequest<i class="fa fa-caret-square-o-up"></i></a> и <a target="_self" class="tpl-inlink" href="#servers/websocket/route">Servers\WebSocket\Route<i class="fa fa-caret-square-o-up"></i></a></p>
</blockquote>
<h3 id="traits/dnode"><div class="in anchor">DNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/WebSocket/Traits/DNode.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h3>
<p><code class="code_highlight php">trait \PHPDaemon\WebSocket\Traits\DNode</code></p>
<p>Данная примесь применима в классах-наследниках  <a target="_self" class="tpl-inlink" href="#servers/websocket/route">Servers\WebSocket\Route<i class="fa fa-caret-square-o-up"></i></a></p>
<p>Примесь реализует серверную часть протокола <a target="_blank" class="tpl-outlink" href="https://github.com/substack/dnode">DNode<i class="fa fa-external-link"></i></a>, который служит для <a target="_blank" class="tpl-outlink" href="http://ru.wikipedia.org/wiki/Удалённый_вызов_процедур">Удалённого вызова процедур<i class="fa fa-external-link"></i></a> (RPC).</p>
<p>Для подключение примеси нужно внести <code class="code_highlight php">use \PHPDaemon\WebSocket\Traits\DNode</code> в определение своего класса-наследника <a target="_self" class="tpl-inlink" href="#servers/websocket/route">Servers\WebSocket\Route<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Затем необходимо определить методы, доступные клиенту. Фактически это делает метод <a target="_self" class="tpl-inlink" href="#traits/dnode/methods/defineLocalMethods">defineLocalMethods<i class="fa fa-caret-square-o-up"></i></a>, который должен вызываться в <a target="_self" class="tpl-inlink" href="#servers/websocket/route/methods/onHandshake">onHandshake<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Давайте, для примера, создадим метод <code>dummy</code> с аргументами <code class="code_highlight php clear">$foo</code>, <code class="code_highlight php clear">$bar</code> и <code class="code_highlight php clear">$callback</code>:</p>
<pre><code class="php">protected function dummyMethod($foo, $bar, $callback) {
    if (!static::ensureCallback($callback)) {
        /* $callback не содержит функцию обратного вызова */
        return;
    }
    $callback(md5($foo ^ $bar));
}</code></pre>
<p>При обращении <code class="code_highlight php">dummy('Hello', 'World', function(result) {...})</code> ответом будет вызов этой функции с аргументом <code>bd7815679056a50c3f545b159ce5e385</code> — результатом выполнения <code class="code_highlight php">md5('Hello' ^ 'World')</code></p>
<p>В качестве аргументов можно передавать передавать собственные функции обратного вызова, но учтите, что они удаляются  из памяти после вызова, если возвратное значение не является <code class="code_highlight php clear">true</code>. Таким образом, следует понимать ожидается ли повторный вызов, и в этом случае возвращать <code class="code_highlight php clear">true</code>. Это делается во избежание утечек памяти.</p>
<p>Для вызова удаленного метода по имени, используйте <a target="_self" class="tpl-inlink" href="#traits/dnode/methods/callRemote">callRemote<i class="fa fa-caret-square-o-up"></i></a>.</p>
<blockquote>
<p>Как вы могли заметить, пример <code>dummyMethod</code> использует вызов <code class="code_highlight php">static::ensureCallback($callback)</code>. Всегда нужно проверять переданный аргумент с помощью <a target="_self" class="tpl-inlink" href="#traits/dnode/methods/ensureCallback">ensureCallback<i class="fa fa-caret-square-o-up"></i></a> перед его исполнением. В противном случае, это обернётся серьёзной брешью безопасности.</p>
</blockquote>
<h4 id="traits/dnode/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#traits/dnode">DNode <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/WebSocket/Traits/DNode.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#traits">Примеси</a></span></div>

</h4>
<ul>
<li id="traits/dnode/methods/onHandshake" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onHandshake">onHandshake</a> ( )</code></pre>
<ul>
<li class="n">Default onHandshake() method</li>
</ul>
</li>
<li id="traits/dnode/methods/callLocal" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">DNode</a> public <a href="#./callLocal">callLocal</a> ( )</code></pre>
<ul>
<li class="n">Вызывает локальный метод</li>
</ul>
</li>
<li id="traits/dnode/methods/extractCallbacks" class="method anchor">
<pre class="inline"><code class="php">void protected <a href="#./extractCallbacks">extractCallbacks</a> ( array &$args, array &$list, array &$path )</code></pre>
<ul>
<li class="n">Извлекает функции обратного вызова из массива аргуметнов</li>
<li class="n ti"><code class="code_highlight php clear">&$args</code> — Аргументы</li>
<li class="n"><code class="code_highlight php clear">&$list</code> — Выходной массив для свойства 'callbacks'</li>
<li class="n"><code class="code_highlight php clear">&$path</code> — Текущий путь</li>
</ul>
</li>
<li id="traits/dnode/methods/callRemote" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">DNode</a> public <a href="#./callRemote">callRemote</a> ( )</code></pre>
<ul>
<li class="n">Вызов удаленного метода</li>
</ul>
</li>
<li id="traits/dnode/methods/callRemoteArray" class="method anchor">
<pre class="inline"><code class="php"><a href="#../">DNode</a> public <a href="#./callRemoteArray">callRemoteArray</a> ( string $method, array $args )</code></pre>
<ul>
<li class="n">Вызов удаленного метода с передачей аргументов массивом</li>
<li class="n ti"><code class="code_highlight php clear">$method</code> — Название метода</li>
<li class="n"><code class="code_highlight php clear">$args</code> — Аргументы</li>
</ul>
</li>
<li id="traits/dnode/methods/methodsMethod" class="method anchor">
<pre class="inline"><code class="php">void protected <a href="#./methodsMethod">methodsMethod</a> ( array $methods )</code></pre>
<ul>
<li class="n">Обработчик метода <code>methods</code></li>
<li class="n ti"><code class="code_highlight php clear">$methods</code> — Ассоциативный массив методов</li>
</ul>
</li>
<li id="traits/dnode/methods/toJsonDebugResursive" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./toJsonDebugResursive">toJsonDebugResursive</a> ( mixed &$m )</code></pre>
<ul>
<li class="n">Обработчик рекурсии для метода <a target="_self" class="tpl-inlink" href="#../toJsonDebug">toJsonDebug<i class="fa fa-caret-square-o-up"></i></a></li>
<li class="n ti"><code class="code_highlight php clear">&$m</code> — Значение</li>
</ul>
</li>
<li id="traits/dnode/methods/toJsonDebug" class="method anchor">
<pre class="inline"><code class="php">string string public <a href="#./toJsonDebug">toJsonDebug</a> ( mixed $m )</code></pre>
<ul>
<li class="n">Возвращает JSON-представление массива в отладочных целях</li>
<li class="n ti"><code class="code_highlight php clear">$m</code> — Значение</li>
</ul>
</li>
<li id="traits/dnode/methods/onFinish" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onFinish">onFinish</a> ( )</code></pre>
<ul>
<li class="n">Вызывается когда сессия завершена</li>
</ul>
</li>
<li id="traits/dnode/methods/cleanup" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./cleanup">cleanup</a> ( )</code></pre>
<ul>
<li class="n">Очищает внутренние структуры</li>
</ul>
</li>
<li id="traits/dnode/methods/__call" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./__call">__call</a> ( string $m, array $args )</code></pre>
<ul>
<li class="n">Магический метод __call</li>
<li class="n ti"><code class="code_highlight php clear">$m</code> — Название метода</li>
<li class="n"><code class="code_highlight php clear">$args</code> — Аргументы</li>
</ul>
</li>
<li id="traits/dnode/methods/onPacket" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onPacket">onPacket</a> ( array $pct )</code></pre>
<ul>
<li class="n">Вызывается когда получен пакет</li>
<li class="n ti"><code class="code_highlight php clear">$pct</code> — Data</li>
</ul>
</li>
<li id="traits/dnode/methods/onFrame" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onFrame">onFrame</a> ( string $data, string $type )</code></pre>
<ul>
<li class="n">Вызывется когда получен фрейм</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — Содержимое фрейма</li>
<li class="n"><code class="code_highlight php clear">$type</code> — Тип фрейма</li>
</ul>
</li>
</ul>
<h2 id="network"><div class="in anchor">Сеть</div>

</h2>
<h3 id="network/pool"><div class="in anchor">Пул <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Pool.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class Pool extends <a href="#structures/object-storage">ObjectStorage</a>;</code></pre>
<p>Хранит в себе активные объекты <a target="_self" class="tpl-inlink" href="#network/connection">Соединение<i class="fa fa-caret-square-o-up"></i></a> и <a target="_self" class="tpl-inlink" href="#network/boundsocket">ОткрытыйСокет<i class="fa fa-caret-square-o-up"></i></a>.</p>
<p>Пул (клиент или сервер) можно инстанцировать из пользовательского приложении, например:</p>
<pre><code class="php">$this->httpclient = \PHPDaemon\Clients\HTTP\Pool::getInstance();</code></pre>
<p>или</p>
<pre><code class="php">/* ... */
$this->pool = \PHPDaemon\Servers\FlashPolicy\Pool::getInstance([
    'listen' => 'tcp://0.0.0.0:843'
]);
$this->pool->onReady();
/* ... */</code></pre>
<p>Но не забывайте отправлять ему onReady(), onShutdown() и onConfigUpdated() события.</p>
<p>В большинстве случаев сервер запускается одноименнным приложением Pool.</p>
<pre><code class="ruby"># контекст для ssl соединения (опционально)
TransportContext:myContext {
    ssl;
    certFile "/path/to/cert.pem";
    pkFile "/path/to/privkey.pem";
    passphrase "";
    verifyPeer true;
    allowSelfSigned true;
}

# слушаем 80 и 443 порт
Pool:HTTPServer {
    listen "tcp://0.0.0.0:80", "tcp://0.0.0.0:443##myContext";
    port 80;
    privileged;
    maxconcurrency 1;
}</code></pre>
<h4 id="network/pool/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#network/pool">Пул <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">string public $connectionClass;</code></pre>
<p>Default connection class</p>
</li>
<li class="method">
<pre class="inline"><code class="php">string public $name;</code></pre>
<p>Name</p>
</li>
<li class="method">
<pre class="inline"><code class="php">\PHPDaemon\Config\Section public $config;</code></pre>
<p>Configuration</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxConcurrency = 0;</code></pre>
<p>Max concurrency</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxAllowedPacket = 0;</code></pre>
<p>Max allowed packet</p>
</li>
<li class="method">
<pre class="inline"><code class="php">object public $appInstance;</code></pre>
<p>Application instance object</p>
</li>
</ul>
<h4 id="network/pool/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#network/pool">Пул <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Pool.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li id="network/pool/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./__construct">__construct</a> ( array $config = [], boolean $init = true )</code></pre>
<ul>
<li class="n">Constructor</li>
<li class="n ti"><code class="code_highlight php clear">$config</code> — Config variables</li>
<li class="n"><code class="code_highlight php clear">$init</code> — @TODO</li>
</ul>
</li>
<li id="network/pool/methods/onReady" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./onReady">onReady</a> ( )</code></pre>
<ul>
<li class="n">Called when the worker is ready to go</li>
</ul>
</li>
<li id="network/pool/methods/onConfigUpdated" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./onConfigUpdated">onConfigUpdated</a> ( )</code></pre>
<ul>
<li class="n">Called when worker is going to update configuration</li>
</ul>
</li>
<li id="network/pool/methods/getInstance" class="method anchor">
<pre class="inline"><code class="php">public static <a href="#./getInstance">getInstance</a> ( string $arg = '', boolean $spawn = true )</code></pre>
<ul>
<li class="n">Returns instance object</li>
<li class="n ti"><code class="code_highlight php clear">$arg</code> — name / array config / ConfigSection</li>
<li class="n"><code class="code_highlight php clear">$spawn</code> — Spawn? Default is true</li>
</ul>
</li>
<li id="network/pool/methods/setConnectionClass" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./setConnectionClass">setConnectionClass</a> ( string $class )</code></pre>
<ul>
<li class="n">Sets default connection class</li>
<li class="n ti"><code class="code_highlight php clear">$class</code> — String name</li>
</ul>
</li>
<li id="network/pool/methods/enable" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./enable">enable</a> ( )</code></pre>
<ul>
<li class="n">Enable socket events</li>
</ul>
</li>
<li id="network/pool/methods/disable" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./disable">disable</a> ( )</code></pre>
<ul>
<li class="n">Disable all events of sockets</li>
</ul>
</li>
<li id="network/pool/methods/onShutdown" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./onShutdown">onShutdown</a> ( boolean $graceful = false )</code></pre>
<ul>
<li class="n">Called when application instance is going to shutdown</li>
<li class="n ti"><code class="code_highlight php clear">$graceful</code> — graceful</li>
</ul>
</li>
<li id="network/pool/methods/finish" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./finish">finish</a> ( boolean $graceful = false )</code></pre>
<ul>
<li class="n">Finishes ConnectionPool</li>
<li class="n ti"><code class="code_highlight php clear">$graceful</code> — graceful</li>
</ul>
</li>
<li id="network/pool/methods/attach" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./attach">attach</a> ( <a href="#../../connection">Connection</a> $conn, $inf = null )</code></pre>
<ul>
<li class="n">Attach Connection</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
<li class="n"><code class="code_highlight php clear">$inf</code> — Info</li>
</ul>
</li>
<li id="network/pool/methods/detach" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./detach">detach</a> ( <a href="#../../connection">Connection</a> $conn )</code></pre>
<ul>
<li class="n">Detach Connection</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
</ul>
</li>
<li id="network/pool/methods/connect" class="method anchor">
<pre class="inline"><code class="php">public <a href="#./connect">connect</a> ( string $url, callable $cb, string $class = null )</code></pre>
<ul>
<li class="n">Establish a connection with remote peer</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — URL</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Optional. Callback</li>
<li class="n"><code class="code_highlight php clear">$class</code> — Optional. Connection class name</li>
</ul>
</li>
</ul>
<h3 id="network/client"><div class="in anchor">Client <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Client.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class Client extends <a href="#../pool">Pool</a>;</code></pre>
<p>@TODO</p>
<h4 id="network/client/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#network/client">Client <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Client.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li id="network/client/methods/addServer" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./addServer">addServer</a> ( string $url, integer $weight = NULL )</code></pre>
<ul>
<li class="n">Adds server</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — Server URL</li>
<li class="n"><code class="code_highlight php clear">$weight</code> — Weight</li>
</ul>
</li>
<li id="network/client/methods/getConnection" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./getConnection">getConnection</a> ( string $url = null, callable $cb = null, integer $pri = 0 )</code></pre>
<ul>
<li class="n">Returns available connection from the pool</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — Address</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — onConnected</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — Optional. Priority.</li>
</ul>
</li>
<li id="network/client/methods/detach" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./detach">detach</a> ( <a href="#../../connection">Connection</a> $conn )</code></pre>
<ul>
<li class="n">Detach Connection</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
</ul>
</li>
<li id="network/client/methods/markConnFree" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./markConnFree">markConnFree</a> ( <a href="#../../clientconnection">ClientConnection</a> $conn, string $url )</code></pre>
<ul>
<li class="n">Mark connection as free</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
<li class="n"><code class="code_highlight php clear">$url</code> — URL</li>
</ul>
</li>
<li id="network/client/methods/markConnBusy" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./markConnBusy">markConnBusy</a> ( <a href="#../../clientconnection">ClientConnection</a> $conn, string $url )</code></pre>
<ul>
<li class="n">Mark connection as busy</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
<li class="n"><code class="code_highlight php clear">$url</code> — URL</li>
</ul>
</li>
<li id="network/client/methods/detachConnFromUrl" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./detachConnFromUrl">detachConnFromUrl</a> ( <a href="#../../clientconnection">ClientConnection</a> $conn, string $url )</code></pre>
<ul>
<li class="n">Detaches connection from URL</li>
<li class="n ti"><code class="code_highlight php clear">$conn</code> — Connection</li>
<li class="n"><code class="code_highlight php clear">$url</code> — URL</li>
</ul>
</li>
<li id="network/client/methods/touchPending" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./touchPending">touchPending</a> ( string $url )</code></pre>
<ul>
<li class="n">Touch pending "requests for connection"</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — URL</li>
</ul>
</li>
<li id="network/client/methods/getConnectionByKey" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./getConnectionByKey">getConnectionByKey</a> ( string $key, callable $cb = null )</code></pre>
<ul>
<li class="n">Returns available connection from the pool by key</li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — Key</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
</li>
<li id="network/client/methods/getConnectionRR" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./getConnectionRR">getConnectionRR</a> ( callable $cb = null )</code></pre>
<ul>
<li class="n">Returns available connection from the pool</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
</li>
<li id="network/client/methods/requestByServer" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./requestByServer">requestByServer</a> ( string $server, string $data, callable $onResponse = null )</code></pre>
<ul>
<li class="n">Sends a request to arbitrary server</li>
<li class="n ti"><code class="code_highlight php clear">$server</code> — Server</li>
<li class="n"><code class="code_highlight php clear">$data</code> — Request</li>
<li class="n"><code class="code_highlight php clear">$onResponse</code> — Callback called when the request complete</li>
</ul>
</li>
<li id="network/client/methods/requestByKey" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./requestByKey">requestByKey</a> ( string $key, string $data, callable $onResponse = null )</code></pre>
<ul>
<li class="n">Sends a request to server according to the key</li>
<li class="n ti"><code class="code_highlight php clear">$key</code> — Key</li>
<li class="n"><code class="code_highlight php clear">$data</code> — Request</li>
<li class="n"><code class="code_highlight php clear">$onResponse</code> — Callback called when the request complete</li>
</ul>
</li>
<li id="network/client/methods/onShutdown" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./onShutdown">onShutdown</a> ( boolean $graceful = false )</code></pre>
<ul>
<li class="n">Called when application instance is going to shutdown</li>
<li class="n ti"><code class="code_highlight php clear">$graceful</code> — @TODO</li>
</ul>
</li>
</ul>
<h3 id="network/clientconnection"><div class="in anchor">ClientConnection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/ClientConnection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
class ClientConnection extends <a href="#../connection">Connection</a>;</code></pre>
<p>@TODO</p>
<h4 id="network/clientconnection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#network/clientconnection">ClientConnection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/ClientConnection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li id="network/clientconnection/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( resource $fd, object $pool = null )</code></pre>
<ul>
<li class="n">Constructor</li>
<li class="n ti"><code class="code_highlight php clear">$fd</code> — File descriptor</li>
<li class="n"><code class="code_highlight php clear">$pool</code> — ConnectionPool</li>
</ul>
</li>
<li id="network/clientconnection/methods/isBusy" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isBusy">isBusy</a> ( )</code></pre>
<ul>
<li class="n">Busy?</li>
</ul>
</li>
<li id="network/clientconnection/methods/onResponse" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onResponse">onResponse</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Push callback to onReponse stack</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — callable</li>
</ul>
</li>
<li id="network/clientconnection/methods/onReady" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onReady">onReady</a> ( )</code></pre>
<ul>
<li class="n">Called when the connection is handshaked (at low-level), and peer is ready to recv. data</li>
</ul>
</li>
<li id="network/clientconnection/methods/setFree" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setFree">setFree</a> ( boolean $free = true )</code></pre>
<ul>
<li class="n">Set connection free/busy</li>
<li class="n ti"><code class="code_highlight php clear">$free</code> — Free?</li>
</ul>
</li>
<li id="network/clientconnection/methods/release" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./release">release</a> ( )</code></pre>
<ul>
<li class="n">Set connection free</li>
</ul>
</li>
<li id="network/clientconnection/methods/checkFree" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./checkFree">checkFree</a> ( )</code></pre>
<ul>
<li class="n">Set connection free/busy according to onResponse emptiness and ->finished</li>
</ul>
</li>
<li id="network/clientconnection/methods/getQueueLength" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./getQueueLength">getQueueLength</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="network/clientconnection/methods/isQueueEmpty" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isQueueEmpty">isQueueEmpty</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="network/clientconnection/methods/onFinish" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onFinish">onFinish</a> ( )</code></pre>
<ul>
<li class="n">Called when connection finishes</li>
</ul>
</li>
</ul>
<h3 id="network/connection"><div class="in anchor">Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Connection.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class Connection extends <a href="#../iostream">IOStream</a>;</code></pre>
<p>@TODO</p>
<h4 id="network/connection/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#network/connection">Connection <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Connection.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li id="network/connection/methods/isConnected" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isConnected">isConnected</a> ( )</code></pre>
<ul>
<li class="n">Connected?</li>
</ul>
</li>
<li id="network/connection/methods/setDgram" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setDgram">setDgram</a> ( boolean $bool )</code></pre>
<ul>
<li class="n">Sets DGRAM mode</li>
<li class="n ti"><code class="code_highlight php clear">$bool</code> — @TODO</li>
</ul>
</li>
<li id="network/connection/methods/setPeername" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setPeername">setPeername</a> ( string $host, integer $port )</code></pre>
<ul>
<li class="n">Sets peer name</li>
<li class="n ti"><code class="code_highlight php clear">$host</code> — Hostname</li>
<li class="n"><code class="code_highlight php clear">$port</code> — Port</li>
</ul>
</li>
<li id="network/connection/methods/__get" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./__get">__get</a> ( string $name )</code></pre>
<ul>
<li class="n">Getter</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — Name</li>
</ul>
</li>
<li id="network/connection/methods/getSocketName" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./getSocketName">getSocketName</a> ( string &$addr, string &$port )</code></pre>
<ul>
<li class="n">Get socket name</li>
<li class="n ti"><code class="code_highlight php clear">&$addr</code> — Addr</li>
<li class="n"><code class="code_highlight php clear">&$port</code> — Port</li>
</ul>
</li>
<li id="network/connection/methods/setParentSocket" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setParentSocket">setParentSocket</a> ( \PHPDaemon\BoundSocket\Generic $sock )</code></pre>
<ul>
<li class="n">Sets parent socket</li>
</ul>
</li>
<li id="network/connection/methods/onUdpPacket" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onUdpPacket">onUdpPacket</a> ( @TODO $pct )</code></pre>
<ul>
<li class="n">Called when new UDP packet received</li>
<li class="n ti"><code class="code_highlight php clear">$pct</code> — @TODO</li>
</ul>
</li>
<li id="network/connection/methods/onReady" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onReady">onReady</a> ( )</code></pre>
<ul>
<li class="n">Called when the connection is handshaked (at low-level), and peer is ready to recv. data</li>
</ul>
</li>
<li id="network/connection/methods/onInheritanceFromRequest" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onInheritanceFromRequest">onInheritanceFromRequest</a> ( object $req )</code></pre>
<ul>
<li class="n">Called if we inherit connection from request</li>
<li class="n ti"><code class="code_highlight php clear">$req</code> — Parent Request</li>
</ul>
</li>
<li id="network/connection/methods/onFailure" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onFailure">onFailure</a> ( )</code></pre>
<ul>
<li class="n">Called when the connection failed to be established</li>
</ul>
</li>
<li id="network/connection/methods/onFailureEv" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onFailureEv">onFailureEv</a> ( \EventBufferEvent $bev = null )</code></pre>
<ul>
<li class="n">Called when the connection failed</li>
<li class="n ti"><code class="code_highlight php clear">$bev</code> — @TODO</li>
</ul>
</li>
<li id="network/connection/methods/__destruct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__destruct">__destruct</a> ( )</code></pre>
<ul>
<li class="n">Destructor</li>
</ul>
</li>
<li id="network/connection/methods/write" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./write">write</a> ( string $data )</code></pre>
<ul>
<li class="n">Send data to the connection. Note that it just writes to buffer that flushes at every baseloop</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — Data to send</li>
</ul>
</li>
<li id="network/connection/methods/onConnected" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onConnected">onConnected</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Executes the given callback when/if the connection is handshaked</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — callable</li>
</ul>
</li>
<li id="network/connection/methods/getUrl" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getUrl">getUrl</a> ( )</code></pre>
<ul>
<li class="n">Get URL</li>
</ul>
</li>
<li id="network/connection/methods/getHost" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getHost">getHost</a> ( )</code></pre>
<ul>
<li class="n">Get host</li>
</ul>
</li>
<li id="network/connection/methods/getPort" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./getPort">getPort</a> ( )</code></pre>
<ul>
<li class="n">Get port</li>
</ul>
</li>
<li id="network/connection/methods/connect" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./connect">connect</a> ( string $url, callable $cb = null )</code></pre>
<ul>
<li class="n">Connects to URL</li>
<li class="n ti"><code class="code_highlight php clear">$url</code> — URL</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
</li>
<li id="network/connection/methods/connectUnix" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./connectUnix">connectUnix</a> ( string $path )</code></pre>
<ul>
<li class="n">Establish UNIX socket connection</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — Path</li>
</ul>
</li>
<li id="network/connection/methods/connectRaw" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./connectRaw">connectRaw</a> ( string $host )</code></pre>
<ul>
<li class="n">Establish raw socket connection</li>
<li class="n ti"><code class="code_highlight php clear">$host</code> — Host</li>
</ul>
</li>
<li id="network/connection/methods/connectUdp" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./connectUdp">connectUdp</a> ( string $host, integer $port )</code></pre>
<ul>
<li class="n">Establish UDP connection</li>
<li class="n ti"><code class="code_highlight php clear">$host</code> — Hostname</li>
<li class="n"><code class="code_highlight php clear">$port</code> — Port</li>
</ul>
</li>
<li id="network/connection/methods/connectTcp" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./connectTcp">connectTcp</a> ( string $host, integer $port )</code></pre>
<ul>
<li class="n">Establish TCP connection</li>
<li class="n ti"><code class="code_highlight php clear">$host</code> — Hostname</li>
<li class="n"><code class="code_highlight php clear">$port</code> — Port</li>
</ul>
</li>
<li id="network/connection/methods/setKeepalive" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setKeepalive">setKeepalive</a> ( boolean $bool )</code></pre>
<ul>
<li class="n">Set keepalive</li>
<li class="n ti"><code class="code_highlight php clear">$bool</code> — @TODO</li>
</ul>
</li>
<li id="network/connection/methods/close" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./close">close</a> ( )</code></pre>
<ul>
<li class="n">Close the connection</li>
</ul>
</li>
<li id="network/connection/methods/setTimeouts" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setTimeouts">setTimeouts</a> ( integer $read, integer $write )</code></pre>
<ul>
<li class="n">Set timeouts</li>
<li class="n ti"><code class="code_highlight php clear">$read</code> — Read timeout in seconds</li>
<li class="n"><code class="code_highlight php clear">$write</code> — Write timeout in seconds</li>
</ul>
</li>
<li id="network/connection/methods/setOption" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setOption">setOption</a> ( integer $level, integer $optname, mixed $val )</code></pre>
<ul>
<li class="n">Set socket option</li>
<li class="n ti"><code class="code_highlight php clear">$level</code> — Level</li>
<li class="n"><code class="code_highlight php clear">$optname</code> — Option</li>
<li class="n"><code class="code_highlight php clear">$val</code> — Value</li>
</ul>
</li>
<li id="network/connection/methods/onFinish" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onFinish">onFinish</a> ( )</code></pre>
<ul>
<li class="n">Called when connection finishes</li>
</ul>
</li>
</ul>
<h3 id="network/iostream"><div class="in anchor">IOStream <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/IOStream.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class IOStream;</code></pre>
<p>@TODO</p>
<h4 id="network/iostream/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#network/iostream">IOStream <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/IOStream.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">ConnectionPool public $pool;</code></pre>
<p>Associated pool</p>
<ul>
<li class="method fake">&nbsp;</li>
</ul>
</li>
</ul>
<h4 id="network/iostream/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#network/iostream">IOStream <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/IOStream.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li id="network/iostream/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( resource $fd = null, object $pool = null )</code></pre>
<ul>
<li class="n">IOStream constructor</li>
<li class="n ti"><code class="code_highlight php clear">$fd</code> — File descriptor. Optional.</li>
<li class="n"><code class="code_highlight php clear">$pool</code> — Pool. Optional.</li>
</ul>
</li>
<li id="network/iostream/methods/__get" class="method anchor">
<pre class="inline"><code class="php">mixed public <a href="#./__get">__get</a> ( string $name )</code></pre>
<ul>
<li class="n">Getter</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — Name</li>
</ul>
</li>
<li id="network/iostream/methods/isFreed" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isFreed">isFreed</a> ( )</code></pre>
<ul>
<li class="n">Freed?</li>
</ul>
</li>
<li id="network/iostream/methods/isFinished" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isFinished">isFinished</a> ( )</code></pre>
<ul>
<li class="n">Finished?</li>
</ul>
</li>
<li id="network/iostream/methods/getBev" class="method anchor">
<pre class="inline"><code class="php">\EventBufferEvent public <a href="#./getBev">getBev</a> ( )</code></pre>
<ul>
<li class="n">Get EventBufferEvent</li>
</ul>
</li>
<li id="network/iostream/methods/getFd" class="method anchor">
<pre class="inline"><code class="php">resource public <a href="#./getFd">getFd</a> ( )</code></pre>
<ul>
<li class="n">Get file descriptor</li>
</ul>
</li>
<li id="network/iostream/methods/setContext" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setContext">setContext</a> ( object $ctx, integer $mode )</code></pre>
<ul>
<li class="n">Sets context mode</li>
<li class="n ti"><code class="code_highlight php clear">$ctx</code> — Context</li>
<li class="n"><code class="code_highlight php clear">$mode</code> — Mode</li>
</ul>
</li>
<li id="network/iostream/methods/setFd" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setFd">setFd</a> ( resource $fd, \EventBufferEvent $bev = null )</code></pre>
<ul>
<li class="n">Sets fd</li>
<li class="n ti"><code class="code_highlight php clear">$fd</code> — File descriptor</li>
<li class="n"><code class="code_highlight php clear">$bev</code> — EventBufferEvent</li>
</ul>
</li>
<li id="network/iostream/methods/setTimeout" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setTimeout">setTimeout</a> ( integer $rw )</code></pre>
<ul>
<li class="n">Set timeout</li>
<li class="n ti"><code class="code_highlight php clear">$rw</code> — Timeout</li>
</ul>
</li>
<li id="network/iostream/methods/setTimeouts" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setTimeouts">setTimeouts</a> ( integer $read, integer $write )</code></pre>
<ul>
<li class="n">Set timeouts</li>
<li class="n ti"><code class="code_highlight php clear">$read</code> — Read timeout in seconds</li>
<li class="n"><code class="code_highlight php clear">$write</code> — Write timeout in seconds</li>
</ul>
</li>
<li id="network/iostream/methods/setPriority" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setPriority">setPriority</a> ( integer $p )</code></pre>
<ul>
<li class="n">Sets priority</li>
<li class="n ti"><code class="code_highlight php clear">$p</code> — Priority</li>
</ul>
</li>
<li id="network/iostream/methods/setWatermark" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setWatermark">setWatermark</a> ( integer $low = null, integer $high = null )</code></pre>
<ul>
<li class="n">Sets watermark</li>
<li class="n ti"><code class="code_highlight php clear">$low</code> — Low</li>
<li class="n"><code class="code_highlight php clear">$high</code> — High</li>
</ul>
</li>
<li id="network/iostream/methods/readLine" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./readLine">readLine</a> ( integer $eol = null )</code></pre>
<ul>
<li class="n">Reads line from buffer</li>
<li class="n ti"><code class="code_highlight php clear">$eol</code> — @TODO</li>
</ul>
</li>
<li id="network/iostream/methods/drain" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./drain">drain</a> ( integer $n )</code></pre>
<ul>
<li class="n">Drains buffer</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Numbers of bytes to drain</li>
</ul>
</li>
<li id="network/iostream/methods/drainIfMatch" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./drainIfMatch">drainIfMatch</a> ( string $str )</code></pre>
<ul>
<li class="n">Drains buffer it matches the string</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Data</li>
</ul>
</li>
<li id="network/iostream/methods/lookExact" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./lookExact">lookExact</a> ( integer $n, integer $o = 0 )</code></pre>
<ul>
<li class="n">Reads exact $n bytes of buffer without draining</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
<li class="n"><code class="code_highlight php clear">$o</code> — Offset</li>
</ul>
</li>
<li id="network/iostream/methods/prependInput" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./prependInput">prependInput</a> ( string $str )</code></pre>
<ul>
<li class="n">Prepends data to input buffer</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Data</li>
</ul>
</li>
<li id="network/iostream/methods/prependOutput" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./prependOutput">prependOutput</a> ( string $str )</code></pre>
<ul>
<li class="n">Prepends data to output buffer</li>
<li class="n ti"><code class="code_highlight php clear">$str</code> — Data</li>
</ul>
</li>
<li id="network/iostream/methods/look" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./look">look</a> ( integer $n, integer $o = 0 )</code></pre>
<ul>
<li class="n">Read from buffer without draining</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
<li class="n"><code class="code_highlight php clear">$o</code> — Offset</li>
</ul>
</li>
<li id="network/iostream/methods/substr" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./substr">substr</a> ( integer $o, integer $n = -1 )</code></pre>
<ul>
<li class="n">Read from buffer without draining</li>
<li class="n ti"><code class="code_highlight php clear">$o</code> — Offset</li>
<li class="n"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
</ul>
</li>
<li id="network/iostream/methods/search" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./search">search</a> ( string $what, integer $start = 0, integer $end = -1 )</code></pre>
<ul>
<li class="n">Searches first occurence of the string in input buffer</li>
<li class="n ti"><code class="code_highlight php clear">$what</code> — Needle</li>
<li class="n"><code class="code_highlight php clear">$start</code> — Offset start</li>
<li class="n"><code class="code_highlight php clear">$end</code> — Offset end</li>
</ul>
</li>
<li id="network/iostream/methods/readExact" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./readExact">readExact</a> ( integer $n )</code></pre>
<ul>
<li class="n">Reads exact $n bytes from buffer</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
</ul>
</li>
<li id="network/iostream/methods/getInputLength" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./getInputLength">getInputLength</a> ( )</code></pre>
<ul>
<li class="n">Returns length of input buffer</li>
</ul>
</li>
<li id="network/iostream/methods/gracefulShutdown" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./gracefulShutdown">gracefulShutdown</a> ( )</code></pre>
<ul>
<li class="n">Called when the worker is going to shutdown</li>
</ul>
</li>
<li id="network/iostream/methods/freezeInput" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./freezeInput">freezeInput</a> ( boolean $at_front = false )</code></pre>
<ul>
<li class="n">Freeze input</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
</li>
<li id="network/iostream/methods/unfreezeInput" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./unfreezeInput">unfreezeInput</a> ( boolean $at_front = false )</code></pre>
<ul>
<li class="n">Unfreeze input</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
</li>
<li id="network/iostream/methods/freezeOutput" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./freezeOutput">freezeOutput</a> ( boolean $at_front = true )</code></pre>
<ul>
<li class="n">Freeze output</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
</li>
<li id="network/iostream/methods/unfreezeOutput" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./unfreezeOutput">unfreezeOutput</a> ( boolean $at_front = true )</code></pre>
<ul>
<li class="n">Unfreeze output</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
</li>
<li id="network/iostream/methods/onWrite" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onWrite">onWrite</a> ( )</code></pre>
<ul>
<li class="n">Called when the connection is ready to accept new data</li>
</ul>
</li>
<li id="network/iostream/methods/write" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./write">write</a> ( string $data )</code></pre>
<ul>
<li class="n">Send data to the connection. Note that it just writes to buffer that flushes at every baseloop</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — Data to send</li>
</ul>
</li>
<li id="network/iostream/methods/writeln" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./writeln">writeln</a> ( string $data )</code></pre>
<ul>
<li class="n">Send data and appending \n to connection. Note that it just writes to buffer flushed at every baseloop</li>
<li class="n ti"><code class="code_highlight php clear">$data</code> — Data to send</li>
</ul>
</li>
<li id="network/iostream/methods/finish" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./finish">finish</a> ( )</code></pre>
<ul>
<li class="n">Finish the session. You should not worry about buffers, they are going to be flushed properly.</li>
</ul>
</li>
<li id="network/iostream/methods/close" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./close">close</a> ( )</code></pre>
<ul>
<li class="n">Close the connection</li>
</ul>
</li>
<li id="network/iostream/methods/unsetFd" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./unsetFd">unsetFd</a> ( )</code></pre>
<ul>
<li class="n">Unsets pointers of associated EventBufferEvent and File descriptr</li>
</ul>
</li>
<li id="network/iostream/methods/onReadEv" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onReadEv">onReadEv</a> ( \EventBufferEvent $bev )</code></pre>
<ul>
<li class="n">Called when the connection has got new data</li>
<li class="n ti"><code class="code_highlight php clear">$bev</code> — Bufferevent</li>
</ul>
</li>
<li id="network/iostream/methods/onWriteOnce" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onWriteOnce">onWriteOnce</a> ( callable $cb )</code></pre>
<ul>
<li class="n">Push callback which will be called only once, when writing is available next time</li>
<li class="n ti"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
</li>
<li id="network/iostream/methods/onWriteEv" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onWriteEv">onWriteEv</a> ( \EventBufferEvent $bev )</code></pre>
<ul>
<li class="n">Called when the connection is ready to accept new data</li>
<li class="n ti"><code class="code_highlight php clear">$bev</code> — Bufferedevent</li>
</ul>
</li>
<li id="network/iostream/methods/onStateEv" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onStateEv">onStateEv</a> ( \EventBufferEvent $bev, integer $events )</code></pre>
<ul>
<li class="n">Called when the connection state changed</li>
<li class="n ti"><code class="code_highlight php clear">$bev</code> — Bufferevent</li>
<li class="n"><code class="code_highlight php clear">$events</code> — Events</li>
</ul>
</li>
<li id="network/iostream/methods/moveToBuffer" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./moveToBuffer">moveToBuffer</a> ( \EventBuffer $dest, integer $n )</code></pre>
<ul>
<li class="n">Moves arbitrary number of bytes from input buffer to given buffer</li>
<li class="n ti"><code class="code_highlight php clear">$dest</code> — Destination nuffer</li>
<li class="n"><code class="code_highlight php clear">$n</code> — Max. number of bytes to move</li>
</ul>
</li>
<li id="network/iostream/methods/writeFromBuffer" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./writeFromBuffer">writeFromBuffer</a> ( \EventBuffer $src, integer $n )</code></pre>
<ul>
<li class="n">Moves arbitrary number of bytes from given buffer to output buffer</li>
<li class="n ti"><code class="code_highlight php clear">$src</code> — Source buffer</li>
<li class="n"><code class="code_highlight php clear">$n</code> — Max. number of bytes to move</li>
</ul>
</li>
<li id="network/iostream/methods/read" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./read">read</a> ( integer $n )</code></pre>
<ul>
<li class="n">Read data from the connection's buffer</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Max. number of bytes to read</li>
</ul>
</li>
<li id="network/iostream/methods/readUnlimited" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./readUnlimited">readUnlimited</a> ( )</code></pre>
<ul>
<li class="n">Reads all data from the connection's buffer</li>
</ul>
</li>
</ul>
<h3 id="network/server"><div class="in anchor">Server <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Server.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\Network;
abstract class Server extends <a href="#../pool">Pool</a>;</code></pre>
<p>@TODO</p>
<h4 id="network/server/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#network/server">Server <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Server.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $allowedClients = null;</code></pre>
<p>Allowed clients</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $maxAllowedPacket;</code></pre>
<p>@TODO</p>
</li>
</ul>
<h4 id="network/server/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#network/server">Server <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/Network/Server.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#network">Сеть</a></span></div>

</h4>
<ul>
<li id="network/server/methods/__construct" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./__construct">__construct</a> ( array $config = [], boolean $init = true )</code></pre>
<ul>
<li class="n">Constructor</li>
<li class="n ti"><code class="code_highlight php clear">$config</code> — Config variables</li>
<li class="n"><code class="code_highlight php clear">$init</code> — @TODO</li>
</ul>
</li>
<li id="network/server/methods/finish" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./finish">finish</a> ( boolean $graceful = false )</code></pre>
<ul>
<li class="n">Finishes ConnectionPool</li>
<li class="n ti"><code class="code_highlight php clear">$graceful</code> — @TODO</li>
</ul>
</li>
<li id="network/server/methods/bindSockets" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./bindSockets">bindSockets</a> ( mixed $addrs = [], integer $max = 0 )</code></pre>
<ul>
<li class="n">Bind given sockets</li>
<li class="n ti"><code class="code_highlight php clear">$addrs</code> — Addresses to bind</li>
<li class="n"><code class="code_highlight php clear">$max</code> — Number of bound</li>
</ul>
</li>
<li id="network/server/methods/bindSocket" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./bindSocket">bindSocket</a> ( string $uri )</code></pre>
<ul>
<li class="n">Bind given socket</li>
<li class="n ti"><code class="code_highlight php clear">$uri</code> — Address to bind</li>
</ul>
</li>
<li id="network/server/methods/attachBound" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./attachBound">attachBound</a> ( \PHPDaemon\BoundSocket\Generic $bound, mixed $inf = null )</code></pre>
<ul>
<li class="n">Attach Generic</li>
<li class="n ti"><code class="code_highlight php clear">$bound</code> — Generic</li>
<li class="n"><code class="code_highlight php clear">$inf</code> — Info</li>
</ul>
</li>
<li id="network/server/methods/detachBound" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./detachBound">detachBound</a> ( \PHPDaemon\BoundSocket\Generic $bound )</code></pre>
<ul>
<li class="n">Detach Generic</li>
<li class="n ti"><code class="code_highlight php clear">$bound</code> — Generic</li>
</ul>
</li>
<li id="network/server/methods/closeBound" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./closeBound">closeBound</a> ( )</code></pre>
<ul>
<li class="n">Close each of binded sockets</li>
</ul>
</li>
<li id="network/server/methods/inheritFromRequest" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./inheritFromRequest">inheritFromRequest</a> ( object $req, object $oldConn )</code></pre>
<ul>
<li class="n">Called when a request to HTTP-server looks like another connection</li>
<li class="n ti"><code class="code_highlight php clear">$req</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$oldConn</code> — @TODO</li>
</ul>
</li>
</ul>
<h2 id="httprequest"><div class="in anchor">HTTPRequest</div>

</h2>
<h3 id="httprequest/generic"><div class="in anchor">Generic <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Generic.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\HTTPRequest;
abstract class Generic extends \PHPDaemon\Request\Generic;</code></pre>
<p>@TODO</p>
<h4 id="httprequest/generic/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#httprequest/generic">Generic <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Generic.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">boolean public $keepalive = false;</code></pre>
<p>@TODO</p>
</li>
<li class="method">
<pre class="inline"><code class="php">integer public $responseLength = 0;</code></pre>
<p>Current response length</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $hvaltr = ['; ' => '&', ';' => '&', ' ' => '%20'];</code></pre>
<p>Replacement pairs for processing some header values in parse_str()</p>
</li>
<li class="method">
<pre class="inline"><code class="php">array public static $htr = ['-' => '_'];</code></pre>
<p>State</p>
</li>
</ul>
<h4 id="httprequest/generic/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#httprequest/generic">Generic <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Generic.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<ul>
<li id="httprequest/generic/methods/firstDeferredEventUsed" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./firstDeferredEventUsed">firstDeferredEventUsed</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="httprequest/generic/methods/sendfile" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./sendfile">sendfile</a> ( string $path, callable $cb, integer $pri = EIO_PRI_DEFAULT )</code></pre>
<ul>
<li class="n">Output whole contents of file</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — Path</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Callback</li>
<li class="n"><code class="code_highlight php clear">$pri</code> — Priority</li>
</ul>
</li>
<li id="httprequest/generic/methods/checkIfReady" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./checkIfReady">checkIfReady</a> ( )</code></pre>
<ul>
<li class="n">Called to check if Request is ready</li>
</ul>
</li>
<li id="httprequest/generic/methods/getUploadMaxSize" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./getUploadMaxSize">getUploadMaxSize</a> ( )</code></pre>
<ul>
<li class="n">Upload maximum file size</li>
</ul>
</li>
<li id="httprequest/generic/methods/postPrepare" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./postPrepare">postPrepare</a> ( )</code></pre>
<ul>
<li class="n">Prepares the request body</li>
</ul>
</li>
<li id="httprequest/generic/methods/ensureSentHeaders" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./ensureSentHeaders">ensureSentHeaders</a> ( )</code></pre>
<ul>
<li class="n">Ensure that headers are sent</li>
</ul>
</li>
<li id="httprequest/generic/methods/out" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./out">out</a> ( string $s, boolean $flush = true )</code></pre>
<ul>
<li class="n">Output some data</li>
<li class="n ti"><code class="code_highlight php clear">$s</code> — String to out</li>
<li class="n"><code class="code_highlight php clear">$flush</code> — Flush</li>
</ul>
</li>
<li id="httprequest/generic/methods/onParsedParams" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onParsedParams">onParsedParams</a> ( )</code></pre>
<ul>
<li class="n">Called when request's headers parsed</li>
</ul>
</li>
<li id="httprequest/generic/methods/combinedOut" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./combinedOut">combinedOut</a> ( string $s )</code></pre>
<ul>
<li class="n">Outputs data with headers (split by \r\n\r\n)</li>
<li class="n ti"><code class="code_highlight php clear">$s</code> — String to out</li>
</ul>
</li>
<li id="httprequest/generic/methods/chunked" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./chunked">chunked</a> ( )</code></pre>
<ul>
<li class="n">Use chunked encoding</li>
</ul>
</li>
<li id="httprequest/generic/methods/onWakeup" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onWakeup">onWakeup</a> ( )</code></pre>
<ul>
<li class="n">Called when the request wakes up</li>
</ul>
</li>
<li id="httprequest/generic/methods/onSleep" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onSleep">onSleep</a> ( )</code></pre>
<ul>
<li class="n">Called when the request starts sleep</li>
</ul>
</li>
<li id="httprequest/generic/methods/status" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./status">status</a> ( integer $code = 200 )</code></pre>
<ul>
<li class="n">Send HTTP-status</li>
<li class="n ti"><code class="code_highlight php clear">$code</code> — Code</li>
</ul>
</li>
<li id="httprequest/generic/methods/headers_sent" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./headers_sent">headers_sent</a> ( string &$file, integer &$line )</code></pre>
<ul>
<li class="n">Checks if headers have been sent</li>
<li class="n ti"><code class="code_highlight php clear">&$file</code> — File name where output started in the file and line variables</li>
<li class="n"><code class="code_highlight php clear">&$line</code> — Line number where output started in the file and line variables</li>
</ul>
</li>
<li id="httprequest/generic/methods/headers_list" class="method anchor">
<pre class="inline"><code class="php">array public <a href="#./headers_list">headers_list</a> ( )</code></pre>
<ul>
<li class="n">Return current list of headers</li>
</ul>
</li>
<li id="httprequest/generic/methods/setcookie" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setcookie">setcookie</a> ( string $name, string $value = '', штеупук $maxage = 0, string $path = '', string $domain = '', boolean $secure = false, boolean $HTTPOnly = false )</code></pre>
<ul>
<li class="n">Set the cookie</li>
<li class="n ti"><code class="code_highlight php clear">$name</code> — Name of cookie</li>
<li class="n"><code class="code_highlight php clear">$value</code> — Value</li>
<li class="n"><code class="code_highlight php clear">$maxage</code> — Optional. Max-Age. Default is 0</li>
<li class="n"><code class="code_highlight php clear">$path</code> — Optional. Path. Default is empty string</li>
<li class="n"><code class="code_highlight php clear">$domain</code> — @TODO</li>
<li class="n"><code class="code_highlight php clear">$secure</code> — Optional. Secure. Default is false</li>
<li class="n"><code class="code_highlight php clear">$HTTPOnly</code> — Optional. HTTPOnly. Default is false</li>
</ul>
</li>
<li id="httprequest/generic/methods/header" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./header">header</a> ( string $s, boolean $replace = true, integer $code = false )</code></pre>
<ul>
<li class="n">Send the header</li>
<li class="n ti"><code class="code_highlight php clear">$s</code> — Header. Example: <code>Location: http://php.net/</code></li>
<li class="n"><code class="code_highlight php clear">$replace</code> — Optional. Replace?</li>
<li class="n"><code class="code_highlight php clear">$code</code> — Optional. HTTP response code</li>
</ul>
</li>
<li id="httprequest/generic/methods/removeHeader" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./removeHeader">removeHeader</a> ( string $s )</code></pre>
<ul>
<li class="n">Removes a header</li>
<li class="n ti"><code class="code_highlight php clear">$s</code> — Header name. Example: <code>Location</code></li>
</ul>
</li>
<li id="httprequest/generic/methods/parseSize" class="method anchor">
<pre class="inline"><code class="php">integer public static <a href="#./parseSize">parseSize</a> ( string $value )</code></pre>
<ul>
<li class="n">Converts human-readable representation of size to number of bytes</li>
<li class="n ti"><code class="code_highlight php clear">$value</code> — Data</li>
</ul>
</li>
<li id="httprequest/generic/methods/onUploadFileStart" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onUploadFileStart">onUploadFileStart</a> ( <a href="#../input">Input</a> $in )</code></pre>
<ul>
<li class="n">Called when file upload started</li>
<li class="n ti"><code class="code_highlight php clear">$in</code> — Input</li>
</ul>
</li>
<li id="httprequest/generic/methods/onUploadFileChunk" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./onUploadFileChunk">onUploadFileChunk</a> ( <a href="#../input">Input</a> $in, boolean $last = false )</code></pre>
<ul>
<li class="n">Called when chunk of incoming file has arrived</li>
<li class="n ti"><code class="code_highlight php clear">$in</code> — Input</li>
<li class="n"><code class="code_highlight php clear">$last</code> — Last?</li>
</ul>
</li>
<li id="httprequest/generic/methods/getUploadTempDir" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getUploadTempDir">getUploadTempDir</a> ( )</code></pre>
<ul>
<li class="n">@TODO</li>
</ul>
</li>
<li id="httprequest/generic/methods/isUploadedFile" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isUploadedFile">isUploadedFile</a> ( string $path )</code></pre>
<ul>
<li class="n">Tells whether the file was uploaded via HTTP POST</li>
<li class="n ti"><code class="code_highlight php clear">$path</code> — The filename being checked</li>
</ul>
</li>
<li id="httprequest/generic/methods/moveUploadedFile" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./moveUploadedFile">moveUploadedFile</a> ( string $filename, string $dest )</code></pre>
<ul>
<li class="n">Moves an uploaded file to a new location</li>
<li class="n ti"><code class="code_highlight php clear">$filename</code> — The filename of the uploaded file</li>
<li class="n"><code class="code_highlight php clear">$dest</code> — The destination of the moved file</li>
</ul>
</li>
<li id="httprequest/generic/methods/readBodyFile" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./readBodyFile">readBodyFile</a> ( )</code></pre>
<ul>
<li class="n">Read request body from the file given in REQUEST_BODY_FILE parameter</li>
</ul>
</li>
<li id="httprequest/generic/methods/parse_str" class="method anchor">
<pre class="inline"><code class="php">void public static <a href="#./parse_str">parse_str</a> ( string $s, array &$var, boolean $header = false )</code></pre>
<ul>
<li class="n">Replacement for default parse_str(), it supoorts UCS-2 like this: %uXXXX</li>
<li class="n ti"><code class="code_highlight php clear">$s</code> — String to parse</li>
<li class="n"><code class="code_highlight php clear">&$var</code> — Reference to the resulting array</li>
<li class="n"><code class="code_highlight php clear">$header</code> — Header-style string</li>
</ul>
</li>
</ul>
<h3 id="httprequest/input"><div class="in anchor">Input <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Input.php"><i class="fa fa-github"></i></a><span class="header-path"> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h3>
<pre><code class="php">namespace PHPDaemon\HTTPRequest;
class Input extends \EventBuffer;</code></pre>
<p>@TODO</p>
<h4 id="httprequest/input/properties"><div class="in anchor">Свойства<span class="header-path"> <i>&larr;</i> <a href="#httprequest/input">Input <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Input.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<ul>
<li class="method">
<pre class="inline"><code class="php">array public $curPart;</code></pre>
<p>Current Part</p>
<ul>
<li class="method fake">&nbsp;</li>
</ul>
</li>
</ul>
<h4 id="httprequest/input/methods"><div class="in anchor">Методы<span class="header-path"> <i>&larr;</i> <a href="#httprequest/input">Input <a target="_blank" class="tpl-git" href="https://github.com/kakserpom/phpdaemon/tree/master/PHPDaemon/HTTPRequest/Input.php"><i class="fa fa-github"></i></a></a> <i>&larr;</i> <a href="#httprequest">HTTPRequest</a></span></div>

</h4>
<ul>
<li id="httprequest/input/methods/setBoundary" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setBoundary">setBoundary</a> ( string $boundary )</code></pre>
<ul>
<li class="n">Set boundary</li>
<li class="n ti"><code class="code_highlight php clear">$boundary</code> — @TODO</li>
</ul>
</li>
<li id="httprequest/input/methods/freeze" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./freeze">freeze</a> ( boolean $at_front = false )</code></pre>
<ul>
<li class="n">Freeze input</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
</li>
<li id="httprequest/input/methods/unfreeze" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./unfreeze">unfreeze</a> ( boolean $at_front = false )</code></pre>
<ul>
<li class="n">Unfreeze input</li>
<li class="n ti"><code class="code_highlight php clear">$at_front</code> — At front. Default is true. If the front of a buffer is frozen, operations that drain data from the front of the buffer, or that prepend data to the buffer, will fail until it is unfrozen. If the back a buffer is frozen, operations that append data from the buffer will fail until it is unfrozen.</li>
</ul>
</li>
<li id="httprequest/input/methods/isFrozen" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isFrozen">isFrozen</a> ( )</code></pre>
<ul>
<li class="n">Is frozen?</li>
</ul>
</li>
<li id="httprequest/input/methods/isEof" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./isEof">isEof</a> ( )</code></pre>
<ul>
<li class="n">Is EOF?</li>
</ul>
</li>
<li id="httprequest/input/methods/setRequest" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./setRequest">setRequest</a> ( <a href="#../generic">Generic</a> $req )</code></pre>
<ul>
<li class="n">Set request</li>
<li class="n ti"><code class="code_highlight php clear">$req</code> — @TODO</li>
</ul>
</li>
<li id="httprequest/input/methods/sendEOF" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./sendEOF">sendEOF</a> ( )</code></pre>
<ul>
<li class="n">Send EOF</li>
</ul>
</li>
<li id="httprequest/input/methods/readFromBuffer" class="method anchor">
<pre class="inline"><code class="php">integer public <a href="#./readFromBuffer">readFromBuffer</a> ( \EventBuffer $buf )</code></pre>
<ul>
<li class="n">Moves $n bytes from input buffer to arbitrary buffer</li>
<li class="n ti"><code class="code_highlight php clear">$buf</code> — Source nuffer</li>
</ul>
</li>
<li id="httprequest/input/methods/readFromString" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./readFromString">readFromString</a> ( string $chunk, boolean $final = true )</code></pre>
<ul>
<li class="n">Append string to input buffer</li>
<li class="n ti"><code class="code_highlight php clear">$chunk</code> — Piece of request input</li>
<li class="n"><code class="code_highlight php clear">$final</code> — Final call is THIS SEQUENCE of calls (not mandatory final in request)?</li>
</ul>
</li>
<li id="httprequest/input/methods/look" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./look">look</a> ( integer $n, integer $o = 0 )</code></pre>
<ul>
<li class="n">Read from buffer without draining</li>
<li class="n ti"><code class="code_highlight php clear">$n</code> — Number of bytes to read</li>
<li class="n"><code class="code_highlight php clear">$o</code> — Offset</li>
</ul>
</li>
<li id="httprequest/input/methods/parseMultipart" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./parseMultipart">parseMultipart</a> ( )</code></pre>
<ul>
<li class="n">Parses multipart</li>
</ul>
</li>
<li id="httprequest/input/methods/getChunkString" class="method anchor">
<pre class="inline"><code class="php">string public <a href="#./getChunkString">getChunkString</a> ( )</code></pre>
<ul>
<li class="n">Get current upload chunk as string</li>
</ul>
</li>
<li id="httprequest/input/methods/writeChunkToFd" class="method anchor">
<pre class="inline"><code class="php">boolean public <a href="#./writeChunkToFd">writeChunkToFd</a> ( resource $fd, callable $cb = null )</code></pre>
<ul>
<li class="n">Write current upload chunk to file descriptor</li>
<li class="n ti"><code class="code_highlight php clear">$fd</code> — File destriptor</li>
<li class="n"><code class="code_highlight php clear">$cb</code> — Callback</li>
</ul>
</li>
<li id="httprequest/input/methods/log" class="method anchor">
<pre class="inline"><code class="php">void public <a href="#./log">log</a> ( string $msg )</code></pre>
<ul>
<li class="n">Log</li>
<li class="n ti"><code class="code_highlight php clear">$msg</code> — Message</li>
</ul>
</li>
</ul>
<h2 id="faq"><div class="in anchor">ЧаВО</div>

</h2>
<p><i class="fa fa-question-circle"></i> Как сделать событие, которое вызывается через заданный временной интервал?</p>
<p>См. <a target="_self" class="tpl-inlink" href="#lib/timer">Библиотеки/Timer<i class="fa fa-caret-square-o-up"></i></a></p>
<h2 id="publications"><div class="in anchor">Публикации</div>

</h2>
<ul>
<li><a href="http://habrahabr.ru/blogs/php/104811">phpDaemon и runkit: новый уровень</a> (23 сентября 2010)</li>
<li><a href="http://javascript.ru/blog/Ilya-Kantor/True-FastCGI-dlya-PHP-migraciya-testy">True FastCGI для PHP: миграция и тесты</a> (7 сентября 2010)</li>
<li><a href="http://habrahabr.ru/blogs/webdev/94921">WebSocket: будущее уже здесь!</a> (8 июня 2010)</li>
<li><a href="http://habrahabr.ru/blogs/php/91014">phpDaemon: хорошие новости</a> (24 мая 2010)</li>
<li><a href="http://habrahabr.ru/blogs/php/79377">phpDaemon: фреймворк асинхронных приложений</a> (11 января 2010)</li>
</ul>
<h2 id="contribute"><div class="in anchor">Внести свою лепту</div>

</h2>
<p>Если хотите помочь, то даже если располагаете ограниченным временем, не стесняйтесь!
Проекту пригодится любая помощь. </p>
<h3 id="contribute/this-doc"><div class="in anchor">Эта документация<span class="header-path"> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h3>
<p>Мы очень хотим свести количество недокументированного кода к минимуму, но нам не хватает рук.
Даже написав абзац текста, потратив десять минут, вы уже сделаете большое дело.</p>
<h4 id="contribute/this-doc/commiting"><div class="in anchor">Внесение изменений<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h4>
<blockquote>
<p>Старайтесь вносить изменения в на том языке, которым владеете лучше всего.
Если набрались смелости добавить новый язык, возьмите за основу наиболее близкий из присутствующих.</p>
</blockquote>
<p>Чтобы внести изменения в эту документацию, необходимо:</p>
<ol>
<li>Сделать Fork репозитория <a target="_blank" class="tpl-outlink" href="https://github.com/kakserpom/daemon.io">kakserpom/daemon.io<i class="fa fa-external-link"></i></a></li>
<li>Внести изменения в Markdown (.md) файлыв папке <code>./docs/<язык>/</code></li>
<li>Скомпилировать index.html, выполнив команду <code>./docs/build</code></li>
<li>Посмотреть как выглядят внесенные изменения в браузере</li>
<li>Послать Pull Request</li>
</ol>
<blockquote>
<p>Хотите видеть изменения в браузере, не запуская каждый раз команду?
Запустите <code>watch -n1 ./docs/build</code> — она будет выполняться раз в секунду</p>
</blockquote>
<h4 id="contribute/this-doc/markdown"><div class="in anchor">Формат документации<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h4>
<p>Мы используем <a target="_blank" class="tpl-outlink" href="http://ru.wikipedia.org/wiki/Markdown">Markdown<i class="fa fa-external-link"></i></a> (<a target="_blank" class="tpl-outlink" href="http://rukeba.com/by-the-way/markdown-sintaksis-po-russki/">о синтаксисе по-русски<i class="fa fa-external-link"></i></a>) с некоторыми дополнениями.</p>
<h5 id="contribute/this-doc/markdown/nesting"><div class="in anchor">Вложенность<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Для удобства работы документация разбита на множество мелких файлов.
Подключение файла осуществляется строкой иморта: <code>&lt;!-- import filepath.md --&gt;</code>.
Путь к подключаемому файлу указывается относительно текущего.</p>
<h5 id="contribute/this-doc/markdown/const"><div class="in anchor">Константы<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Константы используются для языковых настроек и короткой записи часто используемых шаблонов.
Записываются в виде <code>&lt;!-- pvar **название** строка значения --&gt;</code></p>
<p>Обязательные языковые константы <code>lang</code>, <code>title</code>, <code>menu-*</code> должны быть переведены для каждой языковой версии документации.</p>
<p>Константы могут быть использованы как шаблоны. Применение шаблона: <code>{**название** переменная1 переменная2...}</code>. Переменные будут подставлены в шаблон вместо <code>%s</code>.</p>
<p>Пример шаблона:<br />
<code>&lt;!-- pvar tpl-outlink &lt;a target="_blank" href="%s"&gt;%s&lt;i class="fa fa-external-link"&gt;&lt;/i&gt;&lt;/a&gt; --&gt;</code></p>
<p>Пример использования:
<code>&#123;tpl-outlink http://ru.wikipedia.org/wiki/Markdown Markdown&#125;</code></p>
<h5 id="contribute/this-doc/markdown/headers"><div class="in anchor">Заголовки<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Заголовки могут быть описаны следующими способами:</p>
<ul>
<li><code>## якорь # Заголовок</code></li>
<li><code>## якорь # Заголовок #> Форматированный заголовок</code></li>
</ul>
<p><code>якорь</code> - идентификатор заголовка для навигации. Разрешенные символы <code>[a-zA-Z0-9_-]</code>. Должен быть уникальным по отношению к идентификаторам заголовков текущего уровня в пределах родительского заголовка.</p>
<p><code>Форматированный заголовок</code> используется в тех случаях, когда заголовок в контенте должен отличаться от заголовка в навигационной панели.</p>
<p>Примеры:</p>
<ul>
<li>Заголовок первого уровня: <code>## contribute # Внести свою лепту</code></li>
<li>Заголовок второго уровня: <code>### this-doc # Эта документация</code></li>
<li>Заголовок третьего уровня: <code>#### markdown # Формат документации</code></li>
<li>Заголовок четвертого уровня: <code>#### markdown # Заголовки</code></li>
<li>Форматированный заголовок: <code>### mysql # MySQL #> Клиенты \ MySQL</code></li>
</ul>
<blockquote>
<p>При добавлении нового заголовка учтите, что якорь должен быть строго на английском языке и быть простым и информативным. При переводе якори не изменяются</p>
</blockquote>
<h5 id="contribute/this-doc/markdown/lists"><div class="in anchor">Списки<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Для списков добавлена возможность указать CSS-класс элемента:</p>
<pre><code class=""> -.n Элемент без символа списка
 -.n.ti Элемент без символа списка и с отступом от предыдущего</code></pre>
<p>На данный момент используются CSS-классы:</p>
<ul>
<li><code>.n</code> - без иконки элемента списка</li>
<li><code>.ti</code> - отступ от предыдущего элемента</li>
<li><code>.method</code> - специальный CSS-класс для записи методов библиотек</li>
</ul>
<h5 id="contribute/this-doc/markdown/italic_bold"><div class="in anchor">Курсив и жирный<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Выделение курсивом и жирным работает только с помощью звездочки <code>*</code>, знак подчеркивания <code>_</code> отключен для совместимости с программным кодом.</p>
<h5 id="contribute/this-doc/markdown/simple_code"><div class="in anchor">Однострочный код<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Простое выделение кода апострофами <code>&#96;...&#96;</code> дополнено возможностью применять модификаторы и CSS-классы.<br />
Модификаторы — это опции, включающие дополнительную обработку текста.</p>
<p>Модификаторы и классы пишутся после открывающего апострофа и должны быть закрыты дополнительным перед началом текста. Перед указанием модификаторов ставится символ <code>:</code> (двоеточие). Каждый модификатор указывается одним латинским символом. Классы указываются с помощью ведущей точки.</p>
<blockquote>
<p>При указании одновременно и модификаторов, и классов, сначала должны быть записаны модификаторы.</p>
</blockquote>
<p>Список модификаторов:</p>
<ul>
<li><code>:e</code> - кодировать символы (по-умолчаниб кодирование символов выключено)</li>
<li><code>:p</code> - парсинг ссылок</li>
<li><code>:h</code> - php подсветка кода</li>
<li><code>:c</code> - стилевое оформление без фона и обводки</li>
</ul>
<p>Из классов на данный момент может применять только <code>&#46;clear</code>, но лучше указывайте модификатор <code>&#58;c</code>.</p>
<p>Примеры использования:</p>
<ul>
<li><code>&#96;:hc&#96;$url&#96;</code></li>
<li><code>&#96;:p&#96;max-requests (&#91;Number&#93;(#config/types/number) = '10k')&#96;</code></li>
<li><code>&#96;:ph.clear&#96;callback ( &#91;Connection&#93;(#clients/http/connection) $conn, boolean $success )&#96;</code></li>
</ul>
<h5 id="contribute/this-doc/markdown/multi_code"><div class="in anchor">Многострочный код<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Многострочный код добавлен возможностью подсветки синтаксиса и указанием CSS-классов.
Код, содержащий конфигурацию, обозначается синтаксисом <code>ruby</code>.</p>
<p>Из классов на данный момент может применять только <code>.inline</code> для оформления методов.</p>
<p>Примеры:</p>
<blockquote>
<p>&#96;&#96;&#96;php.inline<br />
void public post ( url $url, array $data, array $params )<br />
void public post ( url $url, array $data, callable $resultcb )<br />
&#96;&#96;&#96;</p>
<p>&#96;&#96;&#96;ruby<br />
Pool:HTTPServer {  </p>
<pre><code>listen "tcp://0.0.0.0:80", "tcp://0.0.0.0:443##myContext";  
port 80;  
privileged;  
maxconcurrency 1;  </code></pre>
<p>}<br />
&#96;&#96;&#96;</p>
</blockquote>
<h5 id="contribute/this-doc/markdown/tables"><div class="in anchor">Таблицы<span class="header-path"> <i>&larr;</i> <a href="#contribute/this-doc/markdown">Формат документации</a> <i>&larr;</i> <a href="#contribute/this-doc">Эта документация</a> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h5>
<p>Включена возможность создавать таблицы по формату <a target="_blank" class="tpl-outlink" href="http://code.google.com/p/support/wiki/WikiSyntax#Tables">Google Code Wiki-style<i class="fa fa-external-link"></i></a>.</p>
<h3 id="contribute/php-doc"><div class="in anchor">PHPDoc<span class="header-path"> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h3>
<p>Аналогично, чтобы восполнить пробелы в PHPDoc-комментариях в коде, сделайте Fork <a href="https://github.com/kakserpom/phpdaemon">основного репозитория</a>, внесите изменения и пошлите Pull Request.</p>
<blockquote>
<p>Учтите, что все PHPDoc-комментарии пишутся строго на английском языке</p>
</blockquote>
<h3 id="contribute/code"><div class="in anchor">Программный код<span class="header-path"> <i>&larr;</i> <a href="#contribute">Внести свою лепту</a></span></div>

</h3>
<p>Улучшения программного кода всегда приветствуется. Если у вас есть модуль для публикации, и вы считаете, что он заслуживает включения в основной репозиторий, пришлите Pull Request. Аналогично поступайте с улучшениями существующего кода.</p>
<h2 id="doc-authors"><div class="in anchor">Авторы документации</div>

</h2>
<h3 id="doc-authors/writing"><div class="in anchor">Написание<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<ul>
<li class="n"><a target="_blank" href="https://github.com/EzheG"><i class="fa fa-github"></i></a> Dmitry Efimenko <a href="mailto:[ezheg89@gmail.com](mailto:ezheg89@gmail.com)">[ezheg89@gmail.com](mailto:ezheg89@gmail.com)</a></li>
<li class="n"><a target="_blank" href="https://github.com/kakserpom"><i class="fa fa-github"></i></a> Vasily Zorin <a href="mailto:[maintainer@daemon.io](mailto:maintainer@daemon.io)">[maintainer@daemon.io](mailto:maintainer@daemon.io)</a></li>
<li class="n"><a target="_blank" href="https://github.com/nizsheanez"><i class="fa fa-github"></i></a> Alexey Sharov <a href="mailto:[www.pismeco@gmail.com](mailto:www.pismeco@gmail.com)">[www.pismeco@gmail.com](mailto:www.pismeco@gmail.com)</a></li>
</ul>
<h3 id="doc-authors/translation"><div class="in anchor">Перевод на русский<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<ul>
<li class="n"><a target="_blank" href="https://github.com/kakserpom"><i class="fa fa-github"></i></a> Vasily Zorin <a href="mailto:[maintainer@daemon.io](mailto:maintainer@daemon.io)">[maintainer@daemon.io](mailto:maintainer@daemon.io)</a></li>
</ul>
<h3 id="doc-authors/proofreading"><div class="in anchor">Корректура русской версии<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<p>...</p>
<h3 id="doc-authors/scripting"><div class="in anchor">Программирование<span class="header-path"> <i>&larr;</i> <a href="#doc-authors">Авторы документации</a></span></div>

</h3>
<ul>
<li class="n"><a target="_blank" href="https://github.com/EzheG"><i class="fa fa-github"></i></a> Dmitry Efimenko <a href="mailto:[ezheg89@gmail.com](mailto:ezheg89@gmail.com)">[ezheg89@gmail.com](mailto:ezheg89@gmail.com)</a></li>
</ul>
<p>Движок документации был изначально основан на <a target="_blank" href="https://github.com/chibisov/backdoc">Backdoc <i class="fa fa-github"></i></a></p>
        </div>
    </div>
    <a href="https://github.com/kakserpom/phpdaemon" class="forkButton" target="_blank"><img src="/img/forkme.png" height="149" width="149" alt="Fork me on GitHub"></a>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../js/jquery-1.11.0.min.js"><\/script>')</script>
    <script src="../js/jquery.ba-throttle-debounce.js"></script>
    <script src="../js/waypoints.js"></script>
    <!-- <script src="../js/highlight.pack.js"></script> -->
    <script src="../js/highlight_source/build/highlight.pack.js"></script>
    <script src="../js/main.js"></script>
<!--
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'phpdaemon';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
-->
</body>
</html>