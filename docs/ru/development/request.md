### request # Обработка запросов

Каждый клиентский запрос сопровождается созданием объекта запроса в методе `beginRequest` в приложении.
Объект запроса будет уничтожен сразу после отправки результата клиенту.

> В Websocket объект запроса будет уничтожен при закрытии соединения.

Класс объекта запроса должен наследоваться от `\PHPDaemon\HTTPRequest\Generic`.
Основной рабочий код, обрабатывающий код, необходимо размещать в методе `run`.
К свойствам запроса можно обращаться по `$this->attrs` или через глобальные переменные $_GET, $_POST, $_COOKIE, $_REQUEST, $_SESSION, $_FILES, $_SERVER.

Основные методы объекта запроса:

<md:method>
void protected init ( )

Вызывается единожды при создании объекта запроса.
</md:method>

<md:method>
void protected run ( )

Вызывается диспетчером очереди до тер пор, пока не будет возращен либо `null`, либо `1` или не будет вызван метод terminate().
</md:method>



 - init() - вызывается единожды при создании объекта запроса.
 - run() - вызывается диспетчером очереди до тер пор, пока не будет возращен код 1 или не будет вызван метод terminate().
 - terminate() - его не следует перезагружать. Метод прерывает и завершает выполнение запроса.
 - sleep($seconds) - время в секундах, через которое необходимо вернуться к запросу.
 - wakeup() - прервать sleep.
 - onAbort() - событие сброса запроса, вызывается в случае если клиент отвалился.
 - header($header) - установить заголовок HTTP-ответа.
 - out($str) - записать строку в поток вывода.
 - combinedOut($str) - записать строку в поток вывода, содержащую и заголовки и тело.
 - stdin($str) - обработчик потока ввода запроса.
 - finish($status) - 0 - normal, -1 - abort, -2 - termination
 - chunked() - устанавливает Transfer-Encoding: chunked.